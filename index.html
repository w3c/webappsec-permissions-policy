<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <title>Permissions Policy</title>
  <meta content="ED" name="w3c-status">
  <link href="https://www.w3.org/StyleSheets/TR/2021/W3C-ED" rel="stylesheet">
  <meta content="Bikeshed version ac5ea272d, updated Fri Dec 6 15:45:15 2024 -0800" name="generator">
  <link href="https://www.w3.org/TR/permissions-policy/" rel="canonical">
  <meta content="8430c86cf16dabe92035d1aa05ab489454bed569" name="revision">
  <meta content="dark light" name="color-scheme">
  <link href="https://www.w3.org/StyleSheets/TR/2021/dark.css" media="(prefers-color-scheme: dark)" rel="stylesheet" type="text/css">
<style>
  .unstable::before {
    content: "This section is not stable.";
    float: right;
    color: red;
  }
  .unstable {
    background-image: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' width='300' height='290'><text transform='rotate(-45)' text-anchor='middle' font-family='sans-serif' font-weight='bold' font-size='70' y='210' opacity='.1'>Unstable</text></svg>");
    background-repeat: repeat
  }

 .unstable.example:not(.no-marker)::before {
     content: "Example " counter(example) " (Unstable)";
     float: none;
 }
</style>
<style>/* Boilerplate: style-autolinks */
.css.css, .property.property, .descriptor.descriptor {
    color: var(--a-normal-text);
    font-size: inherit;
    font-family: inherit;
}
.css::before, .property::before, .descriptor::before {
    content: "‘";
}
.css::after, .property::after, .descriptor::after {
    content: "’";
}
.property, .descriptor {
    /* Don't wrap property and descriptor names */
    white-space: nowrap;
}
.type { /* CSS value <type> */
    font-style: italic;
}
pre .property::before, pre .property::after {
    content: "";
}
[data-link-type="property"]::before,
[data-link-type="propdesc"]::before,
[data-link-type="descriptor"]::before,
[data-link-type="value"]::before,
[data-link-type="function"]::before,
[data-link-type="at-rule"]::before,
[data-link-type="selector"]::before,
[data-link-type="maybe"]::before {
    content: "‘";
}
[data-link-type="property"]::after,
[data-link-type="propdesc"]::after,
[data-link-type="descriptor"]::after,
[data-link-type="value"]::after,
[data-link-type="function"]::after,
[data-link-type="at-rule"]::after,
[data-link-type="selector"]::after,
[data-link-type="maybe"]::after {
    content: "’";
}

[data-link-type].production::before,
[data-link-type].production::after,
.prod [data-link-type]::before,
.prod [data-link-type]::after {
    content: "";
}

[data-link-type=element],
[data-link-type=element-attr] {
    font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
    font-size: .9em;
}
[data-link-type=element]::before { content: "<" }
[data-link-type=element]::after  { content: ">" }

[data-link-type=biblio] {
    white-space: pre;
}

@media (prefers-color-scheme: dark) {
    :root {
        --selflink-text: black;
        --selflink-bg: silver;
        --selflink-hover-text: white;
    }
}
</style>
<style>/* Boilerplate: style-colors */
/* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
:root {
    color-scheme: light dark;

    --text: black;
    --bg: white;

    --unofficial-watermark: url(https://www.w3.org/StyleSheets/TR/2016/logos/UD-watermark);

    --logo-bg: #1a5e9a;
    --logo-active-bg: #c00;
    --logo-text: white;

    --tocnav-normal-text: #707070;
    --tocnav-normal-bg: var(--bg);
    --tocnav-hover-text: var(--tocnav-normal-text);
    --tocnav-hover-bg: #f8f8f8;
    --tocnav-active-text: #c00;
    --tocnav-active-bg: var(--tocnav-normal-bg);

    --tocsidebar-text: var(--text);
    --tocsidebar-bg: #f7f8f9;
    --tocsidebar-shadow: rgba(0,0,0,.1);
    --tocsidebar-heading-text: hsla(203,20%,40%,.7);

    --toclink-text: var(--text);
    --toclink-underline: #3980b5;
    --toclink-visited-text: var(--toclink-text);
    --toclink-visited-underline: #054572;

    --heading-text: #005a9c;

    --hr-text: var(--text);

    --algo-border: #def;

    --del-text: red;
    --del-bg: transparent;
    --ins-text: #080;
    --ins-bg: transparent;

    --a-normal-text: #034575;
    --a-normal-underline: #bbb;
    --a-visited-text: var(--a-normal-text);
    --a-visited-underline: #707070;
    --a-hover-bg: rgba(75%, 75%, 75%, .25);
    --a-active-text: #c00;
    --a-active-underline: #c00;

    --blockquote-border: silver;
    --blockquote-bg: transparent;
    --blockquote-text: currentcolor;

    --issue-border: #e05252;
    --issue-bg: #fbe9e9;
    --issue-text: var(--text);
    --issueheading-text: #831616;

    --example-border: #e0cb52;
    --example-bg: #fcfaee;
    --example-text: var(--text);
    --exampleheading-text: #574b0f;

    --note-border: #52e052;
    --note-bg: #e9fbe9;
    --note-text: var(--text);
    --noteheading-text: hsl(120, 70%, 30%);
    --notesummary-underline: silver;

    --assertion-border: #aaa;
    --assertion-bg: #eee;
    --assertion-text: black;

    --advisement-border: orange;
    --advisement-bg: #fec;
    --advisement-text: var(--text);
    --advisementheading-text: #b35f00;

    --warning-border: red;
    --warning-bg: hsla(40,100%,50%,0.95);
    --warning-text: var(--text);

    --amendment-border: #330099;
    --amendment-bg: #F5F0FF;
    --amendment-text: var(--text);
    --amendmentheading-text: #220066;

    --def-border: #8ccbf2;
    --def-bg: #def;
    --def-text: var(--text);
    --defrow-border: #bbd7e9;

    --datacell-border: silver;

    --indexinfo-text: #707070;

    --indextable-hover-text: black;
    --indextable-hover-bg: #f7f8f9;

    --outdatedspec-bg: rgba(0, 0, 0, .5);
    --outdatedspec-text: black;
    --outdated-bg: maroon;
    --outdated-text: white;
    --outdated-shadow: red;

    --editedrec-bg: darkorange;
}

@media (prefers-color-scheme: dark) {
    :root {
        --text: #ddd;
        --bg: black;

        --unofficial-watermark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cg fill='%23100808' transform='translate(200 200) rotate(-45) translate(-200 -200)' stroke='%23100808' stroke-width='3'%3E%3Ctext x='50%25' y='220' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EUNOFFICIAL%3C/text%3E%3Ctext x='50%25' y='305' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EDRAFT%3C/text%3E%3C/g%3E%3C/svg%3E");

        --logo-bg: #1a5e9a;
        --logo-active-bg: #c00;
        --logo-text: white;

        --tocnav-normal-text: #999;
        --tocnav-normal-bg: var(--bg);
        --tocnav-hover-text: var(--tocnav-normal-text);
        --tocnav-hover-bg: #080808;
        --tocnav-active-text: #f44;
        --tocnav-active-bg: var(--tocnav-normal-bg);

        --tocsidebar-text: var(--text);
        --tocsidebar-bg: #080808;
        --tocsidebar-shadow: rgba(255,255,255,.1);
        --tocsidebar-heading-text: hsla(203,20%,40%,.7);

        --toclink-text: var(--text);
        --toclink-underline: #6af;
        --toclink-visited-text: var(--toclink-text);
        --toclink-visited-underline: #054572;

        --heading-text: #8af;

        --hr-text: var(--text);

        --algo-border: #456;

        --del-text: #f44;
        --del-bg: transparent;
        --ins-text: #4a4;
        --ins-bg: transparent;

        --a-normal-text: #6af;
        --a-normal-underline: #555;
        --a-visited-text: var(--a-normal-text);
        --a-visited-underline: var(--a-normal-underline);
        --a-hover-bg: rgba(25%, 25%, 25%, .2);
        --a-active-text: #f44;
        --a-active-underline: var(--a-active-text);

        --borderedblock-bg: rgba(255, 255, 255, .05);

        --blockquote-border: silver;
        --blockquote-bg: var(--borderedblock-bg);
        --blockquote-text: currentcolor;

        --issue-border: #e05252;
        --issue-bg: var(--borderedblock-bg);
        --issue-text: var(--text);
        --issueheading-text: hsl(0deg, 70%, 70%);

        --example-border: hsl(50deg, 90%, 60%);
        --example-bg: var(--borderedblock-bg);
        --example-text: var(--text);
        --exampleheading-text: hsl(50deg, 70%, 70%);

        --note-border: hsl(120deg, 100%, 35%);
        --note-bg: var(--borderedblock-bg);
        --note-text: var(--text);
        --noteheading-text: hsl(120, 70%, 70%);
        --notesummary-underline: silver;

        --assertion-border: #444;
        --assertion-bg: var(--borderedblock-bg);
        --assertion-text: var(--text);

        --advisement-border: orange;
        --advisement-bg: #222218;
        --advisement-text: var(--text);
        --advisementheading-text: #f84;

        --warning-border: red;
        --warning-bg: hsla(40,100%,20%,0.95);
        --warning-text: var(--text);

        --amendment-border: #330099;
        --amendment-bg: #080010;
        --amendment-text: var(--text);
        --amendmentheading-text: #cc00ff;

        --def-border: #8ccbf2;
        --def-bg: #080818;
        --def-text: var(--text);
        --defrow-border: #136;

        --datacell-border: silver;

        --indexinfo-text: #aaa;

        --indextable-hover-text: var(--text);
        --indextable-hover-bg: #181818;

        --outdatedspec-bg: rgba(255, 255, 255, .5);
        --outdatedspec-text: black;
        --outdated-bg: maroon;
        --outdated-text: white;
        --outdated-shadow: red;

        --editedrec-bg: darkorange;
    }
    /* In case a transparent-bg image doesn't expect to be on a dark bg,
       which is quite common in practice... */
    img { background: white; }
}
</style>
<style>/* Boilerplate: style-counters */
body {
    counter-reset: example figure issue;
}
.issue {
    counter-increment: issue;
}
.issue:not(.no-marker)::before {
    content: "Issue " counter(issue);
}

.example {
    counter-increment: example;
}
.example:not(.no-marker)::before {
    content: "Example " counter(example);
}
.invalid.example:not(.no-marker)::before,
.illegal.example:not(.no-marker)::before {
    content: "Invalid Example" counter(example);
}

figcaption {
    counter-increment: figure;
}
figcaption:not(.no-marker)::before {
    content: "Figure " counter(figure) " ";
}
</style>
<style>/* Boilerplate: style-dfn-panel */
:root {
    --dfnpanel-bg: #ddd;
    --dfnpanel-text: var(--text);
    --dfnpanel-target-bg: #ffc;
    --dfnpanel-target-outline: orange;
}
@media (prefers-color-scheme: dark) {
    :root {
        --dfnpanel-bg: #222;
        --dfnpanel-text: var(--text);
        --dfnpanel-target-bg: #333;
        --dfnpanel-target-outline: silver;
    }
}
.dfn-panel {
    position: absolute;
    z-index: 35;
    width: 20em;
    width: 300px;
    height: auto;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.75em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--dfnpanel-bg);
    color: var(--dfnpanel-text);
    border: outset 0.2em;
    white-space: normal; /* in case it's moved into a pre */
}
.dfn-panel:not(.on) { display: none; }
.dfn-panel * { margin: 0; padding: 0; text-indent: 0; }
.dfn-panel > b { display: block; }
.dfn-panel a { color: var(--dfnpanel-text); }
.dfn-panel a:not(:hover) { text-decoration: none !important; border-bottom: none !important; }
.dfn-panel a:focus {
    outline: 5px auto Highlight;
    outline: 5px auto -webkit-focus-ring-color;
}
.dfn-panel > b + b { margin-top: 0.25em; }
.dfn-panel ul { padding: 0 0 0 1em; list-style: none; }
.dfn-panel li a {
    max-width: calc(300px - 1.5em - 1em);
    overflow: hidden;
    text-overflow: ellipsis;
}

.dfn-panel.activated {
    display: inline-block;
    position: fixed;
    left: 8px;
    bottom: 2em;
    margin: 0 auto;
    max-width: calc(100vw - 1.5em - .4em - .5em);
    max-height: 30vh;
    transition: left 1s ease-out, bottom 1s ease-out;
}

.dfn-panel .link-item:hover {
    text-decoration: underline;
}
.dfn-panel .link-item .copy-icon {
    opacity: 0;
}
.dfn-panel .link-item:hover .copy-icon,
.dfn-panel .link-item .copy-icon:focus {
    opacity: 1;
}

.dfn-panel .copy-icon {
    display: inline-block;
    margin-right: 0.5em;
    width: 0.85em;
    height: 1em;
    border-radius: 3px;
    background-color: #ccc;
    cursor: pointer;
}

.dfn-panel .copy-icon .icon {
    width: 100%;
    height: 100%;
    background-color: #fff;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
}

.dfn-panel .copy-icon .icon::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: 1px solid black;
    background-color: #ccc;
    opacity: 0.25;
    transform: translate(3px, -3px);
}

.dfn-panel .copy-icon:active .icon::before {
    opacity: 1;
}

.dfn-paneled[role="button"] { cursor: help; }

.highlighted {
    animation: target-fade 3s;
}

@keyframes target-fade {
    from {
        background-color: var(--dfnpanel-target-bg);
        outline: 5px solid var(--dfnpanel-target-outline);
    }
    to {
        color: var(--a-normal-text);
        background-color: transparent;
        outline: transparent;
    }
}
</style>
<style>/* Boilerplate: style-idl-highlighting */
pre.idl.highlight {
    background: var(--borderedblock-bg, var(--def-bg));
}
</style>
<style>/* Boilerplate: style-issues */
a[href].issue-return {
    float: right;
    float: inline-end;
    color: var(--issueheading-text);
    font-weight: bold;
    text-decoration: none;
}
</style>
<style>/* Boilerplate: style-md-lists */
/* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
[data-md] > :first-child {
    margin-top: 0;
}
[data-md] > :last-child {
    margin-bottom: 0;
}
</style>
<style>/* Boilerplate: style-mdn-anno */
:root {
	--mdn-bg: #EEE;
	--mdn-shadow: #999;
	--mdn-nosupport-text: #ccc;
	--mdn-pass: green;
	--mdn-fail: red;
}
@media (prefers-color-scheme: dark) {
	:root {
		--mdn-bg: #222;
		--mdn-shadow: #444;
		--mdn-nosupport-text: #666;
		--mdn-pass: #690;
		--mdn-fail: #d22;
	}
}
.mdn-anno {
	background: var(--mdn-bg, #EEE);
	border-radius: .25em;
	box-shadow: 0 0 3px var(--mdn-shadow, #999);
	color: var(--text, black);
	font: 1em sans-serif;
	hyphens: none;
	max-width: min-content;
	overflow: hidden;
	padding: 0.2em;
	position: absolute;
	right: 0.3em;
	top: auto;
	white-space: nowrap;
	word-wrap: normal;
	z-index: 8;
}
.mdn-anno.unpositioned {
	display: none;
}
.mdn-anno.overlapping-main {
	opacity: .2;
	transition: opacity .1s;
}
.mdn-anno[open] {
	opacity: 1;
	z-index: 9;
	min-width: 9em;
}
.mdn-anno:hover {
	opacity: 1;
	outline: var(--text, black) 1px solid;
}
.mdn-anno > summary {
	font-weight: normal;
	text-align: right;
	cursor: pointer;
	display: block;
}
.mdn-anno > summary > .less-than-two-engines-flag {
	color: var(--mdn-fail);
	padding-right: 2px;
}
.mdn-anno > summary > .all-engines-flag {
	color: var(--mdn-pass);
	padding-right: 2px;
}
.mdn-anno > summary > span {
	color: #fff;
	background-color: #000;
	font-weight: normal;
	font-family: zillaslab, Palatino, "Palatino Linotype", serif;
	padding: 2px 3px 0px 3px;
	line-height: 1.3em;
	vertical-align: top;
}
.mdn-anno > .feature {
	margin-top: 20px;
}
.mdn-anno > .feature:not(:first-of-type) {
	border-top: 1px solid #999;
	margin-top: 6px;
	padding-top: 2px;
}
.mdn-anno > .feature > .less-than-two-engines-text {
	color: var(--mdn-fail);
}
.mdn-anno > .feature > .all-engines-text {
	color: var(--mdn-pass);
}
.mdn-anno > .feature > p {
	font-size: .75em;
	margin-top: 6px;
	margin-bottom: 0;
}
.mdn-anno > .feature > p + p {
	margin-top: 3px;
}
.mdn-anno > .feature > .support {
	display: block;
	font-size: 0.6em;
	margin: 0;
	padding: 0;
	margin-top: 2px;
}
.mdn-anno > .feature > .support + div {
	padding-top: 0.5em;
}
.mdn-anno > .feature > .support > hr {
	display: block;
	border: none;
	border-top: 1px dotted #999;
	padding: 3px 0px 0px 0px;
	margin: 2px 3px 0px 3px;
}
.mdn-anno > .feature > .support > hr::before {
	content: "";
}
.mdn-anno > .feature > .support > span {
	padding: 0.2em 0;
	display: block;
	display: table;
}
.mdn-anno > .feature > .support > span.no {
	color: var(--mdn-nosupport-text);
	filter: grayscale(100%);
}
.mdn-anno > .feature > .support > span.no::before {
	opacity: 0.5;
}
.mdn-anno > .feature > .support > span:first-of-type {
	padding-top: 0.5em;
}
.mdn-anno > .feature > .support > span > span {
	padding: 0 0.5em;
	display: table-cell;
}
.mdn-anno > .feature > .support > span > span:first-child {
	width: 100%;
}
.mdn-anno > .feature > .support > span > span:last-child {
	width: 100%;
	white-space: pre;
	padding: 0;
}
.mdn-anno > .feature > .support > span::before {
	content: ' ';
	display: table-cell;
	min-width: 1.5em;
	height: 1.5em;
	background: no-repeat center center;
	background-size: contain;
	text-align: right;
	font-size: 0.75em;
	font-weight: bold;
}
.mdn-anno > .feature > .support > .chrome_android::before {
	background-image: url(https://resources.whatwg.org/browser-logos/chrome.svg);
}
.mdn-anno > .feature > .support > .firefox_android::before {
	background-image: url(https://resources.whatwg.org/browser-logos/firefox.png);
}
.mdn-anno > .feature > .support > .chrome::before {
	background-image: url(https://resources.whatwg.org/browser-logos/chrome.svg);
}
.mdn-anno > .feature > .support > .edge_blink::before {
	background-image: url(https://resources.whatwg.org/browser-logos/edge.svg);
}
.mdn-anno > .feature > .support > .edge::before {
	background-image: url(https://resources.whatwg.org/browser-logos/edge_legacy.svg);
}
.mdn-anno > .feature > .support > .firefox::before {
	background-image: url(https://resources.whatwg.org/browser-logos/firefox.png);
}
.mdn-anno > .feature > .support > .ie::before {
	background-image: url(https://resources.whatwg.org/browser-logos/ie.png);
}
.mdn-anno > .feature > .support > .safari_ios::before {
	background-image: url(https://resources.whatwg.org/browser-logos/safari-ios.svg);
}
.mdn-anno > .feature > .support > .nodejs::before {
	background-image: url(https://nodejs.org/favicon.ico);
}
.mdn-anno > .feature > .support > .opera_android::before {
	background-image: url(https://resources.whatwg.org/browser-logos/opera.svg);
}
.mdn-anno > .feature > .support > .opera::before {
	background-image: url(https://resources.whatwg.org/browser-logos/opera.svg);
}
.mdn-anno > .feature > .support > .safari::before {
	background-image: url(https://resources.whatwg.org/browser-logos/safari.png);
}
.mdn-anno > .feature > .support > .samsunginternet_android::before {
	background-image: url(https://resources.whatwg.org/browser-logos/samsung.svg);
}
.mdn-anno > .feature > .support > .webview_android::before {
	background-image: url(https://resources.whatwg.org/browser-logos/android-webview.png);
}
.name-slug-mismatch {
	color: red;
}
.caniuse-status:hover {
	z-index: 9;
}
/* dt, li, .issue, .note, and .example are "position: relative", so to put annotation at right margin, must move to right of containing block */;
.h-entry:not(.status-LS) dt > .mdn-anno, .h-entry:not(.status-LS) li > .mdn-anno, .h-entry:not(.status-LS) .issue > .mdn-anno, .h-entry:not(.status-LS) .note > .mdn-anno, .h-entry:not(.status-LS) .example > .mdn-anno {
	right: -6.7em;
}
.h-entry p + .mdn-anno {
	margin-top: 0;
}
 h2 + .mdn-anno.after {
	margin: -48px 0 0 0;
}
 h3 + .mdn-anno.after {
	margin: -46px 0 0 0;
}
 h4 + .mdn-anno.after {
	margin: -42px 0 0 0;
}
 h5 + .mdn-anno.after {
	margin: -40px 0 0 0;
}
 h6 + .mdn-anno.after {
	margin: -40px 0 0 0;
}
</style>
<style>/* Boilerplate: style-ref-hints */
:root {
    --ref-hint-bg: #ddd;
    --ref-hint-text: var(--text);
}
@media (prefers-color-scheme: dark) {
    :root {
        --ref-hint-bg: #222;
        --ref-hint-text: var(--text);
    }
}

.ref-hint {
    display: inline-block;
    position: absolute;
    z-index: 35;
    width: 20em;
    width: 300px;
    height: auto;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.5em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--ref-hint-bg);
    color: var(--ref-hint-text);
    border: outset 0.2em;
    white-space: normal; /* in case it's moved into a pre */
}

.ref-hint * { margin: 0; padding: 0; text-indent: 0; }

.ref-hint ul { padding: 0 0 0 1em; list-style: none; }
</style>
<style>/* Boilerplate: style-selflinks */
:root {
    --selflink-text: white;
    --selflink-bg: gray;
    --selflink-hover-text: black;
}
.heading, .issue, .note, .example, li, dt {
    position: relative;
}
a.self-link {
    position: absolute;
    top: 0;
    left: calc(-1 * (3.5rem - 26px));
    width: calc(3.5rem - 26px);
    height: 2em;
    text-align: center;
    border: none;
    transition: opacity .2s;
    opacity: .5;
}
a.self-link:hover {
    opacity: 1;
}
.heading > a.self-link {
    font-size: 83%;
}
.example > a.self-link,
.note > a.self-link,
.issue > a.self-link {
    /* These blocks are overflow:auto, so positioning outside
       doesn't work. */
    left: auto;
    right: 0;
}
li > a.self-link {
    left: calc(-1 * (3.5rem - 26px) - 2em);
}
dfn > a.self-link {
    top: auto;
    left: auto;
    opacity: 0;
    width: 1.5em;
    height: 1.5em;
    background: var(--selflink-bg);
    color: var(--selflink-text);
    font-style: normal;
    transition: opacity .2s, background-color .2s, color .2s;
}
dfn:hover > a.self-link {
    opacity: 1;
}
dfn > a.self-link:hover {
    color: var(--selflink-hover-text);
}

a.self-link::before            { content: "¶"; }
.heading > a.self-link::before { content: "§"; }
dfn > a.self-link::before      { content: "#"; }
</style>
<style>/* Boilerplate: style-syntax-highlighting */
code.highlight { padding: .1em; border-radius: .3em; }
pre.highlight, pre > code.highlight { display: block; padding: 1em; margin: .5em 0; overflow: auto; border-radius: 0; }

.highlight:not(.idl) { background: rgba(0, 0, 0, .03); }
c-[a] { color: #990055 } /* Keyword.Declaration */
c-[b] { color: #990055 } /* Keyword.Type */
c-[c] { color: #708090 } /* Comment */
c-[d] { color: #708090 } /* Comment.Multiline */
c-[e] { color: #0077aa } /* Name.Attribute */
c-[f] { color: #669900 } /* Name.Tag */
c-[g] { color: #222222 } /* Name.Variable */
c-[k] { color: #990055 } /* Keyword */
c-[l] { color: #000000 } /* Literal */
c-[m] { color: #000000 } /* Literal.Number */
c-[n] { color: #0077aa } /* Name */
c-[o] { color: #999999 } /* Operator */
c-[p] { color: #999999 } /* Punctuation */
c-[s] { color: #a67f59 } /* Literal.String */
c-[t] { color: #a67f59 } /* Literal.String.Single */
c-[u] { color: #a67f59 } /* Literal.String.Double */
c-[cp] { color: #708090 } /* Comment.Preproc */
c-[c1] { color: #708090 } /* Comment.Single */
c-[cs] { color: #708090 } /* Comment.Special */
c-[kc] { color: #990055 } /* Keyword.Constant */
c-[kn] { color: #990055 } /* Keyword.Namespace */
c-[kp] { color: #990055 } /* Keyword.Pseudo */
c-[kr] { color: #990055 } /* Keyword.Reserved */
c-[ld] { color: #000000 } /* Literal.Date */
c-[nc] { color: #0077aa } /* Name.Class */
c-[no] { color: #0077aa } /* Name.Constant */
c-[nd] { color: #0077aa } /* Name.Decorator */
c-[ni] { color: #0077aa } /* Name.Entity */
c-[ne] { color: #0077aa } /* Name.Exception */
c-[nf] { color: #0077aa } /* Name.Function */
c-[nl] { color: #0077aa } /* Name.Label */
c-[nn] { color: #0077aa } /* Name.Namespace */
c-[py] { color: #0077aa } /* Name.Property */
c-[ow] { color: #999999 } /* Operator.Word */
c-[mb] { color: #000000 } /* Literal.Number.Bin */
c-[mf] { color: #000000 } /* Literal.Number.Float */
c-[mh] { color: #000000 } /* Literal.Number.Hex */
c-[mi] { color: #000000 } /* Literal.Number.Integer */
c-[mo] { color: #000000 } /* Literal.Number.Oct */
c-[sb] { color: #a67f59 } /* Literal.String.Backtick */
c-[sc] { color: #a67f59 } /* Literal.String.Char */
c-[sd] { color: #a67f59 } /* Literal.String.Doc */
c-[se] { color: #a67f59 } /* Literal.String.Escape */
c-[sh] { color: #a67f59 } /* Literal.String.Heredoc */
c-[si] { color: #a67f59 } /* Literal.String.Interpol */
c-[sx] { color: #a67f59 } /* Literal.String.Other */
c-[sr] { color: #a67f59 } /* Literal.String.Regex */
c-[ss] { color: #a67f59 } /* Literal.String.Symbol */
c-[vc] { color: #0077aa } /* Name.Variable.Class */
c-[vg] { color: #0077aa } /* Name.Variable.Global */
c-[vi] { color: #0077aa } /* Name.Variable.Instance */
c-[il] { color: #000000 } /* Literal.Number.Integer.Long */

@media (prefers-color-scheme: dark) {
    .highlight:not(.idl) { background: rgba(255, 255, 255, .05); }

    c-[a] { color: #d33682 } /* Keyword.Declaration */
    c-[b] { color: #d33682 } /* Keyword.Type */
    c-[c] { color: #2aa198 } /* Comment */
    c-[d] { color: #2aa198 } /* Comment.Multiline */
    c-[e] { color: #268bd2 } /* Name.Attribute */
    c-[f] { color: #b58900 } /* Name.Tag */
    c-[g] { color: #cb4b16 } /* Name.Variable */
    c-[k] { color: #d33682 } /* Keyword */
    c-[l] { color: #657b83 } /* Literal */
    c-[m] { color: #657b83 } /* Literal.Number */
    c-[n] { color: #268bd2 } /* Name */
    c-[o] { color: #657b83 } /* Operator */
    c-[p] { color: #657b83 } /* Punctuation */
    c-[s] { color: #6c71c4 } /* Literal.String */
    c-[t] { color: #6c71c4 } /* Literal.String.Single */
    c-[u] { color: #6c71c4 } /* Literal.String.Double */
    c-[ch] { color: #2aa198 } /* Comment.Hashbang */
    c-[cp] { color: #2aa198 } /* Comment.Preproc */
    c-[cpf] { color: #2aa198 } /* Comment.PreprocFile */
    c-[c1] { color: #2aa198 } /* Comment.Single */
    c-[cs] { color: #2aa198 } /* Comment.Special */
    c-[kc] { color: #d33682 } /* Keyword.Constant */
    c-[kn] { color: #d33682 } /* Keyword.Namespace */
    c-[kp] { color: #d33682 } /* Keyword.Pseudo */
    c-[kr] { color: #d33682 } /* Keyword.Reserved */
    c-[ld] { color: #657b83 } /* Literal.Date */
    c-[nc] { color: #268bd2 } /* Name.Class */
    c-[no] { color: #268bd2 } /* Name.Constant */
    c-[nd] { color: #268bd2 } /* Name.Decorator */
    c-[ni] { color: #268bd2 } /* Name.Entity */
    c-[ne] { color: #268bd2 } /* Name.Exception */
    c-[nf] { color: #268bd2 } /* Name.Function */
    c-[nl] { color: #268bd2 } /* Name.Label */
    c-[nn] { color: #268bd2 } /* Name.Namespace */
    c-[py] { color: #268bd2 } /* Name.Property */
    c-[ow] { color: #657b83 } /* Operator.Word */
    c-[mb] { color: #657b83 } /* Literal.Number.Bin */
    c-[mf] { color: #657b83 } /* Literal.Number.Float */
    c-[mh] { color: #657b83 } /* Literal.Number.Hex */
    c-[mi] { color: #657b83 } /* Literal.Number.Integer */
    c-[mo] { color: #657b83 } /* Literal.Number.Oct */
    c-[sa] { color: #6c71c4 } /* Literal.String.Affix */
    c-[sb] { color: #6c71c4 } /* Literal.String.Backtick */
    c-[sc] { color: #6c71c4 } /* Literal.String.Char */
    c-[dl] { color: #6c71c4 } /* Literal.String.Delimiter */
    c-[sd] { color: #6c71c4 } /* Literal.String.Doc */
    c-[se] { color: #6c71c4 } /* Literal.String.Escape */
    c-[sh] { color: #6c71c4 } /* Literal.String.Heredoc */
    c-[si] { color: #6c71c4 } /* Literal.String.Interpol */
    c-[sx] { color: #6c71c4 } /* Literal.String.Other */
    c-[sr] { color: #6c71c4 } /* Literal.String.Regex */
    c-[ss] { color: #6c71c4 } /* Literal.String.Symbol */
    c-[fm] { color: #268bd2 } /* Name.Function.Magic */
    c-[vc] { color: #cb4b16 } /* Name.Variable.Class */
    c-[vg] { color: #cb4b16 } /* Name.Variable.Global */
    c-[vi] { color: #cb4b16 } /* Name.Variable.Instance */
    c-[vm] { color: #cb4b16 } /* Name.Variable.Magic */
    c-[il] { color: #657b83 } /* Literal.Number.Integer.Long */
}
</style>
<style>/* Boilerplate: style-var-click-highlighting */
/*
Colors were chosen in Lab using https://nixsensor.com/free-color-converter/
D50 2deg illuminant, L in [0,100], a and b in [-128, 128]
0 = lab(85,0,85)
1 = lab(85,80,30)
2 = lab(85,-40,40)
3 = lab(85,-50,0)
4 = lab(85,5,15)
5 = lab(85,-10,-50)
6 = lab(85,35,-15)

For darkmode:
0 = oklab(50%   0%  108%)
1 = oklab(50% -51%   51%)
2 = oklab(50% -64%  -20%)
3 = oklab(50%   6%   19%)
4 = oklab(50% -12%  -64%)
5 = oklab(50%  44%  -19%)  
6 = oklab(50% 102%   38%)
*/

[data-algorithm] var { cursor: pointer; }
var[data-var-color] { background-color: var(--var-bg); box-shadow: 0 0 0 2px var(--var-bg); }

var[data-var-color] { --var-bg: #F4D200; }
var[data-var-color="1"] { --var-bg: #FF87A2; }
var[data-var-color="2"] { --var-bg: #96E885; }
var[data-var-color="3"] { --var-bg: #3EEED2; }
var[data-var-color="4"] { --var-bg: #EACFB6; }
var[data-var-color="5"] { --var-bg: #82DDFF; }
var[data-var-color="6"] { --var-vg: #FFBCF2; }

@media (prefers-color-scheme: dark) {
	var[data-var-color] { --var-bg: #bc1a00; }
	var[data-var-color="1"] { --var-bg: #007f00; }
	var[data-var-color="2"] { --var-bg: #008698; }
	var[data-var-color="3"] { --var-bg: #7f5b2b; }
	var[data-var-color="4"] { --var-bg: #004df3; }
	var[data-var-color="5"] { --var-bg: #a1248a; }
	var[data-var-color="6"] { --var-vg: #ff0000; }
}
</style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72"> </a> </p>
   <h1 class="p-name no-ref" id="title">Permissions Policy</h1>
   <p id="w3c-state"><a href="https://www.w3.org/standards/types/#ED">Editor’s Draft</a>, <time class="dt-updated" datetime="2025-01-13">13 January 2025</time></p>
   <details open>
    <summary>More details about this document</summary>
    <div data-fill-with="spec-metadata">
     <dl>
      <dt>This version:
      <dd><a class="u-url" href="https://w3c.github.io/webappsec-permissions-policy/">https://w3c.github.io/webappsec-permissions-policy/</a>
      <dt>Latest published version:
      <dd><a href="https://www.w3.org/TR/permissions-policy/">https://www.w3.org/TR/permissions-policy/</a>
      <dt>Feedback:
      <dd><a href="https://github.com/w3c/webappsec-permissions-policy/issues/">GitHub</a>
      <dd><a href="#issues-index">Inline In Spec</a>
      <dt class="editor">Editor:
      <dd class="editor p-author h-card vcard" data-editor-id="76841"><a class="p-name fn u-email email" href="mailto:iclelland@google.com">Ian Clelland</a> (<span class="p-org org">Google</span>)
     </dl>
    </div>
   </details>
   <div data-fill-with="warning"></div>
   <p class="copyright" data-fill-with="copyright"><a href="https://www.w3.org/policies/#copyright">Copyright</a> © 2025 <a href="https://www.w3.org/">World Wide Web Consortium</a>. <abbr title="World Wide Web Consortium">W3C</abbr><sup>®</sup> <a href="https://www.w3.org/policies/#Legal_Disclaimer">liability</a>, <a href="https://www.w3.org/policies/#W3C_Trademarks">trademark</a> and <a href="https://www.w3.org/copyright/software-license/" rel="license" title="W3C Software and Document License">permissive document license</a> rules apply. </p>
   <hr title="Separator for header">
  </div>
  <div class="p-summary" data-fill-with="abstract">
   <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
   <p>This specification defines a mechanism that allows developers to selectively enable and disable use of various browser features and APIs.</p>
  </div>
  <h2 class="no-num no-toc no-ref heading settled" id="sotd"><span class="content">Status of this document</span></h2>
  <div data-fill-with="status">
   <p> This is a public copy of the editors’ draft.
	It is provided for discussion only and may change at any moment.
	Its publication here does not imply endorsement of its contents by W3C.
	Don’t cite this document other than as work in progress. </p>
   <p> <strong>Changes to this document may be tracked at <a href="https://github.com/w3c/webappsec">https://github.com/w3c/webappsec</a>.</strong> </p>
   <p> The (<a href="https://lists.w3.org/Archives/Public/public-webappsec/">archived</a>) public mailing list <a href="mailto:public-webappsec@w3.org?Subject=%5Bpermissions-policy%5D%20PUT%20SUBJECT%20HERE">public-webappsec@w3.org</a> (see <a href="https://www.w3.org/Mail/Request">instructions</a>)
	is preferred for discussion of this specification.
	When sending e-mail,
	please put the text “permissions-policy” in the subject,
	preferably like this:
	“[permissions-policy] <em>…summary of comment…</em>” </p>
   <p> This document was produced by the <a href="https://www.w3.org/groups/wg/webappsec">Web Application Security Working Group</a>. </p>
   <p> This document was produced by a group operating under
	the <a href="https://www.w3.org/policies/patent-policy/">W3C Patent Policy</a>.
	W3C maintains a <a href="https://www.w3.org/groups/wg/webappsec/ipr" rel="disclosure">public list of any patent disclosures</a> made in connection with the deliverables of the group;
	that page also includes instructions for disclosing a patent.
	An individual who has actual knowledge of a patent which the individual believes contains <a href="https://www.w3.org/policies/patent-policy/#def-essential">Essential Claim(s)</a> must disclose the information in accordance with <a href="https://www.w3.org/policies/patent-policy/#sec-Disclosure">section 6 of the W3C Patent Policy</a>. </p>
   <p> This document is governed by the <a href="https://www.w3.org/policies/process/20231103/" id="w3c_process_revision">03 November 2023 W3C Process Document</a>. </p>
   <p></p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li><a href="#introduction"><span class="secno">1</span> <span class="content">Introduction</span></a>
    <li><a href="#examples"><span class="secno">2</span> <span class="content">Examples</span></a>
    <li><a href="#other-and-related-mechanisms"><span class="secno">3</span> <span class="content">Other and related mechanisms</span></a>
    <li>
     <a href="#framework"><span class="secno">4</span> <span class="content">Framework</span></a>
     <ol class="toc">
      <li><a href="#features"><span class="secno">4.1</span> <span class="content">Policy-controlled Features</span></a>
      <li><a href="#policies"><span class="secno">4.2</span> <span class="content">Policies</span></a>
      <li><a href="#inherited-policies"><span class="secno">4.3</span> <span class="content">Inherited policies</span></a>
      <li><a href="#header-policies"><span class="secno">4.4</span> <span class="content">Header policies</span></a>
      <li><a href="#container-policies"><span class="secno">4.5</span> <span class="content">Container policies</span></a>
      <li><a href="#policy-directives"><span class="secno">4.6</span> <span class="content">Policy directives</span></a>
      <li><a href="#allowlists"><span class="secno">4.7</span> <span class="content">Allowlists</span></a>
      <li><a href="#default-allowlists"><span class="secno">4.8</span> <span class="content">Default Allowlists</span></a>
     </ol>
    <li>
     <a href="#serialization"><span class="secno">5</span> <span class="content">Permissions Policy Serialization</span></a>
     <ol class="toc">
      <li><a href="#ascii-serialization"><span class="secno">5.1</span> <span class="content">HTML attribute serialization</span></a>
      <li><a href="#structured-header-serialization"><span class="secno">5.2</span> <span class="content">Structured header serialization</span></a>
     </ol>
    <li>
     <a href="#delivery"><span class="secno">6</span> <span class="content">Delivery</span></a>
     <ol class="toc">
      <li><a href="#permissions-policy-http-header-field"><span class="secno">6.1</span> <span class="content">`<code>Permissions-Policy</code>` HTTP Header Field</span></a>
      <li><a href="#iframe-allow-attribute"><span class="secno">6.2</span> <span class="content">The <code>allow</code> attribute of the <code>iframe</code> element</span></a>
      <li>
       <a href="#legacy-attributes"><span class="secno">6.3</span> <span class="content">Additional attributes to support legacy features</span></a>
       <ol class="toc">
        <li><a href="#iframe-allowfullscreen-attribute"><span class="secno">6.3.1</span> <span class="content">allowfullscreen</span></a>
       </ol>
     </ol>
    <li>
     <a href="#introspection"><span class="secno">7</span> <span class="content">Policy Introspection from Scripts</span></a>
     <ol class="toc">
      <li>
       <a href="#introspection-overview"><span class="secno">7.1</span> <span class="content">Overview</span></a>
       <ol class="toc">
        <li><a href="#document-policies"><span class="secno">7.1.1</span> <span class="content">Document policies</span></a>
        <li><a href="#frame-policies"><span class="secno">7.1.2</span> <span class="content">Frame policies</span></a>
       </ol>
      <li><a href="#the-policy-object"><span class="secno">7.2</span> <span class="content">The permissionsPolicy object</span></a>
     </ol>
    <li>
     <a href="#reporting"><span class="secno">8</span> <span class="content">Reporting</span></a>
     <ol class="toc">
      <li><a href="#permissions-policy-report-only-http-header-field"><span class="secno">8.1</span> <span class="content">`<code>Permissions-Policy-Report-Only</code>` HTTP Header Field</span></a>
     </ol>
    <li>
     <a href="#algorithms"><span class="secno">9</span> <span class="content">Algorithms</span></a>
     <ol class="toc">
      <li><a href="#algo-process-response-policy"><span class="secno">9.1</span> <span class="content"><span>Process response policy</span></span></a>
      <li><a href="#algo-construct-policy"><span class="secno">9.2</span> <span class="content"><span>Construct policy from dictionary and origin</span></span></a>
      <li><a href="#algo-parse-policy-directive"><span class="secno">9.3</span> <span class="content"><span>Parse policy directive</span></span></a>
      <li><a href="#algo-process-policy-attributes"><span class="secno">9.4</span> <span class="content"><span>Process permissions policy attributes</span></span></a>
      <li><a href="#algo-create-for-navigable"><span class="secno">9.5</span> <span class="content"><span>Create a Permissions Policy for a navigable</span></span></a>
      <li><a href="#algo-create-from-response"><span class="secno">9.6</span> <span class="content"><span>Create a Permissions Policy for a navigable from response</span></span></a>
      <li><a href="#algo-define-inherited-policy-in-container"><span class="secno">9.7</span> <span class="content"><span>Define an inherited policy for feature in container at origin</span></span></a>
      <li><a href="#algo-get-feature-value-for-origin"><span class="secno">9.8</span> <span class="content"><span>Get feature value for origin</span></span></a>
      <li><a href="#algo-check-permissions-policy"><span class="secno">9.9</span> <span class="content"><span>Check permissions policy</span></span></a>
      <li><a href="#algo-is-feature-enabled"><span class="secno">9.10</span> <span class="content"><span>Is feature enabled in document for origin?</span></span></a>
      <li><a href="#algo-get-reporting-endpoint"><span class="secno">9.11</span> <span class="content"><span>Get the reporting endpoint for a feature</span></span></a>
      <li><a href="#algo-check-potential-violation-in-container"><span class="secno">9.12</span> <span class="content"><span>Check potential violation of permissions policy in container</span></span></a>
      <li><a href="#algo-report-permissions-policy-violation"><span class="secno">9.13</span> <span class="content"><span>Generate report for violation of permissions policy on settings</span></span></a>
      <li><a href="#algo-report-potential-permissions-policy-violation"><span class="secno">9.14</span> <span class="content"><span>Generate report for potential violation of permissions policy on settings</span></span></a>
      <li><a href="#algo-should-request-be-allowed-to-use-feature"><span class="secno">9.15</span> <span class="content"><span>Should request be allowed to use feature?</span></span></a>
     </ol>
    <li>
     <a href="#changes-to-other-specifications"><span class="secno">10</span> <span class="content">Changes to other specifications</span></a>
     <ol class="toc">
      <li><a href="#changes-to-html"><span class="secno">10.1</span> <span class="content">Changes to the HTML specification</span></a>
     </ol>
    <li><a href="#iana-considerations"><span class="secno">11</span> <span class="content">IANA Considerations</span></a>
    <li>
     <a href="#privacy-and-security"><span class="secno">12</span> <span class="content">Privacy and Security</span></a>
     <ol class="toc">
      <li><a href="#privacy-expose-behavior"><span class="secno">12.1</span> <span class="content">Exposure of cross-origin behavior</span></a>
      <li><a href="#privacy-alter-behavior"><span class="secno">12.2</span> <span class="content">Unanticipated behavior changes</span></a>
      <li><a href="#privacy-expose-policy"><span class="secno">12.3</span> <span class="content">Exposure of embedding policy</span></a>
     </ol>
    <li>
     <a href="#change-log"><span class="secno">13</span> <span class="content">Change log</span></a>
     <ol class="toc">
      <li><a href="#changes-since-fpwd"><span class="secno">13.1</span> <span class="content">Changes since FPWD</span></a>
     </ol>
    <li>
     <a href="#w3c-conformance"><span class="secno"></span> <span class="content">Conformance</span></a>
     <ol class="toc">
      <li><a href="#w3c-conventions"><span class="secno"></span> <span class="content">Document conventions</span></a>
      <li><a href="#w3c-conformant-algorithms"><span class="secno"></span> <span class="content">Conformant Algorithms</span></a>
     </ol>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ol class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
      <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span class="content">Terms defined by reference</span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
      <li><a href="#informative"><span class="secno"></span> <span class="content">Informative References</span></a>
     </ol>
    <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL Index</span></a>
    <li><a href="#issues-index"><span class="secno"></span> <span class="content">Issues Index</span></a>
   </ol>
  </nav>
  <main>
   <section>
    <h2 class="heading settled" data-level="1" id="introduction"><span class="secno">1. </span><span class="content">Introduction</span><a class="self-link" href="#introduction"></a></h2>
    <p>The web platform provides an ever-expanding set of features and APIs,
  offering richer functionality, better developer ergonomics, and improved
  performance. However, a missing piece is the ability for the developer to
  selectively enable, disable, or modify the behavior of some of these browser
  features and APIs within their application:</p>
    <ol>
     <li>The developer may want to selectively <em>disable</em> access to certain
    browser features and APIs to "lock down" their application, as a security
    or performance precaution, to prevent own and third-party content executing
    within their application from introducing unwanted or unexpected behaviors
    within their application.
     <li>The developer may want to selectively <em>enable</em> access to certain
    browser features and APIs which may be disabled by default - e.g. some
    features may be disabled by default in embedded context unless explicitly
    enabled; some features may be subject to other policy requirements.
     <li>The developer may want to use the policy to assert a promise to a
    client or an embedder about the use—or lack of thereof—of certain features
    and APIs. For example, to enable certain types of "fast path" optimizations
    in the browser, or to assert a promise about conformance with some
    requirements set by other embedders - e.g. various social networks, search
    engines, and so on.
    </ol>
    <p>This specification defines a policy mechanism that addresses the above use
  cases.</p>
    <p class="note" role="note">This specification used to be named Feature Policy.</p>
   </section>
   <section>
    <h2 class="heading settled" data-level="2" id="examples"><span class="secno">2. </span><span class="content">Examples</span><a class="self-link" href="#examples"></a></h2>
    <div class="example" id="example-cd5e6c93">
     <a class="self-link" href="#example-cd5e6c93"></a> 
     <p>SecureCorp Inc. wants to disable use of Fullscreen and Geolocation APIs
    within their application. It can do so by delivering the following HTTP
    response header to define a permissions policy:</p>
<pre><a data-link-type="http-header" href="#permissions-policy-header" id="ref-for-permissions-policy-header">Permissions-Policy</a>: fullscreen=(), geolocation=()</pre>
     <p>By specifying an empty origin list, the specified features will be
    disabled for all documents, including nested documents, regardless of their
    origin.</p>
    </div>
    <div class="example" id="example-1db1f085">
     <a class="self-link" href="#example-1db1f085"></a> 
     <p>Geolocation is disabled by default in all cross-origin frames. FastCorp
    Inc. has a specific cross-origin iframe on their site for which it wants to
    enable geolocation. It can do so by including an "<code>allow</code>"
    attribute on the iframe element:</p>
<pre>&lt;iframe src="https://other.com/map" <a href="#iframe-allow-attribute">allow</a>="geolocation">&lt;/iframe></pre>
     <p>Iframe attributes can selectively enable features in certain frames, and
    not in others, even if those contain documents from the same origin.</p>
    </div>
    <div class="example" id="example-6813ab1c">
     <a class="self-link" href="#example-6813ab1c"></a> 
     <p>SecureCorp Inc. wants to completely disable use of the Geolocation API
    within all <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#descendant-navigables" id="ref-for-descendant-navigables">descendant navigables</a> except for its own origin and
    those whose origin is "<code>https://example.com</code>", even in the
    presence of an attacker who can embed their own iframes on SecureCorp’s
    pages. It can do this by delivering the following HTTP response header to
    define a restricted permissions policy for Geolocation:</p>
<pre><a data-link-type="http-header" href="#permissions-policy-header" id="ref-for-permissions-policy-header①">Permissions-Policy</a>: geolocation=(self "https://example.com")</pre>
     <p>The <a data-link-type="dfn" href="#allowlist" id="ref-for-allowlist">allowlist</a> is a list of one or more origins, which can include
    the application’s origin, optionally with the keyword "<code>self</code>",
    and any third-party origin.</p>
     <p>With this policy in effect, it can then use the "<code>allow</code>"
    iframe attribute as usual to grant geolocation to certain frames, but only
    those frames hosting content from http://example.com or SecureCorp itself
    will actually be granted the ability to use that API.</p>
    </div>
    <div class="example" id="example-aa6215ff">
     <a class="self-link" href="#example-aa6215ff"></a> 
     <p>SecureCorp Inc. restructured its domains and now needs to delegate
    use of the Geolocation API to its origin ("<code>https://example.com</code>")
    as well as three subdomains ("<code>https://geo.example.com</code>",
    "<code>https://geo2.example.com</code>", and "<code>https://new.geo2.example.com</code>").
    This needs to be accomplished while still disabling the use of the Geolocation API
    within all other browsing contexts. It can do this by delivering the following HTTP response header:</p>
<pre><a data-link-type="http-header" href="#permissions-policy-header" id="ref-for-permissions-policy-header②">Permissions-Policy</a>: geolocation=(self "https://example.com" "https://geo.example.com" "https://geo2.example.com" "https://new.geo2.example.com")
</pre>
     <p>This works, but if SecureCorp Inc. feels safe delegating to any subdomains on
    "<code>https://example.com</code>" the HTTP response header could instead be:</p>
<pre><a data-link-type="http-header" href="#permissions-policy-header" id="ref-for-permissions-policy-header③">Permissions-Policy</a>: geolocation=(self "https://example.com" "https://*.example.com")
</pre>
     <p>Not only would the above header permit "<code>https://geo.example.com</code>",
    "<code>https://geo2.example.com</code>", and "<code>https://new.geo2.example.com</code>"
    to use the Geolocation API, but any other subdomains of "<code>https://example.com</code>"
    could use it too. Note that "<code>https://example.com</code>" is not covered by the <a data-link-type="dfn" href="#allowlist" id="ref-for-allowlist①">allowlist</a> entry "<code>https://*.example.com</code>" and must also be added.</p>
    </div>
    <div class="example" id="example-f49153e4">
     <a class="self-link" href="#example-f49153e4"></a> 
     <p>SecureCorp Inc. restructured its services and now needs to needs to delegate
    use of the Geolocation API to its origin ("<code>https://example.com</code>")
    as well as three non-default ports ("<code>https://example.com:444</code>",
    "<code>https://example.com:445</code>", and "<code>https://example.com:446</code>").
    This needs to be accomplished while still disabling the use of the Geolocation API
    within all other browsing contexts. It can do this by delivering the following HTTP response header:</p>
<pre><a data-link-type="http-header" href="#permissions-policy-header" id="ref-for-permissions-policy-header④">Permissions-Policy</a>: geolocation=(self "https://example.com" "https://example.com:444" "https://example.com:445" "https://example.com:446")
</pre>
     <p>This works, but if SecureCorp Inc. feels safe delegating to any ports on
    "<code>https://example.com</code>" the HTTP response header could instead be:</p>
<pre><a data-link-type="http-header" href="#permissions-policy-header" id="ref-for-permissions-policy-header⑤">Permissions-Policy</a>: geolocation=(self "https://example.com:*")
</pre>
     <p>Not only would the above header permit "<code>https://example.com:444</code>",
    "<code>https://example.com:444</code>", and "<code>https://example.com:445</code>"
    to use the Geolocation API, but any other ports on "<code>https://example.com</code>"
    could use it too.</p>
    </div>
    <div class="example" id="example-00a4d135">
     <a class="self-link" href="#example-00a4d135"></a> 
     <p>JSPlaygroundCorp Inc. wants to host user-generated web applications, but wants the
    browser to manage their permissions to use <a data-link-type="dfn" href="https://w3c.github.io/permissions/#dfn-powerful-feature" id="ref-for-dfn-powerful-feature">powerful features</a> in isolation of each other.
    This can be accomplished by creating discrete subdomains for each piece of web-content
    or web-content creator, and navigating them as top-level documents (framework and
    user-content can still be separated using same-origin iframes).</p>
     <p>This is necessary since users grant permissions to the domain they perceive they
    are interacting with in the browser, which is the top-level domain.</p>
     <p>JSPlaygroundCorp should avoid iframing user-generated web applications using the <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-allow" id="ref-for-attr-iframe-allow">allow</a></code> attribute from its own domain in this case, as this would grant
    its domain permissions to all of them.</p>
    </div>
    <div class="example" id="example-b2a3a013">
     <a class="self-link" href="#example-b2a3a013"></a> 
     <p>PlatformCorp Inc. wants to offer a marketplace of embeddable third-party
    components to build from or games to play under its top-level domain. It wants to
    delegate the use of <a data-link-type="dfn" href="https://w3c.github.io/permissions/#dfn-powerful-feature" id="ref-for-dfn-powerful-feature①">powerful features</a> like the <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/mediacapture-main/#dom-mediadevices-getusermedia" id="ref-for-dom-mediadevices-getusermedia">getUserMedia()</a></code> API responsibly. It accepts responsibility for tracking which of its component
    applications need a feature, using bespoke "install" UX to keep end-users in
    charge.</p>
     <p>Camera and microphone are disabled by default in all cross-origin frames.
    Each third-party component has a subdomain, and can be embedded in a
    cross-origin iframe. PlatformCorp can use the <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-allow" id="ref-for-attr-iframe-allow①">allow</a></code> attribute on
    the <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element" id="ref-for-the-iframe-element">iframe</a></code> element to control whether to delegate camera or microphone
    access or not to each subdomain.</p>
     <p>An iframe where the component "app1" should have camera access, "app2" should
    have microphone access, and "app3" should have both might look like this:</p>
<pre>&lt;iframe
  allow="camera https://app1.site.com https://app3.site.com;
         microphone https://app2.site.com https://app3.site.com"
  src="https://doc1.site.com"
  sandbox="allow-same-origin allow-scripts">
&lt;/iframe>
</pre>
     <p>Iframe attributes can selectively enable features in certain frames, and
    not in others, even if those contain documents from the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#same-origin" id="ref-for-same-origin">same origin</a>.
    The list of sandbox tokens might be longer in practice.</p>
     <p>Since browsers generally ask users to grant permissions to the top-level
    domain, there might not be any additional permission prompt for the
    components to request camera or microphone access if the user already
    trusts PlatformCorp.</p>
    </div>
   </section>
   <section>
    <h2 class="heading settled" data-level="3" id="other-and-related-mechanisms"><span class="secno">3. </span><span class="content">Other and related mechanisms</span><a class="self-link" href="#other-and-related-mechanisms"></a></h2>
    <p><a data-link-type="biblio" href="#biblio-html5" title="HTML5">[HTML5]</a> defines a <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-sandbox" id="ref-for-attr-iframe-sandbox">sandbox</a></code> attribute for <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element" id="ref-for-the-iframe-element①">iframe</a></code> elements
  that allows developers to reduce the risk of including potentially untrusted
  content by imposing restrictions on content’s abilities - e.g. prevent it
  from submitting forms, running scripts and plugins, and more. The <a data-link-type="dfn" href="https://w3c.github.io/webappsec-csp/#sandbox" id="ref-for-sandbox">sandbox</a> directive defined by <a data-link-type="biblio" href="#biblio-csp2" title="Content Security Policy Level 2">[CSP2]</a> extends this capability to any
  resource, framed or not, to ask for the same set of restrictions - e.g. via an
  HTTP response header (<code>Content-Security-Policy: sandbox</code>). These
  mechanisms enable the developer to:</p>
    <ul>
     <li>Set and customize a sandbox policy on any resource via CSP.
     <li>Set and customize individual sandbox policies on each <code>iframe</code> element within their application.
    </ul>
    <p>However, there are several limitations to the above mechanism: the
  developer cannot automatically apply a policy across all contexts, which
  makes it hard or impossible to enforce consistently in some cases (e.g. due
  to third-party content injecting frames, which the developer does not
  control); there is no mechanism to selectively enable features that may be
  off by default; the sandbox mechanism automatically disables all sandbox
  features, and requires the developer to opt back in to each of them, so it is
  impossible to extend the set of sandbox features without significant
  compatibility risk.</p>
    <p>Permissions Policy is intended to be used in combination with the sandbox
  mechanism (i.e. it does not duplicate feature controls already covered by
  sandbox), and provides an extensible mechanism that addresses the above
  limitations.</p>
   </section>
   <section>
    <h2 class="heading settled" data-level="4" id="framework"><span class="secno">4. </span><span class="content">Framework</span><a class="self-link" href="#framework"></a></h2>
    <section>
     <h3 class="heading settled" data-level="4.1" id="features"><span class="secno">4.1. </span><span class="content">Policy-controlled Features</span><a class="self-link" href="#features"></a></h3>
     <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="policy-controlled-feature">policy-controlled feature</dfn> is an
    API or behaviour which can be enabled or disabled in a document by referring
    to it in a <a data-link-type="dfn" href="#permissions-policy" id="ref-for-permissions-policy">permissions policy</a>.</p>
     <div class="note" role="note">For brevity, policy-controlled features will often be
    referred to in this document simply as "Features". Unless otherwise
    indicated, the term "feature" refers to <a data-link-type="dfn" href="#policy-controlled-feature" id="ref-for-policy-controlled-feature">policy-controlled features</a>.
    Other specifications, defining such features, should use the longer term to
    avoid any ambiguity.</div>
     <div class="issue" id="issue-4ecdbcc2"><a class="self-link" href="#issue-4ecdbcc2"></a>This spec currently only deals with features defined in
    Documents. We should figure out how to word this to include the possibility
    of features and permissions policies in Workers and Worklets as well.</div>
     <p><a data-link-type="dfn" href="#policy-controlled-feature" id="ref-for-policy-controlled-feature①">Policy-controlled features</a> are identified by <dfn class="dfn-paneled" data-dfn-for="policy-controlled-feature" data-dfn-type="dfn" data-export id="policy-controlled-feature-tokens">tokens</dfn>, which are character strings
    used in <a data-link-type="dfn" href="#policy-directive" id="ref-for-policy-directive">policy directives</a>.</p>
     <p>Each <a data-link-type="dfn" href="#policy-controlled-feature" id="ref-for-policy-controlled-feature②">policy-controlled feature</a> has a <a data-link-type="dfn" href="#policy-controlled-feature-default-allowlist" id="ref-for-policy-controlled-feature-default-allowlist">default allowlist</a>,
    which defines whether that feature is available in documents in top-level
    traversables, and how access to that feature is inherited in child
    navigables.</p>
     <p>A user agent has a set of <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="supported-features">supported features</dfn>, which is the set
    of <a data-link-type="dfn" href="#policy-controlled-feature" id="ref-for-policy-controlled-feature③">features</a> which it allows to be
    controlled through policies. User agents are not required to support every <a data-link-type="dfn" href="#policy-controlled-feature" id="ref-for-policy-controlled-feature④">feature</a>.</p>
     <div class="note" role="note"> The <a data-link-type="dfn" href="#policy-controlled-feature" id="ref-for-policy-controlled-feature⑤">policy-controlled features</a> themselves are not themselves part
      of this framework. A non-normative list of currently-defined features is
      maintained as a <a href="https://github.com/w3c/webappsec-permissions-policy/blob/master/features.md">companion
      document</a> alongside this specification. </div>
    </section>
    <section>
     <h3 class="heading settled" data-level="4.2" id="policies"><span class="secno">4.2. </span><span class="content">Policies</span><a class="self-link" href="#policies"></a></h3>
     <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="declared-policy">declared policy</dfn> is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#struct" id="ref-for-struct">struct</a> with the following <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#struct-item" id="ref-for-struct-item">items</a>:</p>
     <dl>
      <dt data-md><dfn class="dfn-paneled" data-dfn-for="declared policy" data-dfn-type="dfn" data-noexport id="declared-policy-declarations">declarations</dfn>
      <dd data-md>
       <p>an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map">ordered map</a> from <a data-link-type="dfn" href="#policy-controlled-feature" id="ref-for-policy-controlled-feature⑥">features</a> to <a data-link-type="dfn" href="#allowlist" id="ref-for-allowlist②">allowlists</a></p>
      <dt data-md><dfn class="dfn-paneled" data-dfn-for="declared policy" data-dfn-type="dfn" data-noexport id="declared-policy-reporting-configuration">reporting configuration</dfn>
      <dd data-md>
       <p>an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map①">ordered map</a> from <a data-link-type="dfn" href="#policy-controlled-feature" id="ref-for-policy-controlled-feature⑦">features</a> to <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-string">strings</a></p>
     </dl>
     <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="permissions-policy">permissions policy</dfn> is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#struct" id="ref-for-struct①">struct</a> with the following <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#struct-item" id="ref-for-struct-item①">items</a>:</p>
     <dl>
      <dt data-md><dfn class="dfn-paneled" data-dfn-for="permissions policy" data-dfn-type="dfn" data-noexport id="permissions-policy-inherited-policy">inherited policy</dfn>
      <dd data-md>
       <p>an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map②">ordered map</a> from <a data-link-type="dfn" href="#policy-controlled-feature" id="ref-for-policy-controlled-feature⑧">features</a> to "<code>Enabled</code>" or "<code>Disabled</code>"</p>
      <dt data-md><dfn class="dfn-paneled" data-dfn-for="permissions policy" data-dfn-type="dfn" data-noexport id="permissions-policy-declared-policy">declared policy</dfn>
      <dd data-md>
       <p>a <a data-link-type="dfn" href="#declared-policy" id="ref-for-declared-policy">declared policy</a></p>
     </dl>
     <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="empty-permissions-policy">empty permissions policy</dfn> is a <a data-link-type="dfn" href="#permissions-policy" id="ref-for-permissions-policy①">permissions
    policy</a> that has an <a data-link-type="dfn" href="#permissions-policy-inherited-policy" id="ref-for-permissions-policy-inherited-policy">inherited policy</a> which
    contains "<code>Enabled</code>" for every <a data-link-type="dfn" href="#supported-features" id="ref-for-supported-features">supported feature</a>, a <a data-link-type="dfn" href="#permissions-policy-declared-policy" id="ref-for-permissions-policy-declared-policy">declared policy</a> whose <a data-link-type="dfn" href="#declared-policy-declarations" id="ref-for-declared-policy-declarations">declarations</a> and <a data-link-type="dfn" href="#declared-policy-reporting-configuration" id="ref-for-declared-policy-reporting-configuration">reporting configuration</a> are
    both empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map③">ordered maps</a>.</p>
    </section>
    <section>
     <h3 class="heading settled" data-level="4.3" id="inherited-policies"><span class="secno">4.3. </span><span class="content">Inherited policies</span><a class="self-link" href="#inherited-policies"></a></h3>
     <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="inherited-policy-for-a-feature">inherited policy for a feature</dfn> <var>feature</var> is the value in the <a data-link-type="dfn" href="#permissions-policy-inherited-policy" id="ref-for-permissions-policy-inherited-policy①">inherited policy</a> whose
    key is <var>feature</var>. After a <a data-link-type="dfn" href="#permissions-policy" id="ref-for-permissions-policy②">permissions policy</a> has been
    initialized, its <a data-link-type="dfn" href="#permissions-policy-inherited-policy" id="ref-for-permissions-policy-inherited-policy②">inherited policy</a> will
    contain a value for each <a data-link-type="dfn" href="#supported-features" id="ref-for-supported-features①">supported feature</a>.</p>
     <div class="note" role="note">
      <p>Upon both creation and navigation, Each <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document">Document</a></code> inherits a set of
    policies from its parent frame, or in the case of the <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document①">Document</a></code> in a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-traversable" id="ref-for-top-level-traversable">top-level traversable</a>, from the defined defaults for each <a data-link-type="dfn" href="#policy-controlled-feature" id="ref-for-policy-controlled-feature⑨">policy-controlled feature</a>. This inherited policy determines the
    initial state ("<code>Enabled</code>" or "<code>Disabled</code>") of each
    feature, and whether it can be controlled by a <a data-link-type="dfn" href="#permissions-policy-declared-policy" id="ref-for-permissions-policy-declared-policy①">declared policy</a> in the <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document②">Document</a></code>.</p>
      <p>In a <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document③">Document</a></code> in a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-traversable" id="ref-for-top-level-traversable①">top-level traversable</a>, the inherited
    policy is based on defined defaults for each feature.</p>
      <p>In a <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document④">Document</a></code> in a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#child-navigable" id="ref-for-child-navigable">child navigable</a>, the inherited policy is based
    on the parent document’s permissions policy, as well as the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#child-navigable" id="ref-for-child-navigable①">child
    navigable</a>'s <a data-link-type="dfn" href="#container-policy" id="ref-for-container-policy">container policy</a>.</p>
     </div>
    </section>
    <section>
     <h3 class="heading settled" data-level="4.4" id="header-policies"><span class="secno">4.4. </span><span class="content">Header policies</span><a class="self-link" href="#header-policies"></a></h3>
     <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="header-policy">header policy</dfn> is a list of <a data-link-type="dfn" href="#policy-directive" id="ref-for-policy-directive①">policy directives</a> delivered via an HTTP header with a document. This forms the document’s <a data-link-type="dfn" href="#permissions-policy" id="ref-for-permissions-policy③">permissions policy</a>’s <a data-link-type="dfn" href="#permissions-policy-declared-policy" id="ref-for-permissions-policy-declared-policy②">declared
    policy</a>.</p>
    </section>
    <section>
     <h3 class="heading settled" data-level="4.5" id="container-policies"><span class="secno">4.5. </span><span class="content">Container policies</span><a class="self-link" href="#container-policies"></a></h3>
     <p>In addition to the <a data-link-type="dfn" href="#header-policy" id="ref-for-header-policy">header policy</a>, each <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#child-navigable" id="ref-for-child-navigable②">child navigable</a> has a <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="container-policy">container policy</dfn>, which is a <a data-link-type="dfn" href="#policy-directive" id="ref-for-policy-directive②">policy directive</a>,
    which may be empty. The <a data-link-type="dfn" href="#container-policy" id="ref-for-container-policy①">container policy</a> can be set by attributes on
    the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#navigable-container" id="ref-for-navigable-container">navigable container</a>.</p>
     <p>The <a data-link-type="dfn" href="#container-policy" id="ref-for-container-policy②">container policy</a> for a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#child-navigable" id="ref-for-child-navigable③">child navigable</a> influences the <a data-link-type="dfn" href="#permissions-policy-inherited-policy" id="ref-for-permissions-policy-inherited-policy③">inherited policy</a> of any <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document⑤">Document</a></code> loaded into
    that navigable. (See <a href="#algo-define-inherited-policy-in-container">§ 9.7 Define an inherited policy for feature in container at origin</a>).</p>
     <div class="note" role="note"> Currently, the <a data-link-type="dfn" href="#container-policy" id="ref-for-container-policy③">container policy</a> cannot be set directly, but is
      indirectly set by the <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element" id="ref-for-the-iframe-element②">iframe</a></code> <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-allowfullscreen" id="ref-for-attr-iframe-allowfullscreen">allowfullscreen</a></code>, and <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-allow" id="ref-for-attr-iframe-allow②">allow</a></code> attributes. Future revisions to this spec may introduce a
      mechanism to explicitly declare the full <a data-link-type="dfn" href="#container-policy" id="ref-for-container-policy④">container policy</a>. </div>
    </section>
    <section>
     <h3 class="heading settled" data-level="4.6" id="policy-directives"><span class="secno">4.6. </span><span class="content">Policy directives</span><a class="self-link" href="#policy-directives"></a></h3>
     <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="policy directive|policy directives" data-noexport id="policy-directive">policy
    directive</dfn> is an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map④">ordered map</a>, mapping <a data-link-type="dfn" href="#policy-controlled-feature" id="ref-for-policy-controlled-feature①⓪">policy-controlled
    features</a> to corresponding <a data-link-type="dfn" href="#allowlist" id="ref-for-allowlist③">allowlists</a> of origins.</p>
     <p>A <a data-link-type="dfn" href="#policy-directive" id="ref-for-policy-directive③">policy directive</a> is represented in HTTP headers as the
    serialization of an <a data-link-type="dfn" href="https://datatracker.ietf.org/doc/html/rfc8941#dictionary" id="ref-for-dictionary">sf-dictionary</a> structure, and in HTML attributes
    as its ASCII serialization.</p>
    </section>
    <section>
     <h3 class="heading settled" data-level="4.7" id="allowlists"><span class="secno">4.7. </span><span class="content">Allowlists</span><a class="self-link" href="#allowlists"></a></h3>
     <p>A permissions policy <dfn class="dfn-paneled" data-dfn-type="dfn" data-export data-lt="allowlist|allowlists" id="allowlist">allowlist</dfn> is conceptually a set of <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-origin" id="ref-for-concept-url-origin">origins</a>. An <a data-link-type="dfn" href="#allowlist" id="ref-for-allowlist④">allowlist</a> may be either:</p>
     <ul>
      <li><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="the-special-value">The special value <code>*</code></dfn>, which represents every
      origin, or
      <li>A struct containing:
      <ul>
       <li><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="expressions">expressions</dfn>, which is an ordered set of <a data-link-type="dfn" href="#permissions-source-expression" id="ref-for-permissions-source-expression">permissions-source-expression</a>
       <li><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="self-origin">self-origin</dfn>, which is an <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-origin" id="ref-for-concept-url-origin①">origin</a> or <code>null</code>
       <li><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="src-origin">src-origin</dfn>, which is an <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-origin" id="ref-for-concept-url-origin②">origin</a> or <code>null</code>
      </ul>
     </ul>
     <div class="note" role="note"> The keywords <code>'self'</code>, <code>'src'</code>, and <code>'none'</code> can appear in the text representation of allowlists in
      headers and attribute strings. These keywords are always interpreted in
      context during parsing, and only the origins which they refer to are
      stored in the allowlist. The keywords themselves are not part of the
      allowlist. </div>
     <div class="algorithm" data-algorithm="matches">
      <p>To determine whether an <a data-link-type="dfn" href="#allowlist" id="ref-for-allowlist⑤">allowlist</a> <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="matches">matches</dfn> an origin <var>origin</var>, run these steps:</p>
      <ol>
       <li data-md>
        <p>If the <a data-link-type="dfn" href="#allowlist" id="ref-for-allowlist⑥">allowlist</a> is <a data-link-type="dfn" href="#the-special-value" id="ref-for-the-special-value">the special value <code>*</code></a>,
 then return true.</p>
      </ol>
      <p class="note" role="note"><span class="marker">Note:</span> We are not using the CSP variant of wildcard matching as it requires the HTTPS scheme.</p>
      <ol>
       <li data-md>
        <p>If the <a data-link-type="dfn" href="#allowlist" id="ref-for-allowlist⑦">allowlist</a>’s <a data-link-type="dfn" href="#self-origin" id="ref-for-self-origin">self-origin</a> is not null and it is <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#same-origin-domain" id="ref-for-same-origin-domain">same origin-domain</a> with <var>origin</var>, then return true.</p>
       <li data-md>
        <p>If the <a data-link-type="dfn" href="#allowlist" id="ref-for-allowlist⑧">allowlist</a>’s <a data-link-type="dfn" href="#src-origin" id="ref-for-src-origin">src-origin</a> is not null and it is <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#same-origin-domain" id="ref-for-same-origin-domain①">same origin-domain</a> with <var>origin</var>, then return true.</p>
       <li data-md>
        <p>If <var>origin</var> is an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin-opaque" id="ref-for-concept-origin-opaque">opaque origin</a>, return false.</p>
       <li data-md>
        <p>Let <var>url</var> be the result of calling the <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-parser" id="ref-for-concept-url-parser">url parser</a> on the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#ascii-serialisation-of-an-origin" id="ref-for-ascii-serialisation-of-an-origin">serialization</a> of <var>origin</var>.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate">For each</a> <a data-link-type="dfn" href="#permissions-source-expression" id="ref-for-permissions-source-expression①">permissions-source-expression</a> <var>item</var> in the <a data-link-type="dfn" href="#allowlist" id="ref-for-allowlist⑨">allowlist</a>’s <a data-link-type="dfn" href="#expressions" id="ref-for-expressions">expressions</a>:</p>
        <ol>
         <li data-md>
          <p>If the result of running <a data-link-type="dfn" href="https://w3c.github.io/webappsec-csp/#match-url-to-source-expression" id="ref-for-match-url-to-source-expression">Does url match expression in origin with redirect count?</a> on <var>url</var>, <var>item</var>, <var>origin</var>, and 0 is true then return true.</p>
        </ol>
       <li data-md>
        <p>Return false.</p>
      </ol>
     </div>
    </section>
    <section>
     <h3 class="heading settled" data-level="4.8" id="default-allowlists"><span class="secno">4.8. </span><span class="content">Default Allowlists</span><a class="self-link" href="#default-allowlists"></a></h3>
     <p>Every <a data-link-type="dfn" href="#policy-controlled-feature" id="ref-for-policy-controlled-feature①①">policy-controlled feature</a> has a <dfn class="dfn-paneled" data-dfn-for="policy-controlled feature" data-dfn-type="dfn" data-export data-lt="default allowlist|default allowlists" id="policy-controlled-feature-default-allowlist">default allowlist</dfn>. The <a data-link-type="dfn" href="#policy-controlled-feature-default-allowlist" id="ref-for-policy-controlled-feature-default-allowlist①">default
    allowlist</a> determines whether the feature is allowed in a <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document⑥">Document</a></code> with
    no <a data-link-type="dfn" href="#permissions-policy-declared-policy" id="ref-for-permissions-policy-declared-policy③">declared policy</a> in a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-traversable" id="ref-for-top-level-traversable②">top-level
    traversable</a>, and also whether access to the feature is automatically
    delegated to documents in <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#child-navigable" id="ref-for-child-navigable④">child navigables</a>.</p>
     <p>The <a data-link-type="dfn" href="#policy-controlled-feature-default-allowlist" id="ref-for-policy-controlled-feature-default-allowlist②">default allowlist</a> for a <a data-link-type="dfn" href="#policy-controlled-feature" id="ref-for-policy-controlled-feature①②">feature</a> is one of these values:</p>
     <dl>
      <dt><dfn class="dfn-paneled" data-dfn-for="default allowlist" data-dfn-type="dfn" data-export id="default-allowlist"><code>*</code></dfn>
      <dd>The feature is allowed in <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document⑦">Document</a></code>s in <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-traversable" id="ref-for-top-level-traversable③">top-level
      traversables</a> by default, as well as those in all <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#child-navigable" id="ref-for-child-navigable⑤">child navigables</a>.
      It can be disallowed in <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#child-navigable" id="ref-for-child-navigable⑥">child navigables</a> by explicitly supplying a <a data-link-type="dfn" href="#container-policy" id="ref-for-container-policy⑤">container policy</a> on the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#navigable-container" id="ref-for-navigable-container①">navigable container</a> that overrides this
      default (or in any <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#navigable" id="ref-for-navigable">navigable</a>, by delivering the <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document⑧">Document</a></code> with a
      suitable <a data-link-type="http-header" href="#permissions-policy-header" id="ref-for-permissions-policy-header⑥"><code>Permissions-Policy</code></a> header).
      <dt><dfn class="dfn-paneled" data-dfn-for="default allowlist" data-dfn-type="dfn" data-export id="default-allowlist-self"><code>'self'</code></dfn>
      <dd>The feature is allowed in <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-document" id="ref-for-nav-document">documents</a> in <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-traversable" id="ref-for-top-level-traversable④">top-level traversables</a> by default, as well as those in <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#child-navigable" id="ref-for-child-navigable⑦">child
      navigables</a> whose <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-document" id="ref-for-nav-document①">document</a> is <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#same-origin" id="ref-for-same-origin①">same origin</a> with its <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-parent" id="ref-for-nav-parent">parent</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-document" id="ref-for-nav-document②">document</a>, when allowed in that <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document⑨">Document</a></code>. It is disallowed
      by default in <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#child-navigable" id="ref-for-child-navigable⑧">child navigables</a> whose <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-document" id="ref-for-nav-document③">document</a> is cross-origin with its <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-parent" id="ref-for-nav-parent①">parent</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-document" id="ref-for-nav-document④">document</a>.
     </dl>
    </section>
   </section>
   <section>
    <h2 class="heading settled" data-level="5" id="serialization"><span class="secno">5. </span><span class="content">Permissions Policy Serialization</span><a class="self-link" href="#serialization"></a></h2>
    <section>
     <h3 class="heading settled" data-level="5.1" id="ascii-serialization"><span class="secno">5.1. </span><span class="content">HTML attribute serialization</span><a class="self-link" href="#ascii-serialization"></a></h3>
     <p><a data-link-type="dfn" href="#policy-directive" id="ref-for-policy-directive④">Policy Directives</a> in HTML attributes are represented as their
    ASCII serialization, with the following ABNF:</p>
<pre class="abnf"><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="serialized-permissions-policy">serialized-permissions-policy</dfn> = <a data-link-type="dfn" href="#serialized-policy-directive" id="ref-for-serialized-policy-directive">serialized-policy-directive</a> *(";" <a data-link-type="dfn" href="#serialized-policy-directive" id="ref-for-serialized-policy-directive①">serialized-policy-directive</a>)
<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="serialized-policy-directive">serialized-policy-directive</dfn> = <a data-link-type="dfn" href="#feature-identifier" id="ref-for-feature-identifier">feature-identifier</a> RWS <a data-link-type="dfn" href="#allow-list" id="ref-for-allow-list">allow-list</a>
<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="feature-identifier">feature-identifier</dfn> = 1*( ALPHA / DIGIT / "-")
<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="allow-list">allow-list</dfn> = <a data-link-type="dfn" href="#allow-list-value" id="ref-for-allow-list-value">allow-list-value</a> *(RWS <a data-link-type="dfn" href="#allow-list-value" id="ref-for-allow-list-value①">allow-list-value</a>)
<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="allow-list-value">allow-list-value</dfn> = <a data-link-type="dfn" href="#permissions-source-expression" id="ref-for-permissions-source-expression②">permissions-source-expression</a> / "*" / "'self'" / "'src'" / "'none'"
<dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="permissions-source-expression">permissions-source-expression</dfn> = <a data-link-type="grammar" href="https://w3c.github.io/webappsec-csp/#grammardef-scheme-source" id="ref-for-grammardef-scheme-source">scheme-source</a> / <a data-link-type="grammar" href="https://w3c.github.io/webappsec-csp/#grammardef-host-source" id="ref-for-grammardef-host-source">host-source</a>
</pre>
     <div class="note" role="note"> The string "<code>'self'</code>" may be used as an origin in an <a data-link-type="dfn" href="#allowlist" id="ref-for-allowlist①⓪">allowlist</a>. When it is used in this way, it will refer to the <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document-origin" id="ref-for-concept-document-origin">origin</a> of the <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document①⓪">Document</a></code> which contains the <a data-link-type="dfn" href="#permissions-policy" id="ref-for-permissions-policy④">permissions
      policy</a>. </div>
    </section>
    <section>
     <h3 class="heading settled" data-level="5.2" id="structured-header-serialization"><span class="secno">5.2. </span><span class="content">Structured header serialization</span><a class="self-link" href="#structured-header-serialization"></a></h3>
      <a data-link-type="dfn" href="#policy-directive" id="ref-for-policy-directive⑤">Policy Directives</a> in HTTP headers are represented as Structured
    Fields. <a data-link-type="biblio" href="#biblio-rfc8941" title="Structured Field Values for HTTP">[RFC8941]</a> 
     <p>In this representation, a <a data-link-type="dfn" href="#policy-directive" id="ref-for-policy-directive⑥">policy directive</a> is represented by a
    Dictionary.</p>
     <p>Each Dictionary Member associates a <a data-link-type="dfn" href="#policy-controlled-feature" id="ref-for-policy-controlled-feature①③">feature</a> with an <a data-link-type="dfn" href="#allowlist" id="ref-for-allowlist①①">allowlist</a>.
    The Member Names must be Tokens. If a token does not name one of the user
    agent’s <a data-link-type="dfn" href="#supported-features" id="ref-for-supported-features②">supported features</a>, then the Dictionary Member will be ignored
    by the processing steps.</p>
     <p>The Member Values represent <a data-link-type="dfn" href="#allowlist" id="ref-for-allowlist①②">allowlists</a>, and must be one of:</p>
     <ul>
      <li data-md>
       <p>a String containing the ASCII <a data-link-type="dfn" href="#permissions-source-expression" id="ref-for-permissions-source-expression③">permissions-source-expression</a></p>
      <li data-md>
       <p>the Token <code>*</code></p>
      <li data-md>
       <p>the Token <code>self</code></p>
      <li data-md>
       <p>an Inner List containing zero or more of the above items.</p>
     </ul>
     <p>Member Values may have a Parameter named <code>"report-to"</code>, whose value must be
    a String. Any other parameters will be ignored.</p>
     <p>Any other items inside of an Inner List will be ignored by the processing
    steps, and the Member Value will be processed as if they were not present.
    Member Values of any other form will cause the entire Dictionary Member to
    be ignored by the processing steps.</p>
    </section>
   </section>
   <section>
    <h2 class="heading settled" data-level="6" id="delivery"><span class="secno">6. </span><span class="content">Delivery</span><a class="self-link" href="#delivery"></a></h2>
    <section>
     <h3 class="heading settled" data-level="6.1" id="permissions-policy-http-header-field"><span class="secno">6.1. </span><span class="content">`<code>Permissions-Policy</code>` HTTP Header Field</span><a class="self-link" href="#permissions-policy-http-header-field"></a></h3>
     <p>The `<dfn class="dfn-paneled" data-dfn-type="http-header" data-export id="permissions-policy-header"><code>Permissions-Policy</code></dfn>`
    HTTP header field can be used in the <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response-response" id="ref-for-concept-response-response">response</a> (server to client) to
    communicate the <a data-link-type="dfn" href="#permissions-policy" id="ref-for-permissions-policy⑤">permissions policy</a> that should be enforced by the
    client.</p>
     <p>`<a data-link-type="http-header" href="#permissions-policy-header" id="ref-for-permissions-policy-header⑦"><code>Permissions-Policy</code></a>` is a structured
    header. Its value must be a dictionary. It’s ABNF is:</p>
<pre class="abnf">PermissionsPolicy = <a data-link-type="dfn" href="https://datatracker.ietf.org/doc/html/rfc8941#dictionary" id="ref-for-dictionary①">sf-dictionary</a>
</pre>
     <p>The semantics of the dictionary are defined in <a href="#structured-header-serialization">§ 5.2 Structured header serialization</a>.</p>
     <p>The processing steps are defined in <a href="#algo-construct-policy">§ 9.2 Construct policy from dictionary and origin</a>.</p>
    </section>
    <section>
     <h3 class="heading settled" data-level="6.2" id="iframe-allow-attribute"><span class="secno">6.2. </span><span class="content">The <code>allow</code> attribute of the <code>iframe</code> element</span><a class="self-link" href="#iframe-allow-attribute"></a></h3>
     <p><code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element" id="ref-for-the-iframe-element③">iframe</a></code> elements have an <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-allow" id="ref-for-attr-iframe-allow③">allow</a></code> attribute, which contains an <a href="#serialized-policy-directive" id="ref-for-serialized-policy-directive②">ASCII-serialized policy
    directive</a>.</p>
     <p>The <a data-link-type="dfn" href="#allowlist" id="ref-for-allowlist①③">allowlist</a> for the features named in the attribute may be empty; in
    that case, the default value for the allowlist is <code>'src'</code>, which
    represents the origin of the URL in the iframe’s <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-src" id="ref-for-attr-iframe-src">src</a></code> attribute.</p>
     <p>When not empty, the <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-allow" id="ref-for-attr-iframe-allow④">allow</a></code> attribute will result in adding an <a data-link-type="dfn" href="#allowlist" id="ref-for-allowlist①④">allowlist</a> for each recognized <a data-link-type="dfn" href="#policy-controlled-feature" id="ref-for-policy-controlled-feature①④">feature</a> to the <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element" id="ref-for-the-iframe-element④">iframe</a></code> element’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#content-navigable" id="ref-for-content-navigable">content navigable</a>'s <a data-link-type="dfn" href="#container-policy" id="ref-for-container-policy⑥">container policy</a>, when it is
    constructed.</p>
    </section>
    <section>
     <h3 class="heading settled" data-level="6.3" id="legacy-attributes"><span class="secno">6.3. </span><span class="content">Additional attributes to support legacy features</span><a class="self-link" href="#legacy-attributes"></a></h3>
     <p>Some <a data-link-type="dfn" href="#policy-controlled-feature" id="ref-for-policy-controlled-feature①⑤">features</a> controlled by
    Permissions Policy have existing iframe attributes defined. This
    specification redefines these attributes to influence the <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element" id="ref-for-the-iframe-element⑤">iframe</a></code>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#content-navigable" id="ref-for-content-navigable①">content navigable</a>'s <a data-link-type="dfn" href="#container-policy" id="ref-for-container-policy⑦">container policy</a>.</p>
     <section>
      <h4 class="heading settled" data-level="6.3.1" id="iframe-allowfullscreen-attribute"><span class="secno">6.3.1. </span><span class="content">allowfullscreen</span><a class="self-link" href="#iframe-allowfullscreen-attribute"></a></h4>
      <p>The <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-allowfullscreen" id="ref-for-attr-iframe-allowfullscreen①">allowfullscreen</a></code> <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element" id="ref-for-the-iframe-element⑥">iframe</a></code> attribute controls access to <code class="idl"><a data-link-type="idl" href="https://fullscreen.spec.whatwg.org/#dom-element-requestfullscreen" id="ref-for-dom-element-requestfullscreen">requestFullscreen()</a></code>.</p>
      <p>If the iframe element has an <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-allow" id="ref-for-attr-iframe-allow⑤">allow</a></code> attribute whose value
      contains the token "<code>fullscreen</code>", then the <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-allowfullscreen" id="ref-for-attr-iframe-allowfullscreen②">allowfullscreen</a></code> attribute must have no effect.</p>
      <p>Otherwise, the presence of an <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-allowfullscreen" id="ref-for-attr-iframe-allowfullscreen③">allowfullscreen</a></code> attribute
      on an <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element" id="ref-for-the-iframe-element⑦">iframe</a></code> will result in adding an <a data-link-type="dfn" href="#allowlist" id="ref-for-allowlist①⑤">allowlist</a> of <code>*</code> for the "<code>fullscreen</code>" feature to the <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element" id="ref-for-the-iframe-element⑧">iframe</a></code> element’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#content-navigable" id="ref-for-content-navigable②">content navigable</a>'s <a data-link-type="dfn" href="#container-policy" id="ref-for-container-policy⑧">container policy</a>, when
      it is constructed.</p>
      <div class="note" role="note"> This is different from the behaviour of <code>&lt;iframe
        allow="fullscreen"></code>, and is for compatibility with existing
        uses of <code>allowfullscreen</code>. If <code>allow="fullscreen"</code> and <code>allowfullscreen</code> are
        both present on an iframe element, then the more restrictive allowlist
        of <code>allow="fullscreen"</code> will be used. </div>
     </section>
    </section>
   </section>
   <section>
    <h2 class="heading settled" data-level="7" id="introspection"><span class="secno">7. </span><span class="content">Policy Introspection from Scripts</span><a class="self-link" href="#introspection"></a></h2>
    <section class="non-normative">
     <h3 class="heading settled" data-level="7.1" id="introspection-overview"><span class="secno">7.1. </span><span class="content">Overview</span><a class="self-link" href="#introspection-overview"></a></h3>
     <p>The current policy which is in effect in a document can be observed by
  scripts. This can be used to make decisions, for instance, about what user
  interface to display, in cases where it is not possible to determine otherwise
  whether a feature is enabled or not. (Some features may not have any
  observable failure mode, or may have unwanted side effects to feature
  detection.)</p>
     <p>Documents and iframes both provide a <code class="idl"><a data-link-type="idl" href="#permissionspolicy" id="ref-for-permissionspolicy">PermissionsPolicy</a></code> object which can
  be used to inspect the permissions policies which apply to them.</p>
     <h4 class="heading settled" data-level="7.1.1" id="document-policies"><span class="secno">7.1.1. </span><span class="content">Document policies</span><a class="self-link" href="#document-policies"></a></h4>
     <p>To retreive the currently effective policy, use <code>document.permissionsPolicy</code>. This returns a <code class="idl"><a data-link-type="idl" href="#permissionspolicy" id="ref-for-permissionspolicy①">PermissionsPolicy</a></code> object, which can be used to:</p>
     <ul>
      <li data-md>
       <p>query the state (allowed or denied) in the current document for a given
  feature,</p>
      <li data-md>
       <p>get a list of all available features (allowed or not) in the current
  document,</p>
      <li data-md>
       <p>get a list of all allowed features in the current document, or</p>
      <li data-md>
       <p>get the allowlist for a given feature in the current document.</p>
     </ul>
     <div class="example" id="example-39a985d5">
      <a class="self-link" href="#example-39a985d5"></a> 
<pre>&lt;!doctype html>
&lt;script>
 const policy = document.permissionsPolicy;

 // This will be true if this document can use WebUSB.
 const can_use_usb = policy.allowsFeature('usb');

 // True if a new frame at https://example.com will be allowed to use WebXR.
 if (policy.allowsFeature('xr-spatial-tracking', 'https://example.com')) {
   // Show UI to create frame at https://example.com.
 } else {
   // Show an alternative UI.
 }

 // Get the list of origins which are allowed to request payment. The result
 // will be a list of explicit origins, or the single element ['*'] if all
 // origins are allowed.
 const allowed_payment_origins = policy.getAllowlistForFeature('payment');

 // Get the list of all features supported in this document (even those
 // which are not allowed). The result will be an array of strings, each
 // representing a feature.
 const all_features = policy.features();
 if (all_features.includes('geolocation')) {
   // Append a child frame to a third-party map service.
 }
&lt;/script>
</pre>
     </div>
     <h4 class="heading settled" data-level="7.1.2" id="frame-policies"><span class="secno">7.1.2. </span><span class="content">Frame policies</span><a class="self-link" href="#frame-policies"></a></h4>
     <p>It is also possible to inspect the policy on an iframe element, from the
  document which contains it. The policy object in this case represents the <a data-link-type="dfn" href="#observable-policy" id="ref-for-observable-policy">observable policy</a> for the frame, which depends only on the current
  document and the attributes of the iframe element. It does not reveal whether
  a feature is actually currently allowed in the frame, as the document in the
  frame may have applied its own policy via an HTTP header, or may have
  navigated away from its initial location to a new origin. Revealing the
  effective policy in the iframe element’s nested navigable in that case could
  leak information about the behaviour of a cross-origin document.</p>
     <div class="example" id="example-281dfdaa">
      <a class="self-link" href="#example-281dfdaa"></a> 
<pre>&lt;!doctype html>
&lt;iframe id="frame" allow="fullscreen; xr-spatial-tracking">&lt;/iframe>
&lt;script>
 const iframe_element = document.getElementById("frame");
 const iframe_policy = iframe_element.permissionsPolicy;

 // True if the framed document will be allowed to use WebXR
 if (iframe_policy.allowsFeature('xr-spatial-tracking')) {
  // display virtual reality controls
 }
&lt;/script>
</pre>
     </div>
     <p>The <a data-link-type="dfn" href="#observable-policy" id="ref-for-observable-policy①">observable policy</a> on an iframe element is independent of any
  actual content loaded into the frame (to avoid cross-origin information
  leakage,) or even whether it is in a document tree.</p>
     <div class="example" id="example-92e8a40f">
      <a class="self-link" href="#example-92e8a40f"></a> 
<pre>&lt;!doctype html>
&lt;!-- this frame should not be allowed to use fullscreen when the document
    in its src attribute is loaded in it -->
&lt;iframe id="frame" allow="fullscreen https://example.com" src="https://example.net/" >&lt;/iframe>
&lt;script>
 const iframe_element = document.getElementById("frame");
 const iframe_policy = iframe_element.permissionsPolicy;
 // This will be false, as the URL listed in the src attribute is not allowed
 // by policy to use fullscreen.
 const is_fullscreen_allowed_in_frame = iframe_policy.allowsFeature('fullscreen');

 const new_frame = document.createElement('iframe');
 new_frame.allow = 'sync-xhr';
 // This will be true, as the iframe is allowed to use sync-xhr at whatever URL is
 // mentioned in its src attribute, even though that attribute is not yet set.
 const is_sync_xhr_allowed = new_frame.permissionsPolicy.allowsFeature('sync-xhr');
&lt;/script>
</pre>
     </div>
    </section>
    <section>
     <h3 class="heading settled" data-level="7.2" id="the-policy-object"><span class="secno">7.2. </span><span class="content">The permissionsPolicy object</span><a class="self-link" href="#the-policy-object"></a></h3>
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="permissionspolicy"><code><c- g>PermissionsPolicy</c-></code></dfn> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionsPolicy" data-dfn-type="method" data-export data-lt="allowsFeature(feature, origin)|allowsFeature(feature)" id="dom-permissionspolicy-allowsfeature"><code><c- g>allowsFeature</c-></code></dfn>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionsPolicy/allowsFeature(feature, origin), PermissionsPolicy/allowsFeature(feature)" data-dfn-type="argument" data-export id="dom-permissionspolicy-allowsfeature-feature-origin-feature"><code><c- g>feature</c-></code></dfn>, <c- b>optional</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString①"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionsPolicy/allowsFeature(feature, origin), PermissionsPolicy/allowsFeature(feature)" data-dfn-type="argument" data-export id="dom-permissionspolicy-allowsfeature-feature-origin-origin"><code><c- g>origin</c-></code></dfn>);
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString②"><c- b>DOMString</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionsPolicy" data-dfn-type="method" data-export data-lt="features()" id="dom-permissionspolicy-features"><code><c- g>features</c-></code></dfn>();
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence①"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString③"><c- b>DOMString</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionsPolicy" data-dfn-type="method" data-export data-lt="allowedFeatures()" id="dom-permissionspolicy-allowedfeatures"><code><c- g>allowedFeatures</c-></code></dfn>();
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence②"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString④"><c- b>DOMString</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionsPolicy" data-dfn-type="method" data-export data-lt="getAllowlistForFeature(feature)" id="dom-permissionspolicy-getallowlistforfeature"><code><c- g>getAllowlistForFeature</c-></code></dfn>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString⑤"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionsPolicy/getAllowlistForFeature(feature)" data-dfn-type="argument" data-export id="dom-permissionspolicy-getallowlistforfeature-feature-feature"><code><c- g>feature</c-></code></dfn>);
};

<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://dom.spec.whatwg.org/#document" id="ref-for-document①①"><c- g>Document</c-></a> {
    [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SameObject" id="ref-for-SameObject"><c- g>SameObject</c-></a>] <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#permissionspolicy" id="ref-for-permissionspolicy②"><c- n>PermissionsPolicy</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Document" data-dfn-type="attribute" data-export data-readonly data-type="PermissionsPolicy" id="dom-document-permissionspolicy"><code><c- g>permissionsPolicy</c-></code></dfn>;
};

<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#htmliframeelement" id="ref-for-htmliframeelement"><c- g>HTMLIFrameElement</c-></a> {
    [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SameObject" id="ref-for-SameObject①"><c- g>SameObject</c-></a>] <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#permissionspolicy" id="ref-for-permissionspolicy③"><c- n>PermissionsPolicy</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="HTMLIFrameElement" data-dfn-type="attribute" data-export data-readonly data-type="PermissionsPolicy" id="dom-htmliframeelement-permissionspolicy"><code><c- g>permissionsPolicy</c-></code></dfn>;
};
</pre>
     <p>A <code class="idl"><a data-link-type="idl" href="#permissionspolicy" id="ref-for-permissionspolicy④">PermissionsPolicy</a></code> object has an <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="associated-node">associated node</dfn>, which
    is a <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#node" id="ref-for-node">Node</a></code>. The <a data-link-type="dfn" href="#associated-node" id="ref-for-associated-node">associated node</a> is set when the <code class="idl"><a data-link-type="idl" href="#permissionspolicy" id="ref-for-permissionspolicy⑤">PermissionsPolicy</a></code> object is created.</p>
     <p>A <code class="idl"><a data-link-type="idl" href="#permissionspolicy" id="ref-for-permissionspolicy⑥">PermissionsPolicy</a></code> object has a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="default-origin">default origin</dfn>, which is
    an <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-origin" id="ref-for-concept-url-origin③">origin</a>, whose value depends on the state of the <code class="idl"><a data-link-type="idl" href="#permissionspolicy" id="ref-for-permissionspolicy⑦">PermissionsPolicy</a></code> object’s <a data-link-type="dfn" href="#associated-node" id="ref-for-associated-node①">associated node</a>:</p>
     <ul>
      <li data-md>
       <p>If the <code class="idl"><a data-link-type="idl" href="#permissionspolicy" id="ref-for-permissionspolicy⑧">PermissionsPolicy</a></code> object’s <a data-link-type="dfn" href="#associated-node" id="ref-for-associated-node②">associated node</a> is a <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document①②">Document</a></code>, then its <a data-link-type="dfn" href="#default-origin" id="ref-for-default-origin">default origin</a> is the <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document①③">Document</a></code>'s <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-origin" id="ref-for-concept-url-origin④">origin</a>.</p>
      <li data-md>
       <p>If the <code class="idl"><a data-link-type="idl" href="#permissionspolicy" id="ref-for-permissionspolicy⑨">PermissionsPolicy</a></code> object’s <a data-link-type="dfn" href="#associated-node" id="ref-for-associated-node③">associated node</a> is an <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element">Element</a></code>, then its <a data-link-type="dfn" href="#default-origin" id="ref-for-default-origin①">default origin</a> is the <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element①">Element</a></code>'s <a data-link-type="dfn" href="#declared-origin" id="ref-for-declared-origin">declared origin</a>.</p>
     </ul>
     <p>Each <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document①④">Document</a></code> has a <dfn class="dfn-paneled" data-dfn-for="Document" data-dfn-type="dfn" data-noexport id="document-policy-object">policy object</dfn>, which is
    a <code class="idl"><a data-link-type="idl" href="#permissionspolicy" id="ref-for-permissionspolicy①⓪">PermissionsPolicy</a></code> instance whose <a data-link-type="dfn" href="#associated-node" id="ref-for-associated-node④">associated node</a> is that <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document①⑤">Document</a></code>.</p>
     <p>A <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document①⑥">Document</a></code>'s <code class="idl"><a data-link-type="idl" href="#dom-document-permissionspolicy" id="ref-for-dom-document-permissionspolicy">permissionsPolicy</a></code> IDL attribute, on
    getting, must return the <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document①⑦">Document</a></code>'s <a data-link-type="dfn" href="#document-policy-object" id="ref-for-document-policy-object">policy object</a>.</p>
     <p>Each <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element" id="ref-for-the-iframe-element⑨">iframe</a></code> element has a <dfn class="dfn-paneled" data-dfn-for="iframe" data-dfn-type="dfn" data-noexport id="iframe-policy-object">policy object</dfn>,
    which is a <code class="idl"><a data-link-type="idl" href="#permissionspolicy" id="ref-for-permissionspolicy①①">PermissionsPolicy</a></code> instance whose <a data-link-type="dfn" href="#associated-node" id="ref-for-associated-node⑤">associated node</a> is
    that element.</p>
     <p>An <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element" id="ref-for-the-iframe-element①⓪">iframe</a></code>'s <code class="idl"><a data-link-type="idl" href="#dom-htmliframeelement-permissionspolicy" id="ref-for-dom-htmliframeelement-permissionspolicy">permissionsPolicy</a></code> IDL attribute, on
    getting, must return the <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element" id="ref-for-the-iframe-element①①">iframe</a></code>'s <a data-link-type="dfn" href="#iframe-policy-object" id="ref-for-iframe-policy-object">policy object</a>.</p>
     <p>The <code class="idl"><a data-link-type="idl" href="#dom-permissionspolicy-allowsfeature" id="ref-for-dom-permissionspolicy-allowsfeature">allowsFeature(feature, origin)</a></code> method must run the following
    steps:</p>
     <ol>
      <li data-md>
       <p>If <var>origin</var> is omitted, set <var>origin</var> to this <code class="idl"><a data-link-type="idl" href="#permissionspolicy" id="ref-for-permissionspolicy①②">PermissionsPolicy</a></code> object’s <a data-link-type="dfn" href="#default-origin" id="ref-for-default-origin②">default origin</a>.</p>
      <li data-md>
       <p>Let <var>policy</var> be the <a data-link-type="dfn" href="#observable-policy" id="ref-for-observable-policy②">observable policy</a> for this <code class="idl"><a data-link-type="idl" href="#permissionspolicy" id="ref-for-permissionspolicy①③">PermissionsPolicy</a></code> object’s <a data-link-type="dfn" href="#associated-node" id="ref-for-associated-node⑥">associated node</a>.</p>
      <li data-md>
       <p>If <var>feature</var> is allowed by <var>policy</var> for <var>origin</var>, return true.</p>
      <li data-md>
       <p>Otherwise, return false.</p>
     </ol>
     <p>The <code class="idl"><a data-link-type="idl" href="#dom-permissionspolicy-features" id="ref-for-dom-permissionspolicy-features">features()</a></code> method must run the following steps:</p>
     <ol>
      <li data-md>
       <p>Set <var>result</var> to an empty ordered set.</p>
      <li data-md>
       <p>For each <a data-link-type="dfn" href="#supported-features" id="ref-for-supported-features③">supported feature</a> <var>feature</var>:</p>
       <ol>
        <li data-md>
         <p>Append <var>feature</var> to <var>result</var>.</p>
       </ol>
      <li data-md>
       <p>return result</p>
     </ol>
     <p>The <code class="idl"><a data-link-type="idl" href="#dom-permissionspolicy-allowedfeatures" id="ref-for-dom-permissionspolicy-allowedfeatures">allowedFeatures()</a></code> method must run the following steps:</p>
     <ol>
      <li data-md>
       <p>Set <var>result</var> to an empty ordered set.</p>
      <li data-md>
       <p>Let <var>origin</var> be this <code class="idl"><a data-link-type="idl" href="#permissionspolicy" id="ref-for-permissionspolicy①④">PermissionsPolicy</a></code> object’s <a data-link-type="dfn" href="#default-origin" id="ref-for-default-origin③">default
  origin</a>.</p>
      <li data-md>
       <p>Let <var>policy</var> be the <a data-link-type="dfn" href="#observable-policy" id="ref-for-observable-policy③">observable policy</a> for this <code class="idl"><a data-link-type="idl" href="#permissionspolicy" id="ref-for-permissionspolicy①⑤">PermissionsPolicy</a></code> object’s <a data-link-type="dfn" href="#associated-node" id="ref-for-associated-node⑦">associated node</a>.</p>
      <li data-md>
       <p>For each <a data-link-type="dfn" href="#supported-features" id="ref-for-supported-features④">supported feature</a> <var>feature</var>:</p>
       <ol>
        <li data-md>
         <p>If <var>feature</var> is allowed by <var>policy</var> for <var>origin</var>, append <var>feature</var> to <var>result</var>.</p>
       </ol>
      <li data-md>
       <p>return result</p>
     </ol>
     <p>The <code class="idl"><a data-link-type="idl" href="#dom-permissionspolicy-getallowlistforfeature" id="ref-for-dom-permissionspolicy-getallowlistforfeature">getAllowlistForFeature(feature)</a></code> method must run the following
    steps:</p>
     <ol>
      <li data-md>
       <p>Set <var>result</var> to an empty list.</p>
      <li data-md>
       <p>Let <var>origin</var> be this <code class="idl"><a data-link-type="idl" href="#permissionspolicy" id="ref-for-permissionspolicy①⑥">PermissionsPolicy</a></code> object’s <a data-link-type="dfn" href="#default-origin" id="ref-for-default-origin④">default
 origin</a>.</p>
      <li data-md>
       <p>Let <var>policy</var> be the <a data-link-type="dfn" href="#observable-policy" id="ref-for-observable-policy④">observable policy</a> for this <code class="idl"><a data-link-type="idl" href="#permissionspolicy" id="ref-for-permissionspolicy①⑦">PermissionsPolicy</a></code> object’s <a data-link-type="dfn" href="#associated-node" id="ref-for-associated-node⑧">associated node</a>.</p>
      <li data-md>
       <p>If <var>feature</var> is not allowed in <var>policy</var> for <var>origin</var>, return <var>result</var></p>
      <li data-md>
       <p>Let <var>allowlist</var> be <var>policy</var>’s <a data-link-type="dfn" href="#declared-policy" id="ref-for-declared-policy①">declared policy</a>[<var>feature</var>]'s <a data-link-type="dfn" href="#declared-policy-declarations" id="ref-for-declared-policy-declarations①">declarations</a>.</p>
      <li data-md>
       <p>If <var>allowlist</var> is the special value <code>*</code>:</p>
       <ol>
        <li data-md>
         <p>Append "<code>*</code>" to <var>result</var></p>
        <li data-md>
         <p>Return <var>result</var>.</p>
       </ol>
      <li data-md>
       <p>If the <a data-link-type="dfn" href="#allowlist" id="ref-for-allowlist①⑥">allowlist</a>’s <a data-link-type="dfn" href="#self-origin" id="ref-for-self-origin①">self-origin</a> is not null,
 append the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#ascii-serialisation-of-an-origin" id="ref-for-ascii-serialisation-of-an-origin①">serialization</a> of it to <var>result</var>.</p>
      <li data-md>
       <p>If the <a data-link-type="dfn" href="#allowlist" id="ref-for-allowlist①⑦">allowlist</a>’s <a data-link-type="dfn" href="#src-origin" id="ref-for-src-origin①">src-origin</a> is not null,
 append the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#ascii-serialisation-of-an-origin" id="ref-for-ascii-serialisation-of-an-origin②">serialization</a> of it to <var>result</var>.</p>
      <li data-md>
       <p>Otherwise, for each <a data-link-type="dfn" href="#permissions-source-expression" id="ref-for-permissions-source-expression④">permissions-source-expression</a> <var>item</var> in <var>allowlist</var>’s <a data-link-type="dfn" href="#expressions" id="ref-for-expressions①">expressions</a>:</p>
       <ol>
        <li data-md>
         <p>Append <var>item</var> to <var>result</var></p>
       </ol>
      <li data-md>
       <p>Return <var>result</var>.</p>
     </ol>
     <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="observable-policy">observable policy</dfn> for any Node is a <a data-link-type="dfn" href="#permissions-policy" id="ref-for-permissions-policy⑥">permissions
    policy</a>, which contains the information about the policy in the navigable
    represented by that Node which is visible from the current document.</p>
     <p>To get the <a data-link-type="dfn" href="#observable-policy" id="ref-for-observable-policy⑤">observable policy</a> for a Document <var>document</var>, return <var>document</var>’s permissions policy.</p>
     <p>To get the <a data-link-type="dfn" href="#observable-policy" id="ref-for-observable-policy⑥">observable policy</a> for an Element <var>node</var>, run the
    following steps:</p>
     <ol>
      <li data-md>
       <p>Let <var>inherited policy</var> be an empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map⑤">ordered map</a>.</p>
      <li data-md>
       <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate①">For each</a> <a data-link-type="dfn" href="#supported-features" id="ref-for-supported-features⑤">supported feature</a> <var>feature</var>:</p>
       <ol>
        <li data-md>
         <p>Let <var>isInherited</var> be the result of running <a data-link-type="abstract-op" href="#define-inherited-policy-in-container" id="ref-for-define-inherited-policy-in-container">Define
  an inherited policy for feature in container at origin</a> on <var>feature</var>, <var>node</var> and <var>node</var>’s <a data-link-type="dfn" href="#declared-origin" id="ref-for-declared-origin①">declared origin</a>.</p>
        <li data-md>
         <p>Set <var>inherited policy</var>[<var>feature</var>] to <var>isInherited</var>.</p>
       </ol>
      <li data-md>
       <p>Return a new <a data-link-type="dfn" href="#permissions-policy" id="ref-for-permissions-policy⑦">permissions policy</a> with <a data-link-type="dfn" href="#permissions-policy-inherited-policy" id="ref-for-permissions-policy-inherited-policy④">inherited policy</a> <var>inherited policy</var>, <a data-link-type="dfn" href="#permissions-policy-declared-policy" id="ref-for-permissions-policy-declared-policy④">declared policy</a> a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#struct" id="ref-for-struct②">struct</a> with both <a data-link-type="dfn" href="#declared-policy-declarations" id="ref-for-declared-policy-declarations②">declarations</a> and <a data-link-type="dfn" href="#declared-policy-reporting-configuration" id="ref-for-declared-policy-reporting-configuration①">reporting
 configuration</a> new <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map⑥">ordered maps</a>.</p>
     </ol>
     <p>To get the <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="declared-origin">declared origin</dfn> for an Element <var>node</var>, run the
    following steps:</p>
     <ol>
      <li data-md>
       <p>If <var>node</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document" id="ref-for-concept-node-document">node document</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#sandboxed-origin-browsing-context-flag" id="ref-for-sandboxed-origin-browsing-context-flag">sandboxed origin browsing
  context flag</a> is set, then return a new <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin-opaque" id="ref-for-concept-origin-opaque①">opaque origin</a>.</p>
      <li data-md>
       <p>If <var>node</var>’s <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-sandbox" id="ref-for-attr-iframe-sandbox①">sandbox</a></code> attribute is set, and does not contain
  the <code>allow-same-origin</code> keyword, then return a new <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin-opaque" id="ref-for-concept-origin-opaque②">opaque origin</a>.</p>
      <li data-md>
       <p>If <var>node</var>’s <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-srcdoc" id="ref-for-attr-iframe-srcdoc">srcdoc</a></code> attribute is set, then return <var>node</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document" id="ref-for-concept-node-document①">node document</a>’s origin.</p>
      <li data-md>
       <p>If <var>node</var>’s <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-src" id="ref-for-attr-iframe-src①">src</a></code> attribute is set:</p>
       <ol>
        <li data-md>
         <p>Let <var>url</var> be the result of parsing <var>node</var>’s src attribute,
  relative to <var>node</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document" id="ref-for-concept-node-document②">node document</a>.</p>
        <li data-md>
         <p>If <var>url</var> is not failure, return <var>url</var>’s origin.</p>
       </ol>
      <li data-md>
       <p>Return <var>node</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document" id="ref-for-concept-node-document③">node document</a>’s origin.</p>
     </ol>
     <p class="note" role="note"> The <a data-link-type="dfn" href="#declared-origin" id="ref-for-declared-origin②">declared origin</a> concept is intended to represent the origin of
      the document which the embedding page intends to load into a frame. This
      means, for instance, that if the browser does not support the <code>sandbox</code> or <code>srcdoc</code> attributes, it should not take
      those attributes into account when computing the declared origin.</p>
    </section>
   </section>
   <section>
    <h2 class="heading settled" data-level="8" id="reporting"><span class="secno">8. </span><span class="content">Reporting</span><a class="self-link" href="#reporting"></a></h2>
    <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="permissions-policy-violation-reports">Permissions policy violation reports</dfn> indicate that some behavior
  of the <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#clone-a-node-document" id="ref-for-clone-a-node-document">Document</a> has <a data-link-type="dfn" href="#violate" id="ref-for-violate">violated</a> a permissions policy. It is up to
  the specification of each individual policy-controlled feature to define what
  it means to <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="violate|violation|violated" data-noexport id="violate">violate</dfn> that
  policy, and how to determine when such a violation has occurred.</p>
    <p><a data-link-type="dfn" href="#permissions-policy-violation-reports" id="ref-for-permissions-policy-violation-reports">Permissions policy violation reports</a> have the <a data-link-type="dfn" href="https://w3c.github.io/reporting/#report-type" id="ref-for-report-type">report type</a> "permissions-policy-violation".</p>
    <p><a data-link-type="dfn" href="#permissions-policy-violation-reports" id="ref-for-permissions-policy-violation-reports①">Permissions policy violation reports</a> are <a data-link-type="dfn" href="https://w3c.github.io/reporting/#visible-to-reportingobservers" id="ref-for-visible-to-reportingobservers">visible to <code>ReportingObserver</code>s</a>.</p>
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed①"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="permissionspolicyviolationreportbody"><code><c- g>PermissionsPolicyViolationReportBody</c-></code></dfn> : <a data-link-type="idl-name" href="https://w3c.github.io/reporting/#reportbody" id="ref-for-reportbody"><c- n>ReportBody</c-></a> {
  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Default" id="ref-for-Default"><c- g>Default</c-></a>] <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-object" id="ref-for-idl-object"><c- b>object</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionsPolicyViolationReportBody" data-dfn-type="method" data-export data-lt="toJSON()" id="dom-permissionspolicyviolationreportbody-tojson"><code><c- g>toJSON</c-></code></dfn>();
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString⑥"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionsPolicyViolationReportBody" data-dfn-type="attribute" data-export data-readonly data-type="DOMString" id="dom-permissionspolicyviolationreportbody-featureid"><code><c- g>featureId</c-></code></dfn>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString⑦"><c- b>DOMString</c-></a>? <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionsPolicyViolationReportBody" data-dfn-type="attribute" data-export data-readonly data-type="DOMString?" id="dom-permissionspolicyviolationreportbody-sourcefile"><code><c- g>sourceFile</c-></code></dfn>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-long" id="ref-for-idl-long"><c- b>long</c-></a>? <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionsPolicyViolationReportBody" data-dfn-type="attribute" data-export data-readonly data-type="long?" id="dom-permissionspolicyviolationreportbody-linenumber"><code><c- g>lineNumber</c-></code></dfn>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-long" id="ref-for-idl-long①"><c- b>long</c-></a>? <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionsPolicyViolationReportBody" data-dfn-type="attribute" data-export data-readonly data-type="long?" id="dom-permissionspolicyviolationreportbody-columnnumber"><code><c- g>columnNumber</c-></code></dfn>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString⑧"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionsPolicyViolationReportBody" data-dfn-type="attribute" data-export data-readonly data-type="DOMString" id="dom-permissionspolicyviolationreportbody-disposition"><code><c- g>disposition</c-></code></dfn>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString⑨"><c- b>DOMString</c-></a>? <dfn class="dfn-paneled idl-code" data-dfn-for="PermissionsPolicyViolationReportBody" data-dfn-type="attribute" data-export data-readonly data-type="DOMString?" id="dom-permissionspolicyviolationreportbody-allowattribute"><code><c- g>allowAttribute</c-></code></dfn>;
};
</pre>
    <p>A <a data-link-type="dfn" href="#permissions-policy-violation-reports" id="ref-for-permissions-policy-violation-reports②">permissions policy violation report</a>’s <a data-link-type="dfn" href="https://w3c.github.io/reporting/#report-body" id="ref-for-report-body">body</a>, represented in
  JavaScript by <code class="idl"><a data-link-type="idl" href="#permissionspolicyviolationreportbody" id="ref-for-permissionspolicyviolationreportbody">PermissionsPolicyViolationReportBody</a></code>, contains the following
  fields:</p>
    <ul>
     <li data-md>
      <p><dfn class="dfn-paneled" data-dfn-for="PermissionsPolicyViolationReportBody" data-dfn-type="dfn" data-noexport id="permissionspolicyviolationreportbody-featureid">featureId</dfn>: The
string identifying the <a data-link-type="dfn" href="#policy-controlled-feature" id="ref-for-policy-controlled-feature①⑥">policy-controlled feature</a> whose policy has
been <a data-link-type="dfn" href="#violate" id="ref-for-violate①">violated</a>. This string can be used for grouping and counting
related reports.</p>
     <li data-md>
      <p><dfn class="dfn-paneled" data-dfn-for="PermissionsPolicyViolationReportBody" data-dfn-type="dfn" data-noexport id="permissionspolicyviolationreportbody-sourcefile">sourceFile</dfn>: If
known, the file where the <a data-link-type="dfn" href="#violate" id="ref-for-violate②">violation</a> occured, or null otherwise.</p>
     <li data-md>
      <p><dfn class="dfn-paneled" data-dfn-for="PermissionsPolicyViolationReportBody" data-dfn-type="dfn" data-noexport id="permissionspolicyviolationreportbody-linenumber">lineNumber</dfn>: If
known, the line number in <a data-link-type="dfn" href="#permissionspolicyviolationreportbody-sourcefile" id="ref-for-permissionspolicyviolationreportbody-sourcefile">sourceFile</a> where the <a data-link-type="dfn" href="#violate" id="ref-for-violate③">violation</a> occured, or null otherwise.</p>
     <li data-md>
      <p><dfn class="dfn-paneled" data-dfn-for="PermissionsPolicyViolationReportBody" data-dfn-type="dfn" data-noexport id="permissionspolicyviolationreportbody-columnnumber">columnNumber</dfn>: If
known, the column number in <a data-link-type="dfn" href="#permissionspolicyviolationreportbody-sourcefile" id="ref-for-permissionspolicyviolationreportbody-sourcefile①">sourceFile</a> where the <a data-link-type="dfn" href="#violate" id="ref-for-violate④">violation</a> occured, or null otherwise.</p>
     <li data-md>
      <p><dfn class="dfn-paneled" data-dfn-for="PermissionsPolicyViolationReportBody" data-dfn-type="dfn" data-noexport id="permissionspolicyviolationreportbody-disposition">disposition</dfn>: A
string indicating whether the <a data-link-type="dfn" href="#violate" id="ref-for-violate⑤">violated</a> permissions policy was
enforced in this case. <a data-link-type="dfn" href="#permissionspolicyviolationreportbody-disposition" id="ref-for-permissionspolicyviolationreportbody-disposition">disposition</a> will be set to
"enforce" if the policy was enforced, or "report" if the <a data-link-type="dfn" href="#violate" id="ref-for-violate⑥">violation</a> resulted only in this report being generated (with no further action taken
by the user agent in response to the violation).</p>
     <li data-md>
      <p><dfn class="dfn-paneled" data-dfn-for="PermissionsPolicyViolationReportBody" data-dfn-type="dfn" data-noexport id="permissionspolicyviolationreportbody-allowattribute">allowAttribute</dfn>: For
reports of potential violations, which can be attributed to a specific <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element" id="ref-for-the-iframe-element①②">iframe</a></code> element, the value of the <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-allow" id="ref-for-attr-iframe-allow⑥">allow</a></code> attribute of that
element, or omitted otherwise.</p>
    </ul>
    <section>
     <h3 class="heading settled" data-level="8.1" id="permissions-policy-report-only-http-header-field"><span class="secno">8.1. </span><span class="content">`<code>Permissions-Policy-Report-Only</code>` HTTP Header Field</span><a class="self-link" href="#permissions-policy-report-only-http-header-field"></a></h3>
     <p>The `<dfn class="dfn-paneled" data-dfn-type="http-header" data-export id="permissions-policy-report-only-header"><code>Permissions-Policy-Report-Only</code></dfn>`
    HTTP header field can be used in the <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response-response" id="ref-for-concept-response-response①">response</a> (server to client) to
    communicate a <a data-link-type="dfn" href="#permissions-policy" id="ref-for-permissions-policy⑧">permissions policy</a> that should not be enforced by the
    client, but instead should be used to trigger reports to be sent if any
    policy declared within it <em>would</em> have been violated, had the policy been
    active.</p>
     <p>`<a data-link-type="http-header" href="#permissions-policy-report-only-header" id="ref-for-permissions-policy-report-only-header"><code>Permissions-Policy-Report-Only</code></a>` is a
    structured header. Its value must be a dictionary.</p>
     <p>The semantics of the dictionary are defined in <a href="#structured-header-serialization">§ 5.2 Structured header serialization</a>.</p>
     <p>The processing steps are defined in <a href="#algo-construct-policy">§ 9.2 Construct policy from dictionary and origin</a>.</p>
    </section>
   </section>
   <section>
    <h2 class="heading settled" data-level="9" id="algorithms"><span class="secno">9. </span><span class="content">Algorithms</span><a class="self-link" href="#algorithms"></a></h2>
    <section>
     <h3 class="heading settled" data-level="9.1" id="algo-process-response-policy"><span class="secno">9.1. </span><span class="content"><dfn class="dfn-paneled" data-dfn-type="abstract-op" data-export id="process-response-policy">Process response policy</dfn></span><a class="self-link" href="#algo-process-response-policy"></a></h3>
     <div class="algorithm" data-algorithm="process-response-policy">
       Given a <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response-response" id="ref-for-concept-response-response②">response</a> (<var>response</var>), an <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-origin" id="ref-for-concept-url-origin⑤">origin</a> (<var>origin</var>), and a boolean
    (<var>report-only</var>), this algorithm returns a <a data-link-type="dfn" href="#declared-policy" id="ref-for-declared-policy②">declared policy</a>. 
      <ol>
       <li data-md>
        <p>Let <var>header name</var> be "<code>Permissions-Policy-Report-Only</code>" if <var>report-only</var> is True, or "<code>Permissions-Policy</code>" otherwise.</p>
       <li data-md>
        <p>Let <var>parsed header</var> be the result of executing <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-header-list-get-structured-header" id="ref-for-concept-header-list-get-structured-header">get a structured
field value</a> given <var>header name</var> and "dictionary" from <var>response</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response-header-list" id="ref-for-concept-response-header-list">header list</a>.</p>
       <li data-md>
        <p>If <var>parsed header</var> is null, return an empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map⑦">ordered map</a>.</p>
       <li data-md>
        <p>Let <var>policy</var> be the result of executing <a data-link-type="abstract-op" href="#construct-policy" id="ref-for-construct-policy">Construct policy from
dictionary and origin</a> on <var>parsed header</var> and <var>origin</var>.</p>
       <li data-md>
        <p>Return <var>policy</var>.</p>
      </ol>
     </div>
    </section>
    <section>
     <h3 class="heading settled" data-level="9.2" id="algo-construct-policy"><span class="secno">9.2. </span><span class="content"><dfn class="dfn-paneled" data-dfn-type="abstract-op" data-export id="construct-policy">Construct policy from dictionary and origin</dfn></span><a class="self-link" href="#algo-construct-policy"></a></h3>
     <div class="algorithm" data-algorithm="construct-policy">
       Given an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map⑧">ordered map</a> (<var>dictionary</var>) and an <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-origin" id="ref-for-concept-url-origin⑥">origin</a> (<var>origin</var>), this
    algorithm will return a <a data-link-type="dfn" href="#declared-policy" id="ref-for-declared-policy③">declared policy</a>. 
      <ol>
       <li data-md>
        <p>Let <var>declarations</var> be an empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map⑨">ordered map</a>.</p>
       <li data-md>
        <p>Let <var>reporting-config</var> be an empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map①⓪">ordered map</a>.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-iterate" id="ref-for-map-iterate">For each</a> <var>feature-name</var> → (<var>value</var>, <var>params</var>) of <var>dictionary</var>:</p>
        <ol>
         <li data-md>
          <p>If <var>feature-name</var> does not identify any recognized <a data-link-type="dfn" href="#policy-controlled-feature" id="ref-for-policy-controlled-feature①⑦">policy-controlled feature</a>, then <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#iteration-continue" id="ref-for-iteration-continue">continue</a>.</p>
         <li data-md>
          <p>Let <var>feature</var> be the <a data-link-type="dfn" href="#policy-controlled-feature" id="ref-for-policy-controlled-feature①⑧">policy-controlled feature</a> identified by <var>feature-name</var>.</p>
         <li data-md>
          <p>If <var>params</var>["report-to"] exists, and is a string, then set <var>reporting-config</var>[<var>feature</var>] to <var>params</var>["report-to"].</p>
         <li data-md>
          <p>Let <var>allowlist</var> be a new <a data-link-type="dfn" href="#allowlist" id="ref-for-allowlist①⑧">allowlist</a>.</p>
         <li data-md>
          <p>If <var>value</var> is the token <code>*</code>, or if <var>value</var> is a list which contains
the token <code>*</code>, set <var>allowlist</var> to <a data-link-type="dfn" href="#the-special-value" id="ref-for-the-special-value①">the special value <code>*</code></a>.</p>
         <li data-md>
          <p>Otherwise:</p>
          <ol>
           <li data-md>
            <p>If <var>value</var> is the token <code>self</code>, let <var>allowlist</var>’s <a data-link-type="dfn" href="#self-origin" id="ref-for-self-origin②">self-origin</a> be <var>origin</var>.</p>
           <li data-md>
            <p>Otherwise if <var>value</var> is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list">list</a>, then <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate②">for each</a> <var>element</var> in <var>value</var>:</p>
            <ol>
             <li data-md>
              <p>If <var>element</var> is the token <code>self</code>, let <var>allowlist</var>’s <a data-link-type="dfn" href="#self-origin" id="ref-for-self-origin③">self-origin</a> be <var>origin</var>.</p>
             <li data-md>
              <p>If <var>element</var> is a valid <a data-link-type="dfn" href="#permissions-source-expression" id="ref-for-permissions-source-expression⑤">permissions-source-expression</a>, <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append">append</a> <var>element</var> to <var>allowlist</var>’s <a data-link-type="dfn" href="#expressions" id="ref-for-expressions②">expressions</a>.</p>
            </ol>
          </ol>
         <li data-md>
          <p>Set <var>declarations</var>[<var>feature</var>] to <var>allowlist</var>.</p>
        </ol>
       <li data-md>
        <p>Return «<var>declarations</var>, <var>reporting-config</var>».</p>
      </ol>
     </div>
    </section>
    <section>
     <h3 class="heading settled" data-level="9.3" id="algo-parse-policy-directive"><span class="secno">9.3. </span><span class="content"><dfn class="dfn-paneled" data-dfn-type="abstract-op" data-export id="parse-policy-directive">Parse policy directive</dfn></span><a class="self-link" href="#algo-parse-policy-directive"></a></h3>
     <div class="algorithm" data-algorithm="parse-policy-directive">
       Given a string (<var>value</var>), an <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-origin" id="ref-for-concept-url-origin⑦">origin</a> (<var>container origin</var>), and an
    optional <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-origin" id="ref-for-concept-url-origin⑧">origin</a> (<var>target origin</var>), this algorithm returns a <a data-link-type="dfn" href="#policy-directive" id="ref-for-policy-directive⑦">policy
    directive</a>. 
      <ol>
       <li data-md>
        <p>Let <var>directive</var> be an empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map①①">ordered map</a>.</p>
       <li data-md>
        <p>For each <var>serialized-declaration</var> returned by <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#strictly-split" id="ref-for-strictly-split">strictly splitting <var>value</var> on the delimiter
U+003B (;)</a>:</p>
        <ol>
         <li data-md>
          <p>Let <var>tokens</var> be the result of <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#split-on-ascii-whitespace" id="ref-for-split-on-ascii-whitespace">splitting <var>serialized-declaration</var> on
ASCII whitespace.</a></p>
         <li data-md>
          <p>If <var>tokens</var> is an empty list, then <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#iteration-continue" id="ref-for-iteration-continue①">continue</a>.</p>
         <li data-md>
          <p>Let <var>feature-name</var> be the first element of <var>tokens</var>.</p>
         <li data-md>
          <p>If <var>feature-name</var> does not identify any recognized <a data-link-type="dfn" href="#policy-controlled-feature" id="ref-for-policy-controlled-feature①⑨">policy-controlled feature</a>, then <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#iteration-continue" id="ref-for-iteration-continue②">continue</a>.</p>
         <li data-md>
          <p>Let <var>feature</var> be the <a data-link-type="dfn" href="#policy-controlled-feature" id="ref-for-policy-controlled-feature②⓪">policy-controlled feature</a> identified by <var>feature-name</var>.</p>
         <li data-md>
          <p>Let <var>targetlist</var> be the remaining elements, if any, of <var>tokens</var>.</p>
         <li data-md>
          <p>Let <var>allowlist</var> be a new <a data-link-type="dfn" href="#allowlist" id="ref-for-allowlist①⑨">allowlist</a>.</p>
         <li data-md>
          <p>If any element of <var>targetlist</var> is the string "<code>*</code>", set <var>allowlist</var> to <a data-link-type="dfn" href="#the-special-value" id="ref-for-the-special-value②">the special value <code>*</code></a>.</p>
         <li data-md>
          <p>Otherwise:</p>
          <ol>
           <li data-md>
            <p>If <var>targetlist</var> is empty and <var>target origin</var> is given,
 let <var>allowlist</var>’s <a data-link-type="dfn" href="#src-origin" id="ref-for-src-origin②">src-origin</a> be <var>target origin</var>.</p>
           <li data-md>
            <p>For each <var>element</var> in <var>targetlist</var>:</p>
            <ol>
             <li data-md>
              <p>If <var>element</var> is an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ascii-case-insensitive" id="ref-for-ascii-case-insensitive">ASCII case-insensitive</a> match for
"<code>'self'</code>":</p>
              <ol>
               <li data-md>
                <p>Let <var>allowlist</var>’s <a data-link-type="dfn" href="#self-origin" id="ref-for-self-origin④">self-origin</a> be <var>container origin</var>.</p>
               <li data-md>
                <p>Continue to the next <var>element</var>.</p>
              </ol>
             <li data-md>
              <p>If <var>target origin</var> is given, and <var>element</var> is an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ascii-case-insensitive" id="ref-for-ascii-case-insensitive①">ASCII
case-insensitive</a> match for "<code>'src'</code>":</p>
              <ol>
               <li data-md>
                <p>Let <var>allowlist</var>’s <a data-link-type="dfn" href="#src-origin" id="ref-for-src-origin③">src-origin</a> be <var>target origin</var>.</p>
               <li data-md>
                <p>Continue to the next <var>element</var>.</p>
              </ol>
             <li data-md>
              <p>Let <var>result</var> be the result of executing the <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-parser" id="ref-for-concept-url-parser①">URL parser</a> on <var>element</var>.</p>
             <li data-md>
              <p>If <var>result</var> is not failure:</p>
              <ol>
               <li data-md>
                <p>Let <var>target</var> be the <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-origin" id="ref-for-concept-url-origin⑨">origin</a> of <var>result</var>.</p>
               <li data-md>
                <p>If <var>target</var> is not an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin-opaque" id="ref-for-concept-origin-opaque③">opaque origin</a>, <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append①">append</a> the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#ascii-serialisation-of-an-origin" id="ref-for-ascii-serialisation-of-an-origin③">serialization</a> of <var>target</var> to <var>allowlist</var>’s <a data-link-type="dfn" href="#expressions" id="ref-for-expressions③">expressions</a>.</p>
              </ol>
            </ol>
          </ol>
         <li data-md>
          <p>Set <var>directive</var>[<var>feature</var>] to <var>allowlist</var>.</p>
        </ol>
       <li data-md>
        <p>Return <var>directive</var></p>
      </ol>
     </div>
    </section>
    <section>
     <h3 class="heading settled" data-level="9.4" id="algo-process-policy-attributes"><span class="secno">9.4. </span><span class="content"><dfn class="dfn-paneled" data-dfn-type="abstract-op" data-export id="process-policy-attributes">Process permissions policy attributes</dfn></span><a class="self-link" href="#algo-process-policy-attributes"></a></h3>
     <div class="algorithm" data-algorithm="process-policy-attributes">
       Given an element (<var>element</var>), this algorithm returns a <a data-link-type="dfn" href="#container-policy" id="ref-for-container-policy⑨">container
    policy</a>, which may be empty. 
      <ol>
       <li data-md>
        <p>If <var>element</var> is not an <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element" id="ref-for-the-iframe-element①③">iframe</a></code> element, then return an empty <a data-link-type="dfn" href="#policy-directive" id="ref-for-policy-directive⑧">policy
 directive</a>.</p>
       <li data-md>
        <p>Let <var>container policy</var> be the result of running <a data-link-type="abstract-op" href="#parse-policy-directive" id="ref-for-parse-policy-directive">Parse policy
directive</a> given the value of <var>element</var>’s <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-allow" id="ref-for-attr-iframe-allow⑦">allow</a></code> attribute,
the <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document-origin" id="ref-for-concept-document-origin①">origin</a> of <var>element</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document" id="ref-for-concept-node-document④">node document</a>, and <var>element</var>’s <a data-link-type="dfn" href="#declared-origin" id="ref-for-declared-origin③">declared origin</a>.</p>
       <li data-md>
        <p>If <var>element</var>’s <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-allowfullscreen" id="ref-for-attr-iframe-allowfullscreen④">allowfullscreen</a></code> attribute is specified, and <var>container policy</var> does not <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists">contain</a> an entry for the <code>fullscreen</code> <a data-link-type="dfn" href="#policy-controlled-feature" id="ref-for-policy-controlled-feature②①">feature</a>.</p>
        <ol>
         <li data-md>
          <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-set" id="ref-for-map-set">Set</a> <var>container policy</var>[<code>fullscreen</code>] = <a data-link-type="dfn" href="#the-special-value" id="ref-for-the-special-value③">the
 special value <code>*</code></a>.</p>
        </ol>
       <li data-md>
        <p>Return <var>container policy</var>.</p>
      </ol>
     </div>
    </section>
    <section>
     <h3 class="heading settled" data-level="9.5" id="algo-create-for-navigable"><span class="secno">9.5. </span><span class="content"><dfn class="dfn-paneled" data-dfn-type="abstract-op" data-export id="create-for-navigable">Create a Permissions Policy for a navigable</dfn></span><a class="self-link" href="#algo-create-for-navigable"></a></h3>
     <div class="algorithm" data-algorithm="create-for-navigable">
       Given null or an <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-element" id="ref-for-concept-element">element</a> (<var>container</var>) and an <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-origin" id="ref-for-concept-url-origin①⓪">origin</a> (<var>origin</var>) this algorithm returns a new <a data-link-type="dfn" href="#permissions-policy" id="ref-for-permissions-policy⑨">Permissions Policy</a>. 
      <ol>
       <li data-md>
        <p class="assertion">Assert: If not null, <var>container</var> is a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#navigable-container" id="ref-for-navigable-container②">navigable container</a>.</p>
       <li data-md>
        <p>Let <var>inherited policy</var> be a new <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map①②">ordered map</a>.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate③">For each</a> <var>feature</var> <a data-link-type="dfn" href="#supported-features" id="ref-for-supported-features⑥">supported</a>,</p>
        <ol>
         <li data-md>
          <p>Let <var>isInherited</var> be the result of running <a data-link-type="abstract-op" href="#define-inherited-policy-in-container" id="ref-for-define-inherited-policy-in-container①">Define an
inherited policy for feature in container at origin</a> on <var>feature</var>, <var>container</var> and <var>origin</var>.</p>
         <li data-md>
          <p>Set <var>inherited policy</var>[<var>feature</var>] to <var>isInherited</var>.</p>
        </ol>
       <li data-md>
        <p>Let <var>policy</var> be a new <a data-link-type="dfn" href="#permissions-policy" id="ref-for-permissions-policy①⓪">permissions policy</a>, with <a data-link-type="dfn" href="#permissions-policy-inherited-policy" id="ref-for-permissions-policy-inherited-policy⑤">inherited policy</a> <var>inherited policy</var> and <a data-link-type="dfn" href="#permissions-policy-declared-policy" id="ref-for-permissions-policy-declared-policy⑤">declared policy</a> «[], []».</p>
       <li data-md>
        <p>Return <var>policy</var>.</p>
      </ol>
     </div>
    </section>
    <section>
     <h3 class="heading settled" data-level="9.6" id="algo-create-from-response"><span class="secno">9.6. </span><span class="content"><dfn class="dfn-paneled" data-dfn-type="abstract-op" data-export id="create-from-response">Create a Permissions Policy for a navigable from response</dfn></span><a class="self-link" href="#algo-create-from-response"></a></h3>
     <div class="algorithm" data-algorithm="create-from-response">
       Given null or a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#navigable-container" id="ref-for-navigable-container③">navigable container</a> (<var>container</var>), an <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-origin" id="ref-for-concept-url-origin①①">origin</a> (<var>origin</var>), a <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response-response" id="ref-for-concept-response-response③">response</a> (<var>response</var>), and an optional boolean
    (<var>report-only</var>), with a default value of False, this algorithm returns a new <a data-link-type="dfn" href="#permissions-policy" id="ref-for-permissions-policy①①">permissions policy</a>. 
      <ol>
       <li data-md>
        <p>Let <var>policy</var> be the result of running <a data-link-type="abstract-op" href="#create-for-navigable" id="ref-for-create-for-navigable">Create a Permissions
Policy for a navigable</a> given <var>container</var> and <var>origin</var>.</p>
       <li data-md>
        <p>Let <var>d</var> be the result of running <a data-link-type="abstract-op" href="#process-response-policy" id="ref-for-process-response-policy">Process response
policy</a> given <var>response</var>, <var>origin</var> and <var>report-only</var>.</p>
       <li data-md>
        <p>For each <var>feature</var> → <var>allowlist</var> of <var>d</var>’s <a data-link-type="dfn" href="#declared-policy-declarations" id="ref-for-declared-policy-declarations③">declarations</a>:</p>
        <ol>
         <li data-md>
          <p>If <var>policy</var>’s <a data-link-type="dfn" href="#permissions-policy-inherited-policy" id="ref-for-permissions-policy-inherited-policy⑥">inherited
 policy</a>[<var>feature</var>] is true, then set <var>policy</var>’s <a data-link-type="dfn" href="#permissions-policy-declared-policy" id="ref-for-permissions-policy-declared-policy⑥">declared policy</a>’s <a data-link-type="dfn" href="#declared-policy-declarations" id="ref-for-declared-policy-declarations④">declarations</a>[<var>feature</var>] to <var>allowlist</var>.</p>
        </ol>
       <li data-md>
        <p>Set <var>policy</var>’s <a data-link-type="dfn" href="#permissions-policy-declared-policy" id="ref-for-permissions-policy-declared-policy⑦">declared
 policy</a>[<var>feature</var>]'s <a data-link-type="dfn" href="#declared-policy-reporting-configuration" id="ref-for-declared-policy-reporting-configuration②">reporting configuration</a> to <var>d</var>’s <a data-link-type="dfn" href="#declared-policy-reporting-configuration" id="ref-for-declared-policy-reporting-configuration③">reporting configuration</a>.</p>
       <li data-md>
        <p>Return <var>policy</var>.</p>
      </ol>
     </div>
    </section>
    <section>
     <h3 class="heading settled" data-level="9.7" id="algo-define-inherited-policy-in-container"><span class="secno">9.7. </span><span class="content"><dfn class="dfn-paneled" data-dfn-type="abstract-op" data-export id="define-inherited-policy-in-container">Define an inherited policy for feature in container at origin</dfn></span><a class="self-link" href="#algo-define-inherited-policy-in-container"></a></h3>
     <div class="algorithm" data-algorithm="define-inherited-policy-in-container">
       Given a <a data-link-type="dfn" href="#policy-controlled-feature" id="ref-for-policy-controlled-feature②②">feature</a> (<var>feature</var>), null or a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#navigable-container" id="ref-for-navigable-container④">navigable container</a> (<var>container</var>), an <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document-origin" id="ref-for-concept-document-origin②">origin</a> for a <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document①⑧">Document</a></code> in
    that container (<var>origin</var>), and an optional boolean (<var>report-only</var>), with
    a default value of False, this algorithm returns the <a data-link-type="dfn" href="#inherited-policy-for-a-feature" id="ref-for-inherited-policy-for-a-feature">inherited policy value</a> for <var>feature</var>. 
      <ol>
       <li data-md>
        <p>If <var>container</var> is null, return "<code>Enabled</code>".</p>
       <li data-md>
        <p>If the result of executing <a data-link-type="abstract-op" href="#get-feature-value-for-origin" id="ref-for-get-feature-value-for-origin">Get feature value for
origin</a> on <var>feature</var>, <var>container</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document" id="ref-for-concept-node-document⑤">node document</a>, <var>container</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document" id="ref-for-concept-node-document⑥">node document</a>’s origin, and <var>report-only</var> is
"<code>Disabled</code>", return "<code>Disabled</code>".</p>
       <li data-md>
        <p>If the result of executing <a data-link-type="abstract-op" href="#get-feature-value-for-origin" id="ref-for-get-feature-value-for-origin①">Get feature value for
origin</a> on <var>feature</var>, <var>container</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document" id="ref-for-concept-node-document⑦">node document</a>, <var>origin</var>,
and <var>report-only</var> is "<code>Disabled</code>", return
"<code>Disabled</code>".</p>
       <li data-md>
        <p>Let <var>container policy</var> be the result of running <a data-link-type="abstract-op" href="#process-policy-attributes" id="ref-for-process-policy-attributes">Process
permissions policy attributes</a> on <var>container</var>.</p>
       <li data-md>
        <p>If <var>feature</var> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists①">exists</a> in <var>container policy</var>:</p>
        <ol>
         <li data-md>
          <p>If the <a data-link-type="dfn" href="#allowlist" id="ref-for-allowlist②⓪">allowlist</a> for <var>feature</var> in <var>container policy</var> <a data-link-type="dfn" href="#matches" id="ref-for-matches">matches</a> <var>origin</var>, return "<code>Enabled</code>".</p>
         <li data-md>
          <p>Otherwise return "<code>Disabled</code>".</p>
        </ol>
       <li data-md>
        <p>If <var>feature</var>’s <a data-link-type="dfn" href="#policy-controlled-feature-default-allowlist" id="ref-for-policy-controlled-feature-default-allowlist③">default allowlist</a> is <code>*</code>, return
"<code>Enabled</code>".</p>
       <li data-md>
        <p>If <var>feature</var>’s <a data-link-type="dfn" href="#policy-controlled-feature-default-allowlist" id="ref-for-policy-controlled-feature-default-allowlist④">default allowlist</a> is <code>'self'</code>, and <var>origin</var> is <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#same-origin" id="ref-for-same-origin②">same origin</a> with <var>container</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document" id="ref-for-concept-node-document⑧">node document</a>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document-origin" id="ref-for-concept-document-origin③">origin</a>, return "<code>Enabled</code>".</p>
       <li data-md>
        <p>Otherwise return "<code>Disabled</code>".</p>
      </ol>
     </div>
    </section>
    <section>
     <h3 class="heading settled" data-level="9.8" id="algo-get-feature-value-for-origin"><span class="secno">9.8. </span><span class="content"><dfn class="dfn-paneled" data-dfn-type="abstract-op" data-export id="get-feature-value-for-origin">Get feature value for origin</dfn></span><a class="self-link" href="#algo-get-feature-value-for-origin"></a></h3>
     <div class="algorithm" data-algorithm="get-feature-value-for-origin">
       Given a <a data-link-type="dfn" href="#policy-controlled-feature" id="ref-for-policy-controlled-feature②③">feature</a> (<var>feature</var>), a <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document①⑨">Document</a></code> object
    (<var>document</var>), an <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-origin" id="ref-for-concept-url-origin①②">origin</a> (<var>origin</var>), and a boolean (<var>report-only</var>),
    this algorithm returns "<code>Disabled</code>" if <var>feature</var> should be
    considered disabled, and "<code>Enabled</code>" otherwise. 
      <ol>
       <li data-md>
        <p>Let <var>policy</var> be <var>document</var>’s <a data-link-type="dfn" href="#document-report-only-permissions-policy" id="ref-for-document-report-only-permissions-policy">report-only permissions
 policy</a> if <var>report-only</var> is True, or <var>document</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/dom.html#concept-document-permissions-policy" id="ref-for-concept-document-permissions-policy">permissions policy</a> otherwise.</p>
       <li data-md>
        <p>If <var>policy</var>’s <a data-link-type="dfn" href="#permissions-policy-inherited-policy" id="ref-for-permissions-policy-inherited-policy⑦">inherited policy</a> for <var>feature</var> is "<code>Disabled</code>", return "<code>Disabled</code>".</p>
       <li data-md>
        <p>If <var>feature</var> is present in <var>policy</var>’s <a data-link-type="dfn" href="#permissions-policy-declared-policy" id="ref-for-permissions-policy-declared-policy⑧">declared
 policy</a>:</p>
        <ol>
         <li data-md>
          <p>If <var>policy</var>’s <a data-link-type="dfn" href="#permissions-policy-declared-policy" id="ref-for-permissions-policy-declared-policy⑨">declared
 policy</a>’s <a data-link-type="dfn" href="#declared-policy-declarations" id="ref-for-declared-policy-declarations⑤">declarations</a>[<var>feature</var>] <a data-link-type="dfn" href="#matches" id="ref-for-matches①">matches</a> <var>origin</var>, then return "<code>Enabled</code>".</p>
         <li data-md>
          <p>Otherwise return "<code>Disabled</code>".</p>
        </ol>
       <li data-md>
        <p>Return "<code>Enabled</code>".</p>
      </ol>
     </div>
    </section>
    <section>
     <h3 class="heading settled" data-level="9.9" id="algo-check-permissions-policy"><span class="secno">9.9. </span><span class="content"><dfn class="dfn-paneled" data-dfn-type="abstract-op" data-export id="check-permissions-policy">Check permissions policy</dfn></span><a class="self-link" href="#algo-check-permissions-policy"></a></h3>
     <div class="algorithm" data-algorithm="check-permissions-policy">
       To check a permissions policy, given <a data-link-type="dfn" href="#permissions-policy" id="ref-for-permissions-policy①②">permissions policy</a> (<var>policy</var>), a <a data-link-type="dfn" href="#policy-controlled-feature" id="ref-for-policy-controlled-feature②④">feature</a> (<var>feature</var>), an <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-origin" id="ref-for-concept-url-origin①③">origin</a> (<var>origin</var>) and another <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-origin" id="ref-for-concept-url-origin①④">origin</a> (<var>document origin</var>), this algorithm returns "<code>Disabled</code>" if <var>feature</var> should be considered disabled, and "<code>Enabled</code>"
    otherwise. 
      <ol>
       <li data-md>
        <p>If <var>policy</var>’s <a data-link-type="dfn" href="#permissions-policy-inherited-policy" id="ref-for-permissions-policy-inherited-policy⑧">inherited policy</a> for <var>feature</var> is "<code>Disabled</code>", return "<code>Disabled</code>".</p>
       <li data-md>
        <p>If <var>feature</var> is present in <var>policy</var>’s <a data-link-type="dfn" href="#permissions-policy-declared-policy" id="ref-for-permissions-policy-declared-policy①⓪">declared policy</a>:</p>
        <ol>
         <li data-md>
          <p>If <var>policy</var>’s <a data-link-type="dfn" href="#permissions-policy-declared-policy" id="ref-for-permissions-policy-declared-policy①①">declared
 policy</a>’s <a data-link-type="dfn" href="#declared-policy-declarations" id="ref-for-declared-policy-declarations⑥">declarations</a>[<var>feature</var>] <a data-link-type="dfn" href="#matches" id="ref-for-matches②">matches</a> <var>origin</var>, then return "<code>Enabled</code>".</p>
         <li data-md>
          <p>Otherwise return "<code>Disabled</code>".</p>
        </ol>
       <li data-md>
        <p>If <var>feature</var>’s <a data-link-type="dfn" href="#policy-controlled-feature-default-allowlist" id="ref-for-policy-controlled-feature-default-allowlist⑤">default allowlist</a> is <code>*</code>, return
"<code>Enabled</code>".</p>
       <li data-md>
        <p>If <var>feature</var>’s <a data-link-type="dfn" href="#policy-controlled-feature-default-allowlist" id="ref-for-policy-controlled-feature-default-allowlist⑥">default allowlist</a> is <code>'self'</code>, and <var>origin</var> is <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#same-origin" id="ref-for-same-origin③">same origin</a> with <var>document origin</var>, return
"<code>Enabled</code>".</p>
       <li data-md>
        <p>Return "<code>Disabled</code>".</p>
      </ol>
     </div>
    </section>
    <section>
     <h3 class="heading settled" data-level="9.10" id="algo-is-feature-enabled"><span class="secno">9.10. </span><span class="content"><dfn class="dfn-paneled" data-dfn-type="abstract-op" data-export id="is-feature-enabled">Is feature enabled in document for origin?</dfn></span><a class="self-link" href="#algo-is-feature-enabled"></a></h3>
     <div class="algorithm" data-algorithm="is-feature-enabled">
       Given a <a data-link-type="dfn" href="#policy-controlled-feature" id="ref-for-policy-controlled-feature②⑤">feature</a> (<var>feature</var>), a <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document②⓪">Document</a></code> object
    (<var>document</var>), an <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-origin" id="ref-for-concept-url-origin①⑤">origin</a> (<var>origin</var>), and an optional boolean (<var>report</var>),
    with a default value of True, this algorithm returns "<code>Disabled</code>"
    if <var>feature</var> should be considered disabled, and "<code>Enabled</code>"
    otherwise. If <var>report</var> is True, then it will also <a data-link-type="dfn" href="https://w3c.github.io/reporting/#generate-and-queue-a-report" id="ref-for-generate-and-queue-a-report">generate and queue a
    report</a> if the feature is not enabled in either <var>document</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/dom.html#concept-document-permissions-policy" id="ref-for-concept-document-permissions-policy①">permissions policy</a> or <var>document</var>’s <a data-link-type="dfn" href="#document-report-only-permissions-policy" id="ref-for-document-report-only-permissions-policy①">report-only
    permissions policy</a>. 
      <p class="note" role="note"><span class="marker">Note:</span> The default value of True for <var>report</var> means that most permissions
    policy checks will generate a violation report if the feature is not
    enabled. This is the expected result, as most checks are for an actual
    attempted use of the feature. If a call to this algorithm is performed just
    to query the state of a feature, and does not represent an actual attempt to
    use the feature, then <var>report</var> should be set to False.</p>
      <ol>
       <li data-md>
        <p>Let <var>policy</var> be <var>document</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/dom.html#concept-document-permissions-policy" id="ref-for-concept-document-permissions-policy②">permissions policy</a>.</p>
       <li data-md>
        <p>Let <var>report-only policy</var> be <var>document</var>’s <a data-link-type="dfn" href="#document-report-only-permissions-policy" id="ref-for-document-report-only-permissions-policy②">report-only
 permissions policy</a>.</p>
       <li data-md>
        <p>Let <var>result</var> be the result of calling <a data-link-type="abstract-op" href="#check-permissions-policy" id="ref-for-check-permissions-policy">Check permissions
 policy</a>, given <var>policy</var>, <var>feature</var>, <var>origin</var>, and <var>document</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document-origin" id="ref-for-concept-document-origin④">origin</a>.</p>
       <li data-md>
        <p>Let <var>report-only result</var> be the result of calling <a data-link-type="abstract-op" href="#check-permissions-policy" id="ref-for-check-permissions-policy①">Check
 permissions policy</a>, given <var>report-only policy</var>, <var>feature</var>, <var>origin</var>,
 and <var>document</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document-origin" id="ref-for-concept-document-origin⑤">origin</a>.</p>
       <li data-md>
        <p>If <var>report</var> is True:</p>
        <ol>
         <li data-md>
          <p>Let <var>settings</var> be <var>document</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object" id="ref-for-environment-settings-object">environment settings object</a>.</p>
         <li data-md>
          <p>If <var>result</var> is "<code>Disabled</code>":</p>
          <ol>
           <li data-md>
            <p>Let <var>endpoint</var> be the result of calling <a data-link-type="abstract-op" href="#get-reporting-endpoint" id="ref-for-get-reporting-endpoint">Get the
  reporting endpoint for a feature</a> given <var>feature</var> and <var>policy</var>.</p>
           <li data-md>
            <p>Call <a data-link-type="abstract-op" href="#report-permissions-policy-violation" id="ref-for-report-permissions-policy-violation">Generate report for violation of permissions
  policy on settings</a> given <var>feature</var>, <var>settings</var>,
  "<code>Enforce</code>", and <var>endpoint</var>.</p>
          </ol>
         <li data-md>
          <p>Else, if <var>report-only result</var> is "<code>Disabled</code>":</p>
          <ol>
           <li data-md>
            <p>Let <var>report-only endpoint</var> be the result of calling <a data-link-type="abstract-op" href="#get-reporting-endpoint" id="ref-for-get-reporting-endpoint①">Get the reporting endpoint for a feature</a> given <var>feature</var> and <var>report-only policy</var>.</p>
           <li data-md>
            <p>Call <a data-link-type="abstract-op" href="#report-permissions-policy-violation" id="ref-for-report-permissions-policy-violation①">Generate report for violation of permissions
  policy on settings</a> given <var>feature</var>, <var>settings</var>,
  "<code>Report</code>", and <var>report-only endpoint</var>.</p>
          </ol>
        </ol>
       <li data-md>
        <p>Return result</p>
      </ol>
     </div>
    </section>
    <section>
     <h3 class="heading settled" data-level="9.11" id="algo-get-reporting-endpoint"><span class="secno">9.11. </span><span class="content"><dfn class="dfn-paneled" data-dfn-type="abstract-op" data-export id="get-reporting-endpoint">Get the reporting endpoint for a feature</dfn></span><a class="self-link" href="#algo-get-reporting-endpoint"></a></h3>
     <div class="algorithm" data-algorithm="get-reporting-endpoint">
       Given a <a data-link-type="dfn" href="#policy-controlled-feature" id="ref-for-policy-controlled-feature②⑥">feature</a> (<var>feature</var>) and a <a data-link-type="dfn" href="#permissions-policy" id="ref-for-permissions-policy①③">permissions policy</a> (<var>policy</var>),
    this algorithm returns a string naming the endpoint to send violation
    reports to, or null if no such endpoint has been declared in <var>policy</var>. 
      <ol>
       <li data-md>
        <p>Let <var>config</var> be <var>policy</var>’s <a data-link-type="dfn" href="#permissions-policy-declared-policy" id="ref-for-permissions-policy-declared-policy①②">declared policy</a>'s <a data-link-type="dfn" href="#declared-policy-reporting-configuration" id="ref-for-declared-policy-reporting-configuration④">reporting configuration</a>.</p>
       <li data-md>
        <p>If <var>config</var>[<var>feature</var>] exists, return <var>config</var>[<var>feature</var>].</p>
       <li data-md>
        <p>Return null.</p>
      </ol>
     </div>
    </section>
    <section>
     <h3 class="heading settled" data-level="9.12" id="algo-check-potential-violation-in-container"><span class="secno">9.12. </span><span class="content"><dfn class="dfn-paneled" data-dfn-type="abstract-op" data-export id="check-potential-violation-in-container">Check potential violation of permissions policy in container</dfn></span><a class="self-link" href="#algo-check-potential-violation-in-container"></a></h3>
     <div class="algorithm" data-algorithm="check-potential-violation-in-container">
       Given a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#navigable-container" id="ref-for-navigable-container⑤">navigable container</a> (<var>container</var>), this algorithm sends potential
    violation reports. 
      <ol>
       <li data-md>
        <p>Let <var>document</var> be <var>container</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document" id="ref-for-concept-node-document⑨">node document</a>.</p>
       <li data-md>
        <p>Let <var>settings</var> be <var>document</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object" id="ref-for-environment-settings-object①">environment settings
 object</a>.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate④">For each</a> <a data-link-type="dfn" href="#supported-features" id="ref-for-supported-features⑦">supported feature</a> <var>feature</var>:</p>
        <ol>
         <li data-md>
          <p>If the result of running <a data-link-type="abstract-op" href="#define-inherited-policy-in-container" id="ref-for-define-inherited-policy-in-container②">Define an inherited
 policy for feature in container at origin</a> on <var>feature</var>, <var>container</var> and <var>container</var>’s <a data-link-type="dfn" href="#declared-origin" id="ref-for-declared-origin④">declared origin</a> is
 "<code>Disabled</code>":</p>
          <ol>
           <li data-md>
            <p>Let <var>endpoint</var> be the result of calling <a data-link-type="abstract-op" href="#get-reporting-endpoint" id="ref-for-get-reporting-endpoint②">Get
 the reporting endpoint for a feature</a> given <var>feature</var> and <var>document</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/dom.html#concept-document-permissions-policy" id="ref-for-concept-document-permissions-policy③">permissions policy</a>.</p>
           <li data-md>
            <p>Call <a data-link-type="abstract-op" href="#report-potential-permissions-policy-violation" id="ref-for-report-potential-permissions-policy-violation">Generate report for potential violation
 of permissions policy on settings</a> given <var>feature</var>, <var>settings</var>, "<code>Enforce</code>", and <var>endpoint</var>.</p>
          </ol>
         <li data-md>
          <p>Else, if the result of running <a data-link-type="abstract-op" href="#define-inherited-policy-in-container" id="ref-for-define-inherited-policy-in-container③">Define an inherited
 policy for feature in container at origin</a> on <var>feature</var>, <var>container</var>, <var>container</var>’s <a data-link-type="dfn" href="#declared-origin" id="ref-for-declared-origin⑤">declared origin</a> and True is
 "<code>Disabled</code>":</p>
          <ol>
           <li data-md>
            <p>Let <var>report-only endpoint</var> be the result of calling <a data-link-type="abstract-op" href="#get-reporting-endpoint" id="ref-for-get-reporting-endpoint③">Get the reporting endpoint for a feature</a> given <var>feature</var> and <var>document</var>’s <a data-link-type="dfn" href="#document-report-only-permissions-policy" id="ref-for-document-report-only-permissions-policy③">report-only
 permissions policy</a>.</p>
           <li data-md>
            <p>Call <a data-link-type="abstract-op" href="#report-potential-permissions-policy-violation" id="ref-for-report-potential-permissions-policy-violation①">Generate report for potential violation
 of permissions policy on settings</a> given <var>feature</var>, <var>settings</var>, "<code>Report</code>", and <var>report-only
 endpoint</var>.</p>
          </ol>
        </ol>
      </ol>
     </div>
    </section>
    <section>
     <h3 class="heading settled" data-level="9.13" id="algo-report-permissions-policy-violation"><span class="secno">9.13. </span><span class="content"><dfn class="dfn-paneled" data-dfn-type="abstract-op" data-export id="report-permissions-policy-violation">Generate report for violation of permissions policy on settings</dfn></span><a class="self-link" href="#algo-report-permissions-policy-violation"></a></h3>
     <div class="algorithm" data-algorithm="report-permissions-policy-violation">
       Given a <a data-link-type="dfn" href="#policy-controlled-feature" id="ref-for-policy-controlled-feature②⑦">feature</a> (<var>feature</var>), an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object" id="ref-for-environment-settings-object②">environment settings object</a> (<var>settings</var>), a string (<var>disposition</var>), and a string-or-null (<var>endpoint</var>),
    this algorithm generates a <a data-link-type="dfn" href="https://w3c.github.io/reporting/#report" id="ref-for-report">report</a> about the <a data-link-type="dfn" href="#violate" id="ref-for-violate⑦">violation</a> of the
    policy for <var>feature</var>. 
      <ol>
       <li data-md>
        <p>Let <var>body</var> be a new <code class="idl"><a data-link-type="idl" href="#permissionspolicyviolationreportbody" id="ref-for-permissionspolicyviolationreportbody①">PermissionsPolicyViolationReportBody</a></code>, initialized
as follows:</p>
        <dl>
         <dt data-md><a data-link-type="dfn" href="#permissionspolicyviolationreportbody-featureid" id="ref-for-permissionspolicyviolationreportbody-featureid">featureId</a>
         <dd data-md>
          <p><var>feature</var>’s string representation.</p>
         <dt data-md><a data-link-type="dfn" href="#permissionspolicyviolationreportbody-sourcefile" id="ref-for-permissionspolicyviolationreportbody-sourcefile②">sourceFile</a>
         <dd data-md>
          <p>null</p>
         <dt data-md><a data-link-type="dfn" href="#permissionspolicyviolationreportbody-linenumber" id="ref-for-permissionspolicyviolationreportbody-linenumber">lineNumber</a>
         <dd data-md>
          <p>null</p>
         <dt data-md><a data-link-type="dfn" href="#permissionspolicyviolationreportbody-columnnumber" id="ref-for-permissionspolicyviolationreportbody-columnnumber">columnNumber</a>
         <dd data-md>
          <p>null</p>
         <dt data-md><a data-link-type="dfn" href="#permissionspolicyviolationreportbody-disposition" id="ref-for-permissionspolicyviolationreportbody-disposition①">disposition</a>
         <dd data-md>
          <p><var>disposition</var></p>
        </dl>
       <li data-md>
        <p>If the user agent is currently executing script, and can extract the
source file’s URL, line number, and column number from <var>settings</var>, then
set <var>body</var>’s <a data-link-type="dfn" href="#permissionspolicyviolationreportbody-sourcefile" id="ref-for-permissionspolicyviolationreportbody-sourcefile③">sourceFile</a>, <a data-link-type="dfn" href="#permissionspolicyviolationreportbody-linenumber" id="ref-for-permissionspolicyviolationreportbody-linenumber①">lineNumber</a>, and <a data-link-type="dfn" href="#permissionspolicyviolationreportbody-columnnumber" id="ref-for-permissionspolicyviolationreportbody-columnnumber①">columnNumber</a> accordingly.</p>
       <li data-md>
        <p>Execute <a data-link-type="dfn" href="https://w3c.github.io/reporting/#generate-and-queue-a-report" id="ref-for-generate-and-queue-a-report①">generate and queue a report</a> with <var>body</var>,
"permissions-policy-violation", <var>endpoint</var>, and <var>settings</var>.</p>
      </ol>
     </div>
    </section>
    <section>
     <h3 class="heading settled" data-level="9.14" id="algo-report-potential-permissions-policy-violation"><span class="secno">9.14. </span><span class="content"><dfn class="dfn-paneled" data-dfn-type="abstract-op" data-export id="report-potential-permissions-policy-violation">Generate report for potential violation of permissions policy on settings</dfn></span><a class="self-link" href="#algo-report-potential-permissions-policy-violation"></a></h3>
     <div class="algorithm" data-algorithm="report-potential-permissions-policy-violation">
       Given a <a data-link-type="dfn" href="#policy-controlled-feature" id="ref-for-policy-controlled-feature②⑧">feature</a> (<var>feature</var>), an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object" id="ref-for-environment-settings-object③">environment settings object</a> (<var>settings</var>), a string (<var>disposition</var>), a string-or-null (<var>endpoint</var>), and a string-or-null
    (<var>allowAttribute</var>), this algorithm generates a <a data-link-type="dfn" href="https://w3c.github.io/reporting/#report" id="ref-for-report①">report</a> about the <a data-link-type="dfn" href="#violate" id="ref-for-violate⑧">violation</a> of the
    policy for <var>feature</var>. 
      <ol>
       <li data-md>
        <p>Let <var>body</var> be a new <code class="idl"><a data-link-type="idl" href="#permissionspolicyviolationreportbody" id="ref-for-permissionspolicyviolationreportbody②">PermissionsPolicyViolationReportBody</a></code>, initialized
as follows:</p>
        <dl>
         <dt data-md><a data-link-type="dfn" href="#permissionspolicyviolationreportbody-featureid" id="ref-for-permissionspolicyviolationreportbody-featureid①">featureId</a>
         <dd data-md>
          <p><var>feature</var>’s string representation.</p>
         <dt data-md><a data-link-type="dfn" href="#permissionspolicyviolationreportbody-sourcefile" id="ref-for-permissionspolicyviolationreportbody-sourcefile④">sourceFile</a>
         <dd data-md>
          <p>null</p>
         <dt data-md><a data-link-type="dfn" href="#permissionspolicyviolationreportbody-linenumber" id="ref-for-permissionspolicyviolationreportbody-linenumber②">lineNumber</a>
         <dd data-md>
          <p>null</p>
         <dt data-md><a data-link-type="dfn" href="#permissionspolicyviolationreportbody-columnnumber" id="ref-for-permissionspolicyviolationreportbody-columnnumber②">columnNumber</a>
         <dd data-md>
          <p>null</p>
         <dt data-md><a data-link-type="dfn" href="#permissionspolicyviolationreportbody-disposition" id="ref-for-permissionspolicyviolationreportbody-disposition②">disposition</a>
         <dd data-md>
          <p><var>disposition</var></p>
         <dt data-md><a data-link-type="dfn" href="#permissionspolicyviolationreportbody-allowattribute" id="ref-for-permissionspolicyviolationreportbody-allowattribute">allowAttribute</a>
         <dd data-md>
          <p><var>allowAttribute</var></p>
        </dl>
       <li data-md>
        <p>If the user agent is currently executing script, and can extract the
source file’s URL, line number, and column number from <var>settings</var>, then
set <var>body</var>’s <a data-link-type="dfn" href="#permissionspolicyviolationreportbody-sourcefile" id="ref-for-permissionspolicyviolationreportbody-sourcefile⑤">sourceFile</a>, <a data-link-type="dfn" href="#permissionspolicyviolationreportbody-linenumber" id="ref-for-permissionspolicyviolationreportbody-linenumber③">lineNumber</a>, and <a data-link-type="dfn" href="#permissionspolicyviolationreportbody-columnnumber" id="ref-for-permissionspolicyviolationreportbody-columnnumber③">columnNumber</a> accordingly.</p>
       <li data-md>
        <p>Execute <a data-link-type="dfn" href="https://w3c.github.io/reporting/#generate-and-queue-a-report" id="ref-for-generate-and-queue-a-report②">generate and queue a report</a> with <var>body</var>,
"potential-permissions-policy-violation", <var>endpoint</var>, and <var>settings</var>.</p>
      </ol>
     </div>
    </section>
    <section>
     <h3 class="heading settled" data-level="9.15" id="algo-should-request-be-allowed-to-use-feature"><span class="secno">9.15. </span><span class="content"><dfn class="dfn-paneled" data-dfn-type="abstract-op" data-export id="should-request-be-allowed-to-use-feature">Should request be allowed to use feature?</dfn></span><a class="self-link" href="#algo-should-request-be-allowed-to-use-feature"></a></h3>
     <div class="algorithm" data-algorithm="should-request-be-allowed-to-use-feature">
       Given a <a data-link-type="dfn" href="#policy-controlled-feature" id="ref-for-policy-controlled-feature②⑨">feature</a> (<var>feature</var>) and a <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request" id="ref-for-concept-request">request</a> (<var>request</var>),
    this algorithm returns <code>true</code> if the request should be allowed to
    use <var>feature</var>, and <code>false</code> otherwise. 
      <ol>
       <li data-md>
        <p>Set <var>window</var> to <var>request</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-window" id="ref-for-concept-request-window">window</a>.</p>
       <li data-md>
        <p>If <var>window</var> is not a <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window">Window</a></code>, return <code>false</code>.</p>
        <div class="issue" id="issue-154a63d1"><a class="self-link" href="#issue-154a63d1"></a>Permissions Policy within non-Window contexts
 (<code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/workers.html#workerglobalscope" id="ref-for-workerglobalscope">WorkerGlobalScope</a></code> or <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/worklets.html#workletglobalscope" id="ref-for-workletglobalscope">WorkletGlobalScope</a></code>) is being figured out in <a href="https://github.com/w3c/webappsec-permissions-policy/issues/207">issue
 #207</a>. After that’s resolved, update this algorithm to allow fetches
 initiated within these contexts to use policy-controlled features. <em>Until</em> that’s resolved, disallow all policy-controlled features (e.g.,
 sending Client Hints to third parties) in these contexts.</div>
       <li data-md>
        <p>Set <var>document</var> to <var>window</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window" id="ref-for-concept-document-window">associated <code>Document</code></a>.</p>
       <li data-md>
        <p>Let <var>origin</var> be <var>request</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-origin" id="ref-for-concept-request-origin">origin</a>.</p>
       <li data-md>
        <p>Let <var>result</var> be the result of executing <a data-link-type="abstract-op" href="#is-feature-enabled" id="ref-for-is-feature-enabled">Is feature
enabled in document for origin?</a> on <var>feature</var>, <var>document</var>, and <var>origin</var>.</p>
       <li data-md>
        <p>If <var>result</var> is "<code>Enabled</code>", return <code>true</code>.</p>
       <li data-md>
        <p>Otherwise, return <code>false</code>.</p>
      </ol>
     </div>
    </section>
   </section>
   <section>
    <h2 class="heading settled" data-level="10" id="changes-to-other-specifications"><span class="secno">10. </span><span class="content">Changes to other specifications</span><a class="self-link" href="#changes-to-other-specifications"></a></h2>
    <section>
     <h3 class="heading settled" data-level="10.1" id="changes-to-html"><span class="secno">10.1. </span><span class="content">Changes to the HTML specification</span><a class="self-link" href="#changes-to-html"></a></h3>
      Every <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document②①">Document</a></code> has a <dfn class="dfn-paneled" data-dfn-for="Document" data-dfn-type="dfn" data-lt="report-only permissions policy" data-noexport id="document-report-only-permissions-policy">report-only permissions
    policy</dfn>, which is a <a data-link-type="dfn" href="#permissions-policy" id="ref-for-permissions-policy①④">permissions policy</a>, which is initially empty. 
     <p>In <a href="https://html.spec.whatwg.org/#shared-document-creation-infrastructure">7.5.1
    Shared document creation infrastructure</a>, after step 3, insert the
    following step:</p>
     <ol start="4">
      <li data-md>
       <p>Let <var>reportOnlyPermissionsPolicy</var> be the result of calling <a data-link-type="abstract-op" href="#create-from-response" id="ref-for-create-from-response">Create a Permissions Policy for a navigable from
 response</a> given navigationParams’s navigable’s container,
 navigationParams’s origin, navigationParams’s response, and True.</p>
     </ol>
     <p>And in the same section, in step 10, set the new <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document②②">Document</a></code>'s <a data-link-type="dfn" href="#document-report-only-permissions-policy" id="ref-for-document-report-only-permissions-policy④">report-only permissions policy</a> to <var>reportOnlyPermissionsPolicy</var>.</p>
     <p>And in the same section, in step 19 before the return, insert the following step:</p>
     <ol start="19">
      <li data-md>
       <p>If navigationParams’s navigable’s container is not null, call <a data-link-type="abstract-op" href="#check-potential-violation-in-container" id="ref-for-check-potential-violation-in-container">Check potential violation of permissions policy in
  container</a> given navigationParams’s navigable’s container.</p>
     </ol>
    </section>
   </section>
   <section>
    <h2 class="heading settled" data-level="11" id="iana-considerations"><span class="secno">11. </span><span class="content">IANA Considerations</span><a class="self-link" href="#iana-considerations"></a></h2>
    <p>The permanent message header field registry should be updated with the
  following registration <a data-link-type="biblio" href="#biblio-rfc3864" title="Registration Procedures for Message Header Fields">[RFC3864]</a>:</p>
    <dl>
     <dt>Header field name
     <dd>Permissions-Policy
     <dt>Applicable protocol
     <dd>http
     <dt>Status
     <dd>standard
     <dt>Author/Change controller
     <dd>W3C
     <dt>Specification document
     <dd> https://www.w3.org/TR/permissions-policy/ 
    </dl>
   </section>
   <section class="informative" id="privacy">
    <h2 class="heading settled" data-level="12" id="privacy-and-security"><span class="secno">12. </span><span class="content">Privacy and Security</span><a class="self-link" href="#privacy-and-security"></a></h2>
    <p>This specification standardizes a mechanism for an embedding page to set a
  policy which will be enforced on an embedded page. Similar to iframe <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-sandbox" id="ref-for-attr-iframe-sandbox②">sandbox</a></code>, this can be done without the express permission of the
  embedded page, which means that behaviors of existing features can be changed
  in published web sites, by embedding them in another document with an
  appropriate container policy.</p>
    <p>As such, the biggest privacy and security concerns are:</p>
    <ul>
     <li>Exposure of behavior in a cross-origin subframe to its embedder
     <li>Unanticipated behavior changes in subframes controlled by the
    embedder
    </ul>
    <p>To a degree, these concerns are already present in the web platform, and
  this specification attempts to at least not make them needlessly worse.</p>
    <p>Security and privacy issues may also be caused by the design of individual
  features, so care must be taken when integrating with this specification. This
  section attempts to provide some guidance as to what kinds of behaviors could
  cause such issues.</p>
    <h3 class="heading settled" data-level="12.1" id="privacy-expose-behavior"><span class="secno">12.1. </span><span class="content">Exposure of cross-origin behavior</span><a class="self-link" href="#privacy-expose-behavior"></a></h3>
    <p>Features should be designed such that a <a data-link-type="dfn" href="#violate" id="ref-for-violate⑨">violation</a> of the policy in a
  framed document is not observable by documents in other frames. For instance,
  a hypothetical feature which caused a event to be fired in the embedding
  document if it is used while disabled by policy, could be used to extract
  information about the state of an embedded document. If the feature is known
  only to be used while a user is logged in to the site, for instance, then the
  embedder could disable that feature for the frame, and then listen for the
  resulting events to determine whether or not the user is logged in.</p>
    <p>The introspection API is designed to only show information about a
  subframe’s policy which could already be deduced by the embedding document.
  This <a data-link-type="dfn" href="#observable-policy" id="ref-for-observable-policy⑦">observable policy</a> is not affected by any HTTP headers delivered
  with the framed document, and does not change when the frame navigates itself,
  even if such navigation is to a different origin, where a different policy
  applies. Only navigations caused by setting the <code>src</code> attribute of the <code>&lt;iframe></code> element will cause the <a data-link-type="dfn" href="#observable-policy" id="ref-for-observable-policy⑧">observable policy</a> to be updated.</p>
    <h3 class="heading settled" data-level="12.2" id="privacy-alter-behavior"><span class="secno">12.2. </span><span class="content">Unanticipated behavior changes</span><a class="self-link" href="#privacy-alter-behavior"></a></h3>
    <p>The Permissions Policy mechanism grants a document the ability to control
  which features will and will not be availble in a subframe at the time it is
  loaded. When a feature represents an existing, long-standing behavior of the
  web platform, this may mean that existing published content on the web was not
  written with the expectation that a particular API could fail.</p>
    <div class="example" id="example-660fabbf">
     <a class="self-link" href="#example-660fabbf"></a> 
     <p>As a practical (though contrived) example, consider a document which uses
    synchronous XMLHttpRequest to determine whether a user has sufficient
    privileges to access the page:</p>
<pre>&lt;!DOCTYPE html>
&lt;h1>Welcome to SecureCorp!&lt;/h1>
&lt;script>
  var req = new XMLHttpRequest();
  req.open("GET", "/api/security_check.json", false);
  req.send();
  if (req.response == "untrusted user") {
    // User is not logged in; redirect to a safe page
    location.href = "/security_check_failed.html";
  }
&lt;/script>
&lt;!-- Page continues with assumption that user is logged in -->
</pre>
     <p>If this document is embedded by a page which disables the
    "<code>sync-xhr</code>" feature, the call to <code>XMLHttpRequest.open()</code> would
    fail, and the security check would be bypassed.</p>
    </div>
    <p>Note that this sort of behavior forcing is already possible on the web:
  some features are only allowed in top-level documents, and not in any iframes,
  and iframe sandboxing can be used in a similar way to embed a frame without
  access to features which it may be depending on.</p>
    <p>In general, this concern is mitigated in two ways:</p>
    <ul>
     <li>The vulnerable page may be served with an <code>X-Frame-Options</code> HTTP header
    which does not allow it to be framed by an attacker.
     <li>Sites should use feature detection to determine whether an API or
    behavior is available before attempting to use it, and should handle any
    documented errors returned or exceptions thrown by the APIs they call.
     <li>In the case where feature detection is not possible, new web content can
    be written to use the <code>policy</code> object to inspect the permissions policy
    which is currently enforced, and adjust behaviour or user interface
    accordingly.
    </ul>
    <p>Authors integrating their features with Permissions Policy can decide when
  and how the feature will fail when a document attempts to use it while it is
  disabled. Authors should attempt to make use of existing failure modes, when
  they exist, to increase the chance that existing content will already be
  correctly handling such failures.</p>
    <h3 class="heading settled" data-level="12.3" id="privacy-expose-policy"><span class="secno">12.3. </span><span class="content">Exposure of embedding policy</span><a class="self-link" href="#privacy-expose-policy"></a></h3>
    <p>Care has been taken to limit the information which an page can infer about
  the behavior of cross-origin pages which it embeds. It may be possible in some
  scenarios however, for the embedded page to infer information about its
  embedder, by examining the policy which the embedder has enforced on it.</p>
    <p>This is similar to the existing <code>document.fullscreenEnabled</code> property,
  which can be used by the embedded document to infer whether its embedder has
  granted it the ability to use the Fullscreen API. If this is only granted in
  certain cases — when the user is logged in to the embedding site, for
  instance — then the embedded site can learn something about the state of
  its embedder.</p>
   </section>
   <section>
    <h2 class="heading settled" data-level="13" id="change-log"><span class="secno">13. </span><span class="content">Change log</span><a class="self-link" href="#change-log"></a></h2>
    <h3 class="heading settled" data-level="13.1" id="changes-since-fpwd"><span class="secno">13.1. </span><span class="content">Changes since FPWD</span><a class="self-link" href="#changes-since-fpwd"></a></h3>
    <ul>
     <li data-md>
      <p>Expose new algorithms to create a Feature Policy before document is created. <a href="https://github.com/w3c/webappsec-permissions-policy/pull/324">Link</a></p>
     <li data-md>
      <p>Remove algorithms no longer needed. <a href="https://github.com/w3c/webappsec-permissions-policy/pull/325">Link</a></p>
     <li data-md>
      <p>Change same-origin-domain check to same-origin. <a href="https://github.com/w3c/webappsec-permissions-policy/pull/326">Link</a></p>
     <li data-md>
      <p>Change Header and attribute combination from OR to AND semantics. <a href="https://github.com/w3c/webappsec-permissions-policy/pull/378">Link</a></p>
     <li data-md>
      <p>Rename to "Permissions Policy". <a href="https://github.com/w3c/webappsec-permissions-policy/pull/379">Link</a></p>
     <li data-md>
      <p>Define "Permissions-Policy" as a structured header. <a href="https://github.com/w3c/webappsec-permissions-policy/pull/383">Link</a></p>
     <li data-md>
      <p>Editorial fixes.</p>
     <li data-md>
      <p>The <code>allowpaymentrequest</code> attribute was removed due to deprecation by Payment Request API and HTML. <a href="https://github.com/w3c/webappsec-feature-policy/pull/">Link</a></p>
    </ul>
   </section>
  </main>
  <div data-fill-with="conformance">
   <h2 class="no-ref no-num heading settled" id="w3c-conformance"><span class="content">Conformance</span><a class="self-link" href="#w3c-conformance"></a></h2>
   <h3 class="no-ref no-num heading settled" id="w3c-conventions"><span class="content">Document conventions</span><a class="self-link" href="#w3c-conventions"></a></h3>
   <p>Conformance requirements are expressed
    with a combination of descriptive assertions
    and RFC 2119 terminology.
    The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “MAY”, and “OPTIONAL”
    in the normative parts of this document
    are to be interpreted as described in RFC 2119.
    However, for readability,
    these words do not appear in all uppercase letters in this specification. </p>
   <p>All of the text of this specification is normative
    except sections explicitly marked as non-normative, examples, and notes. <a data-link-type="biblio" href="#biblio-rfc2119" title="Key words for use in RFCs to Indicate Requirement Levels">[RFC2119]</a> </p>
   <p>Examples in this specification are introduced with the words “for example”
    or are set apart from the normative text
    with <code>class="example"</code>,
    like this: </p>
   <div class="example" id="w3c-example">
    <a class="self-link" href="#w3c-example"></a> 
    <p>This is an example of an informative example. </p>
   </div>
   <p>Informative notes begin with the word “Note”
    and are set apart from the normative text
    with <code>class="note"</code>,
    like this: </p>
   <p class="note" role="note">Note, this is an informative note.</p>
   <section>
    <h3 class="no-ref no-num heading settled" id="w3c-conformant-algorithms"><span class="content">Conformant Algorithms</span><a class="self-link" href="#w3c-conformant-algorithms"></a></h3>
    <p>Requirements phrased in the imperative as part of algorithms
    (such as "strip any leading space characters"
    or "return false and abort these steps")
    are to be interpreted with the meaning of the key word
    ("must", "should", "may", etc)
    used in introducing the algorithm. </p>
    <p>Conformance requirements phrased as algorithms or specific steps
    can be implemented in any manner,
    so long as the end result is equivalent.
    In particular, the algorithms defined in this specification
    are intended to be easy to understand
    and are not intended to be performant.
    Implementers are encouraged to optimize. </p>
   </section>
  </div>
  <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
   <li><a href="#default-allowlist">*</a><span>, in § 4.8</span>
   <li>
    allowAttribute
    <ul>
     <li><a href="#dom-permissionspolicyviolationreportbody-allowattribute">attribute for PermissionsPolicyViolationReportBody</a><span>, in § 8</span>
     <li><a href="#permissionspolicyviolationreportbody-allowattribute">dfn for PermissionsPolicyViolationReportBody</a><span>, in § 8</span>
    </ul>
   <li><a href="#dom-permissionspolicy-allowedfeatures">allowedFeatures()</a><span>, in § 7.2</span>
   <li><a href="#allow-list">allow-list</a><span>, in § 5.1</span>
   <li><a href="#allowlist">allowlist</a><span>, in § 4.7</span>
   <li><a href="#allowlist">allowlists</a><span>, in § 4.7</span>
   <li><a href="#allow-list-value">allow-list-value</a><span>, in § 5.1</span>
   <li><a href="#dom-permissionspolicy-allowsfeature">allowsFeature(feature)</a><span>, in § 7.2</span>
   <li><a href="#dom-permissionspolicy-allowsfeature">allowsFeature(feature, origin)</a><span>, in § 7.2</span>
   <li><a href="#associated-node">associated node</a><span>, in § 7.2</span>
   <li><a href="#check-permissions-policy">Check permissions policy</a><span>, in § 9.9</span>
   <li><a href="#check-potential-violation-in-container">Check potential violation of permissions policy in container</a><span>, in § 9.12</span>
   <li>
    columnNumber
    <ul>
     <li><a href="#dom-permissionspolicyviolationreportbody-columnnumber">attribute for PermissionsPolicyViolationReportBody</a><span>, in § 8</span>
     <li><a href="#permissionspolicyviolationreportbody-columnnumber">dfn for PermissionsPolicyViolationReportBody</a><span>, in § 8</span>
    </ul>
   <li><a href="#construct-policy">Construct policy from dictionary and origin</a><span>, in § 9.2</span>
   <li><a href="#container-policy">container policy</a><span>, in § 4.5</span>
   <li><a href="#create-for-navigable">Create a Permissions Policy for a navigable</a><span>, in § 9.5</span>
   <li><a href="#create-from-response">Create a Permissions Policy for a navigable from response</a><span>, in § 9.6</span>
   <li><a href="#declared-policy-declarations">declarations</a><span>, in § 4.2</span>
   <li><a href="#declared-origin">declared origin</a><span>, in § 7.2</span>
   <li>
    declared policy
    <ul>
     <li><a href="#declared-policy">definition of</a><span>, in § 4.2</span>
     <li><a href="#permissions-policy-declared-policy">dfn for permissions policy</a><span>, in § 4.2</span>
    </ul>
   <li><a href="#policy-controlled-feature-default-allowlist">default allowlist</a><span>, in § 4.8</span>
   <li><a href="#policy-controlled-feature-default-allowlist">default allowlists</a><span>, in § 4.8</span>
   <li><a href="#default-origin">default origin</a><span>, in § 7.2</span>
   <li><a href="#define-inherited-policy-in-container">Define an inherited policy for feature in container at origin</a><span>, in § 9.7</span>
   <li>
    disposition
    <ul>
     <li><a href="#dom-permissionspolicyviolationreportbody-disposition">attribute for PermissionsPolicyViolationReportBody</a><span>, in § 8</span>
     <li><a href="#permissionspolicyviolationreportbody-disposition">dfn for PermissionsPolicyViolationReportBody</a><span>, in § 8</span>
    </ul>
   <li><a href="#empty-permissions-policy">empty permissions policy</a><span>, in § 4.2</span>
   <li><a href="#expressions">expressions</a><span>, in § 4.7</span>
   <li>
    featureId
    <ul>
     <li><a href="#dom-permissionspolicyviolationreportbody-featureid">attribute for PermissionsPolicyViolationReportBody</a><span>, in § 8</span>
     <li><a href="#permissionspolicyviolationreportbody-featureid">dfn for PermissionsPolicyViolationReportBody</a><span>, in § 8</span>
    </ul>
   <li><a href="#feature-identifier">feature-identifier</a><span>, in § 5.1</span>
   <li><a href="#dom-permissionspolicy-features">features()</a><span>, in § 7.2</span>
   <li><a href="#report-potential-permissions-policy-violation">Generate report for potential violation of permissions policy on settings</a><span>, in § 9.14</span>
   <li><a href="#report-permissions-policy-violation">Generate report for violation of permissions policy on settings</a><span>, in § 9.13</span>
   <li><a href="#dom-permissionspolicy-getallowlistforfeature">getAllowlistForFeature(feature)</a><span>, in § 7.2</span>
   <li><a href="#get-feature-value-for-origin">Get feature value for origin</a><span>, in § 9.8</span>
   <li><a href="#get-reporting-endpoint">Get the reporting endpoint for a feature</a><span>, in § 9.11</span>
   <li><a href="#header-policy">header policy</a><span>, in § 4.4</span>
   <li><a href="#permissions-policy-inherited-policy">inherited policy</a><span>, in § 4.2</span>
   <li><a href="#inherited-policy-for-a-feature">inherited policy for a feature</a><span>, in § 4.3</span>
   <li><a href="#is-feature-enabled">Is feature enabled in document for origin?</a><span>, in § 9.10</span>
   <li>
    lineNumber
    <ul>
     <li><a href="#dom-permissionspolicyviolationreportbody-linenumber">attribute for PermissionsPolicyViolationReportBody</a><span>, in § 8</span>
     <li><a href="#permissionspolicyviolationreportbody-linenumber">dfn for PermissionsPolicyViolationReportBody</a><span>, in § 8</span>
    </ul>
   <li><a href="#matches">matches</a><span>, in § 4.7</span>
   <li><a href="#observable-policy">observable policy</a><span>, in § 7.2</span>
   <li><a href="#parse-policy-directive">Parse policy directive</a><span>, in § 9.3</span>
   <li><a href="#permissions-policy">permissions policy</a><span>, in § 4.2</span>
   <li><a href="#permissions-policy-header">Permissions-Policy</a><span>, in § 6.1</span>
   <li><a href="#permissionspolicy">PermissionsPolicy</a><span>, in § 7.2</span>
   <li>
    permissionsPolicy
    <ul>
     <li><a href="#dom-document-permissionspolicy">attribute for Document</a><span>, in § 7.2</span>
     <li><a href="#dom-htmliframeelement-permissionspolicy">attribute for HTMLIFrameElement</a><span>, in § 7.2</span>
    </ul>
   <li><a href="#permissions-policy-report-only-header">Permissions-Policy-Report-Only</a><span>, in § 8.1</span>
   <li><a href="#permissionspolicyviolationreportbody">PermissionsPolicyViolationReportBody</a><span>, in § 8</span>
   <li><a href="#permissions-policy-violation-reports">Permissions policy violation reports</a><span>, in § 8</span>
   <li><a href="#permissions-source-expression">permissions-source-expression</a><span>, in § 5.1</span>
   <li><a href="#policy-controlled-feature">policy-controlled feature</a><span>, in § 4.1</span>
   <li><a href="#policy-directive">policy directive</a><span>, in § 4.6</span>
   <li><a href="#policy-directive">policy directives</a><span>, in § 4.6</span>
   <li>
    policy object
    <ul>
     <li><a href="#document-policy-object">dfn for Document</a><span>, in § 7.2</span>
     <li><a href="#iframe-policy-object">dfn for iframe</a><span>, in § 7.2</span>
    </ul>
   <li><a href="#process-policy-attributes">Process permissions policy attributes</a><span>, in § 9.4</span>
   <li><a href="#process-response-policy">Process response policy</a><span>, in § 9.1</span>
   <li><a href="#declared-policy-reporting-configuration">reporting configuration</a><span>, in § 4.2</span>
   <li><a href="#document-report-only-permissions-policy">report-only permissions policy</a><span>, in § 10.1</span>
   <li><a href="#default-allowlist-self">'self'</a><span>, in § 4.8</span>
   <li><a href="#self-origin">self-origin</a><span>, in § 4.7</span>
   <li><a href="#serialized-permissions-policy">serialized-permissions-policy</a><span>, in § 5.1</span>
   <li><a href="#serialized-policy-directive">serialized-policy-directive</a><span>, in § 5.1</span>
   <li><a href="#should-request-be-allowed-to-use-feature">Should request be allowed to use feature?</a><span>, in § 9.15</span>
   <li>
    sourceFile
    <ul>
     <li><a href="#dom-permissionspolicyviolationreportbody-sourcefile">attribute for PermissionsPolicyViolationReportBody</a><span>, in § 8</span>
     <li><a href="#permissionspolicyviolationreportbody-sourcefile">dfn for PermissionsPolicyViolationReportBody</a><span>, in § 8</span>
    </ul>
   <li><a href="#src-origin">src-origin</a><span>, in § 4.7</span>
   <li><a href="#supported-features">supported features</a><span>, in § 4.1</span>
   <li><a href="#the-special-value">The special value *</a><span>, in § 4.7</span>
   <li><a href="#dom-permissionspolicyviolationreportbody-tojson">toJSON()</a><span>, in § 8</span>
   <li><a href="#policy-controlled-feature-tokens">tokens</a><span>, in § 4.1</span>
   <li><a href="#violate">violate</a><span>, in § 8</span>
   <li><a href="#violate">violated</a><span>, in § 8</span>
   <li><a href="#violate">violation</a><span>, in § 8</span>
  </ul>
  <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">Terms defined by reference</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
  <ul class="index">
   <li>
    <a data-link-type="biblio">[CSP3]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="5e950891">Does url match expression in origin with redirect count?</span>
     <li><span class="dfn-paneled" id="0950067d">host-source</span>
     <li><span class="dfn-paneled" id="8ea172e9">sandbox</span>
     <li><span class="dfn-paneled" id="d4ec2d19">scheme-source</span>
    </ul>
   <li>
    <a data-link-type="biblio">[DOM]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="85394472">Document</span>
     <li><span class="dfn-paneled" id="296f3551">Element</span>
     <li><span class="dfn-paneled" id="96c16e60">Node</span>
     <li><span class="dfn-paneled" id="a84c14c9">document</span>
     <li><span class="dfn-paneled" id="27d9b7ea">element</span>
     <li><span class="dfn-paneled" id="5216e1a0">node document</span>
     <li><span class="dfn-paneled" id="c62cd7cf">origin</span>
    </ul>
   <li>
    <a data-link-type="biblio">[FETCH]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="5c66de35">get a structured field value</span>
     <li><span class="dfn-paneled" id="f7b00a8b">header list</span>
     <li><span class="dfn-paneled" id="f78d5b5c">origin</span>
     <li><span class="dfn-paneled" id="55213b5b">request</span>
     <li><span class="dfn-paneled" id="e3201629">response</span>
     <li><span class="dfn-paneled" id="1ab127d6">window</span>
    </ul>
   <li>
    <a data-link-type="biblio">[FULLSCREEN]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="bcdb6841">requestFullscreen()</span>
    </ul>
   <li>
    <a data-link-type="biblio">[HTML]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="10e25f42">HTMLIFrameElement</span>
     <li><span class="dfn-paneled" id="5d7209e9">Window</span>
     <li><span class="dfn-paneled" id="83c59a3a">WorkerGlobalScope</span>
     <li><span class="dfn-paneled" id="0c9b0d3c">WorkletGlobalScope</span>
     <li><span class="dfn-paneled" id="35972864">active document</span>
     <li><span class="dfn-paneled" id="57435598">allow</span>
     <li><span class="dfn-paneled" id="06cba118">allowfullscreen</span>
     <li><span class="dfn-paneled" id="3349d69f">associated Document</span>
     <li><span class="dfn-paneled" id="f23dc013">child navigable</span>
     <li><span class="dfn-paneled" id="3ecc7220">content navigable</span>
     <li><span class="dfn-paneled" id="82529e79">descendant navigables</span>
     <li><span class="dfn-paneled" id="3e12e042">environment settings object</span>
     <li><span class="dfn-paneled" id="87fcd40c">iframe</span>
     <li><span class="dfn-paneled" id="9c19b7fc">navigable</span>
     <li><span class="dfn-paneled" id="bf63a402">navigable container</span>
     <li><span class="dfn-paneled" id="b01b1359">opaque origin</span>
     <li><span class="dfn-paneled" id="1bba3db7">parent</span>
     <li><span class="dfn-paneled" id="a41102eb">permissions policy</span>
     <li><span class="dfn-paneled" id="7393da89">same origin</span>
     <li><span class="dfn-paneled" id="521818b9">same origin-domain</span>
     <li><span class="dfn-paneled" id="5c35dd47">sandbox</span>
     <li><span class="dfn-paneled" id="da63e480">sandboxed origin browsing context flag</span>
     <li><span class="dfn-paneled" id="dae0bfde">serialization of an origin</span>
     <li><span class="dfn-paneled" id="deddc6fc">src</span>
     <li><span class="dfn-paneled" id="72ee2843">srcdoc</span>
     <li><span class="dfn-paneled" id="bd736ec6">top-level traversable</span>
    </ul>
   <li>
    <a data-link-type="biblio">[INFRA]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="53275e46">append</span>
     <li><span class="dfn-paneled" id="7f9469b5">ASCII case-insensitive</span>
     <li><span class="dfn-paneled" id="a326add7">contain</span>
     <li><span class="dfn-paneled" id="f937b7b6">continue</span>
     <li><span class="dfn-paneled" id="1243a891">exist</span>
     <li><span class="dfn-paneled" id="16d07e10">for each <small>(for list)</small></span>
     <li><span class="dfn-paneled" id="45209803">for each <small>(for map)</small></span>
     <li><span class="dfn-paneled" id="c88f3887">item</span>
     <li><span class="dfn-paneled" id="649608b9">list</span>
     <li><span class="dfn-paneled" id="84b454ff">ordered map</span>
     <li><span class="dfn-paneled" id="0e6b2056">set</span>
     <li><span class="dfn-paneled" id="a682cc44">split on ASCII whitespace</span>
     <li><span class="dfn-paneled" id="e5fc5b88">strictly split</span>
     <li><span class="dfn-paneled" id="0698d556">string</span>
     <li><span class="dfn-paneled" id="984221ca">struct</span>
    </ul>
   <li>
    <a data-link-type="biblio">[MEDIACAPTURE-STREAMS]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="eca80770">getUserMedia()</span>
    </ul>
   <li>
    <a data-link-type="biblio">[PERMISSIONS]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="6c2d7879">powerful feature</span>
    </ul>
   <li>
    <a data-link-type="biblio">[REPORTING-1]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="188c6617">ReportBody</span>
     <li><span class="dfn-paneled" id="cf363990">body</span>
     <li><span class="dfn-paneled" id="7ed9d314">generate and queue a report</span>
     <li><span class="dfn-paneled" id="9fe8836b">report</span>
     <li><span class="dfn-paneled" id="4d5cebba">report type</span>
     <li><span class="dfn-paneled" id="3c4b330a">visible to reportingobservers</span>
    </ul>
   <li>
    <a data-link-type="biblio">[RFC8941]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="92871e3b">sf-dictionary</span>
    </ul>
   <li>
    <a data-link-type="biblio">[URL]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="959ad97b">origin</span>
     <li><span class="dfn-paneled" id="ca3ca4ae">URL parser</span>
    </ul>
   <li>
    <a data-link-type="biblio">[WEBIDL]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="8855a9aa">DOMString</span>
     <li><span class="dfn-paneled" id="f4531911">Default</span>
     <li><span class="dfn-paneled" id="889e932f">Exposed</span>
     <li><span class="dfn-paneled" id="a5c91173">SameObject</span>
     <li><span class="dfn-paneled" id="5372cca8">boolean</span>
     <li><span class="dfn-paneled" id="f8de33a3">long</span>
     <li><span class="dfn-paneled" id="efd1ec5d">object</span>
     <li><span class="dfn-paneled" id="9cce47fd">sequence</span>
    </ul>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-csp3">[CSP3]
   <dd>Mike West; Antonio Sartori. <a href="https://w3c.github.io/webappsec-csp/"><cite>Content Security Policy Level 3</cite></a>. URL: <a href="https://w3c.github.io/webappsec-csp/">https://w3c.github.io/webappsec-csp/</a>
   <dt id="biblio-dom">[DOM]
   <dd>Anne van Kesteren. <a href="https://dom.spec.whatwg.org/"><cite>DOM Standard</cite></a>. Living Standard. URL: <a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
   <dt id="biblio-fetch">[FETCH]
   <dd>Anne van Kesteren. <a href="https://fetch.spec.whatwg.org/"><cite>Fetch Standard</cite></a>. Living Standard. URL: <a href="https://fetch.spec.whatwg.org/">https://fetch.spec.whatwg.org/</a>
   <dt id="biblio-fullscreen">[FULLSCREEN]
   <dd>Philip Jägenstedt. <a href="https://fullscreen.spec.whatwg.org/"><cite>Fullscreen API Standard</cite></a>. Living Standard. URL: <a href="https://fullscreen.spec.whatwg.org/">https://fullscreen.spec.whatwg.org/</a>
   <dt id="biblio-html">[HTML]
   <dd>Anne van Kesteren; et al. <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML Standard</cite></a>. Living Standard. URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
   <dt id="biblio-infra">[INFRA]
   <dd>Anne van Kesteren; Domenic Denicola. <a href="https://infra.spec.whatwg.org/"><cite>Infra Standard</cite></a>. Living Standard. URL: <a href="https://infra.spec.whatwg.org/">https://infra.spec.whatwg.org/</a>
   <dt id="biblio-reporting-1">[REPORTING-1]
   <dd>Douglas Creager; Ian Clelland; Mike West. <a href="https://w3c.github.io/reporting/"><cite>Reporting API</cite></a>. URL: <a href="https://w3c.github.io/reporting/">https://w3c.github.io/reporting/</a>
   <dt id="biblio-rfc2119">[RFC2119]
   <dd>S. Bradner. <a href="https://datatracker.ietf.org/doc/html/rfc2119"><cite>Key words for use in RFCs to Indicate Requirement Levels</cite></a>. March 1997. Best Current Practice. URL: <a href="https://datatracker.ietf.org/doc/html/rfc2119">https://datatracker.ietf.org/doc/html/rfc2119</a>
   <dt id="biblio-rfc3864">[RFC3864]
   <dd>G. Klyne; M. Nottingham; J. Mogul. <a href="https://www.rfc-editor.org/rfc/rfc3864"><cite>Registration Procedures for Message Header Fields</cite></a>. September 2004. Best Current Practice. URL: <a href="https://www.rfc-editor.org/rfc/rfc3864">https://www.rfc-editor.org/rfc/rfc3864</a>
   <dt id="biblio-rfc8941">[RFC8941]
   <dd>M. Nottingham; P-H. Kamp. <a href="https://httpwg.org/specs/rfc8941.html"><cite>Structured Field Values for HTTP</cite></a>. February 2021. Proposed Standard. URL: <a href="https://httpwg.org/specs/rfc8941.html">https://httpwg.org/specs/rfc8941.html</a>
   <dt id="biblio-url">[URL]
   <dd>Anne van Kesteren. <a href="https://url.spec.whatwg.org/"><cite>URL Standard</cite></a>. Living Standard. URL: <a href="https://url.spec.whatwg.org/">https://url.spec.whatwg.org/</a>
   <dt id="biblio-webidl">[WEBIDL]
   <dd>Edgar Chen; Timothy Gu. <a href="https://webidl.spec.whatwg.org/"><cite>Web IDL Standard</cite></a>. Living Standard. URL: <a href="https://webidl.spec.whatwg.org/">https://webidl.spec.whatwg.org/</a>
  </dl>
  <h3 class="no-num no-ref heading settled" id="informative"><span class="content">Informative References</span><a class="self-link" href="#informative"></a></h3>
  <dl>
   <dt id="biblio-csp2">[CSP2]
   <dd>Mike West; Adam Barth; Daniel Veditz. <a href="https://w3c.github.io/webappsec-csp/"><cite>Content Security Policy Level 2</cite></a>. URL: <a href="https://w3c.github.io/webappsec-csp/">https://w3c.github.io/webappsec-csp/</a>
   <dt id="biblio-html5">[HTML5]
   <dd>Ian Hickson; et al. <a href="https://www.w3.org/TR/html5/"><cite>HTML5</cite></a>. 27 March 2018. REC. URL: <a href="https://www.w3.org/TR/html5/">https://www.w3.org/TR/html5/</a>
   <dt id="biblio-mediacapture-streams">[MEDIACAPTURE-STREAMS]
   <dd>Cullen Jennings; et al. <a href="https://w3c.github.io/mediacapture-main/"><cite>Media Capture and Streams</cite></a>. URL: <a href="https://w3c.github.io/mediacapture-main/">https://w3c.github.io/mediacapture-main/</a>
   <dt id="biblio-permissions">[PERMISSIONS]
   <dd>Marcos Caceres; Mike Taylor. <a href="https://w3c.github.io/permissions/"><cite>Permissions</cite></a>. URL: <a href="https://w3c.github.io/permissions/">https://w3c.github.io/permissions/</a>
  </dl>
  <h2 class="no-num no-ref heading settled" id="idl-index"><span class="content">IDL Index</span><a class="self-link" href="#idl-index"></a></h2>
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <a href="#permissionspolicy"><code><c- g>PermissionsPolicy</c-></code></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a href="#dom-permissionspolicy-allowsfeature"><code><c- g>allowsFeature</c-></code></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a href="#dom-permissionspolicy-allowsfeature-feature-origin-feature"><code><c- g>feature</c-></code></a>, <c- b>optional</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a href="#dom-permissionspolicy-allowsfeature-feature-origin-origin"><code><c- g>origin</c-></code></a>);
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a>> <a href="#dom-permissionspolicy-features"><code><c- g>features</c-></code></a>();
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a>> <a href="#dom-permissionspolicy-allowedfeatures"><code><c- g>allowedFeatures</c-></code></a>();
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a>> <a href="#dom-permissionspolicy-getallowlistforfeature"><code><c- g>getAllowlistForFeature</c-></code></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a href="#dom-permissionspolicy-getallowlistforfeature-feature-feature"><code><c- g>feature</c-></code></a>);
};

<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://dom.spec.whatwg.org/#document"><c- g>Document</c-></a> {
    [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SameObject"><c- g>SameObject</c-></a>] <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#permissionspolicy"><c- n>PermissionsPolicy</c-></a> <a data-readonly data-type="PermissionsPolicy" href="#dom-document-permissionspolicy"><code><c- g>permissionsPolicy</c-></code></a>;
};

<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#htmliframeelement"><c- g>HTMLIFrameElement</c-></a> {
    [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SameObject"><c- g>SameObject</c-></a>] <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#permissionspolicy"><c- n>PermissionsPolicy</c-></a> <a data-readonly data-type="PermissionsPolicy" href="#dom-htmliframeelement-permissionspolicy"><code><c- g>permissionsPolicy</c-></code></a>;
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <a href="#permissionspolicyviolationreportbody"><code><c- g>PermissionsPolicyViolationReportBody</c-></code></a> : <a data-link-type="idl-name" href="https://w3c.github.io/reporting/#reportbody"><c- n>ReportBody</c-></a> {
  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Default"><c- g>Default</c-></a>] <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-object"><c- b>object</c-></a> <a href="#dom-permissionspolicyviolationreportbody-tojson"><code><c- g>toJSON</c-></code></a>();
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a data-readonly data-type="DOMString" href="#dom-permissionspolicyviolationreportbody-featureid"><code><c- g>featureId</c-></code></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a>? <a data-readonly data-type="DOMString?" href="#dom-permissionspolicyviolationreportbody-sourcefile"><code><c- g>sourceFile</c-></code></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-long"><c- b>long</c-></a>? <a data-readonly data-type="long?" href="#dom-permissionspolicyviolationreportbody-linenumber"><code><c- g>lineNumber</c-></code></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-long"><c- b>long</c-></a>? <a data-readonly data-type="long?" href="#dom-permissionspolicyviolationreportbody-columnnumber"><code><c- g>columnNumber</c-></code></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a data-readonly data-type="DOMString" href="#dom-permissionspolicyviolationreportbody-disposition"><code><c- g>disposition</c-></code></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a>? <a data-readonly data-type="DOMString?" href="#dom-permissionspolicyviolationreportbody-allowattribute"><code><c- g>allowAttribute</c-></code></a>;
};

</pre>
  <h2 class="no-num no-ref heading settled" id="issues-index"><span class="content">Issues Index</span><a class="self-link" href="#issues-index"></a></h2>
  <div style="counter-reset:issue">
   <div class="issue">This spec currently only deals with features defined in
    Documents. We should figure out how to word this to include the possibility
    of features and permissions policies in Workers and Worklets as well. <a class="issue-return" href="#issue-4ecdbcc2" title="Jump to section">↵</a></div>
   <div class="issue">Permissions Policy within non-Window contexts
 (<code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/workers.html#workerglobalscope">WorkerGlobalScope</a></code> or <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/worklets.html#workletglobalscope">WorkletGlobalScope</a></code>) is being figured out in <a href="https://github.com/w3c/webappsec-permissions-policy/issues/207">issue
 #207</a>. After that’s resolved, update this algorithm to allow fetches
 initiated within these contexts to use policy-controlled features. <em>Until</em> that’s resolved, disallow all policy-controlled features (e.g.,
 sending Client Hints to third parties) in these contexts. <a class="issue-return" href="#issue-154a63d1" title="Jump to section">↵</a></div>
  </div>
  <details class="mdn-anno unpositioned" data-anno-for="permissions-policy-http-header-field">
   <summary><b class="less-than-two-engines-flag" title="This feature is in less than two current engines.">⚠</b><span>MDN</span></summary>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Feature-Policy" title="The HTTP Permissions-Policy header provides a mechanism to allow and deny the use of browser features in a document or within any <iframe> elements in the document.">Headers/Feature-Policy</a></p>
    <p class="less-than-two-engines-text">In only one current engine.</p>
    <div class="support">
     <span class="firefox no"><span>Firefox</span><span>None</span></span><span class="safari no"><span>Safari</span><span>None</span></span><span class="chrome yes"><span>Chrome</span><span>60+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>79+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
   <div class="feature">
    <p><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Permissions-Policy" title="The HTTP Permissions-Policy header provides a mechanism to allow and deny the use of browser features in a document or within any <iframe> elements in the document.">Headers/Permissions-Policy</a></p>
    <p class="less-than-two-engines-text">In only one current engine.</p>
    <div class="support">
     <span class="firefox no"><span>Firefox</span><span>None</span></span><span class="safari no"><span>Safari</span><span>None</span></span><span class="chrome yes"><span>Chrome</span><span>88+</span></span>
     <hr>
     <span class="opera no"><span>Opera</span><span>?</span></span><span class="edge_blink yes"><span>Edge</span><span>88+</span></span>
     <hr>
     <span class="edge no"><span>Edge (Legacy)</span><span>?</span></span><span class="ie no"><span>IE</span><span>None</span></span>
     <hr>
     <span class="firefox_android no"><span>Firefox for Android</span><span>?</span></span><span class="safari_ios no"><span>iOS Safari</span><span>?</span></span><span class="chrome_android no"><span>Chrome for Android</span><span>?</span></span><span class="webview_android no"><span>Android WebView</span><span>?</span></span><span class="samsunginternet_android no"><span>Samsung Internet</span><span>?</span></span><span class="opera_android no"><span>Opera Mobile</span><span>?</span></span>
    </div>
   </div>
  </details>
<script>/* Boilerplate: script-dom-helper */
"use strict";
function query(sel) { return document.querySelector(sel); }

function queryAll(sel) { return [...document.querySelectorAll(sel)]; }

function iter(obj) {
	if(!obj) return [];
	var it = obj[Symbol.iterator];
	if(it) return it;
	return Object.entries(obj);
}

function mk(tagname, attrs, ...children) {
	const el = document.createElement(tagname);
	for(const [k,v] of iter(attrs)) {
		if(k.slice(0,3) == "_on") {
			const eventName = k.slice(3);
			el.addEventListener(eventName, v);
		} else if(k[0] == "_") {
			// property, not attribute
			el[k.slice(1)] = v;
		} else {
			if(v === false || v == null) {
        continue;
      } else if(v === true) {
        el.setAttribute(k, "");
        continue;
      } else {
  			el.setAttribute(k, v);
      }
		}
	}
	append(el, children);
	return el;
}

/* Create shortcuts for every known HTML element */
[
  "a",
  "abbr",
  "acronym",
  "address",
  "applet",
  "area",
  "article",
  "aside",
  "audio",
  "b",
  "base",
  "basefont",
  "bdo",
  "big",
  "blockquote",
  "body",
  "br",
  "button",
  "canvas",
  "caption",
  "center",
  "cite",
  "code",
  "col",
  "colgroup",
  "datalist",
  "dd",
  "del",
  "details",
  "dfn",
  "dialog",
  "div",
  "dl",
  "dt",
  "em",
  "embed",
  "fieldset",
  "figcaption",
  "figure",
  "font",
  "footer",
  "form",
  "frame",
  "frameset",
  "head",
  "header",
  "h1",
  "h2",
  "h3",
  "h4",
  "h5",
  "h6",
  "hr",
  "html",
  "i",
  "iframe",
  "img",
  "input",
  "ins",
  "kbd",
  "label",
  "legend",
  "li",
  "link",
  "main",
  "map",
  "mark",
  "meta",
  "meter",
  "nav",
  "nobr",
  "noscript",
  "object",
  "ol",
  "optgroup",
  "option",
  "output",
  "p",
  "param",
  "pre",
  "progress",
  "q",
  "s",
  "samp",
  "script",
  "section",
  "select",
  "small",
  "source",
  "span",
  "strike",
  "strong",
  "style",
  "sub",
  "summary",
  "sup",
  "table",
  "tbody",
  "td",
  "template",
  "textarea",
  "tfoot",
  "th",
  "thead",
  "time",
  "title",
  "tr",
  "u",
  "ul",
  "var",
  "video",
  "wbr",
  "xmp",
].forEach(tagname=>{
	mk[tagname] = (...args) => mk(tagname, ...args);
});

function* nodesFromChildList(children) {
	for(const child of children.flat(Infinity)) {
		if(child instanceof Node) {
			yield child;
		} else {
			yield new Text(child);
		}
	}
}
function append(el, ...children) {
	for(const child of nodesFromChildList(children)) {
		if(el instanceof Node) el.appendChild(child);
		else el.push(child);
	}
	return el;
}

function insertAfter(el, ...children) {
	for(const child of nodesFromChildList(children)) {
		el.parentNode.insertBefore(child, el.nextSibling);
	}
	return el;
}

function clearContents(el) {
	el.innerHTML = "";
	return el;
}

function parseHTML(markup) {
	if(markup.toLowerCase().trim().indexOf('<!doctype') === 0) {
		const doc = document.implementation.createHTMLDocument("");
		doc.documentElement.innerHTML = markup;
		return doc;
	} else {
		const el = mk.template({});
		el.innerHTML = markup;
		return el.content;
	}
}</script>
<script>/* Boilerplate: script-dfn-panel */
"use strict";
{
let dfnPanelData = {
"0698d556": {"dfnID":"0698d556","dfnText":"string","external":true,"refSections":[{"refs":[{"id":"ref-for-string"}],"title":"4.2. Policies"}],"url":"https://infra.spec.whatwg.org/#string"},
"06cba118": {"dfnID":"06cba118","dfnText":"allowfullscreen","external":true,"refSections":[{"refs":[{"id":"ref-for-attr-iframe-allowfullscreen"}],"title":"4.5. Container policies"},{"refs":[{"id":"ref-for-attr-iframe-allowfullscreen\u2460"},{"id":"ref-for-attr-iframe-allowfullscreen\u2461"},{"id":"ref-for-attr-iframe-allowfullscreen\u2462"}],"title":"6.3.1. allowfullscreen"},{"refs":[{"id":"ref-for-attr-iframe-allowfullscreen\u2463"}],"title":"9.4. Process permissions policy attributes"}],"url":"https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-allowfullscreen"},
"0950067d": {"dfnID":"0950067d","dfnText":"host-source","external":true,"refSections":[{"refs":[{"id":"ref-for-grammardef-host-source"}],"title":"5.1. HTML attribute serialization"}],"url":"https://w3c.github.io/webappsec-csp/#grammardef-host-source"},
"0c9b0d3c": {"dfnID":"0c9b0d3c","dfnText":"WorkletGlobalScope","external":true,"refSections":[{"refs":[{"id":"ref-for-workletglobalscope"}],"title":"9.15. Should request be allowed to use feature?"}],"url":"https://html.spec.whatwg.org/multipage/worklets.html#workletglobalscope"},
"0e6b2056": {"dfnID":"0e6b2056","dfnText":"set","external":true,"refSections":[{"refs":[{"id":"ref-for-map-set"}],"title":"9.4. Process permissions policy attributes"}],"url":"https://infra.spec.whatwg.org/#map-set"},
"10e25f42": {"dfnID":"10e25f42","dfnText":"HTMLIFrameElement","external":true,"refSections":[{"refs":[{"id":"ref-for-htmliframeelement"}],"title":"7.2. The permissionsPolicy object"}],"url":"https://html.spec.whatwg.org/multipage/iframe-embed-object.html#htmliframeelement"},
"1243a891": {"dfnID":"1243a891","dfnText":"exist","external":true,"refSections":[{"refs":[{"id":"ref-for-map-exists"}],"title":"9.4. Process permissions policy attributes"},{"refs":[{"id":"ref-for-map-exists\u2460"}],"title":"9.7. Define an inherited policy for feature in container at origin"}],"url":"https://infra.spec.whatwg.org/#map-exists"},
"16d07e10": {"dfnID":"16d07e10","dfnText":"for each (for list)","external":true,"refSections":[{"refs":[{"id":"ref-for-list-iterate"}],"title":"4.7. Allowlists"},{"refs":[{"id":"ref-for-list-iterate\u2460"}],"title":"7.2. The permissionsPolicy object"},{"refs":[{"id":"ref-for-list-iterate\u2461"}],"title":"9.2. Construct policy from dictionary and origin"},{"refs":[{"id":"ref-for-list-iterate\u2462"}],"title":"9.5. Create a Permissions Policy for a navigable"},{"refs":[{"id":"ref-for-list-iterate\u2463"}],"title":"9.12. Check potential violation of permissions policy in container"}],"url":"https://infra.spec.whatwg.org/#list-iterate"},
"188c6617": {"dfnID":"188c6617","dfnText":"ReportBody","external":true,"refSections":[{"refs":[{"id":"ref-for-reportbody"}],"title":"8. Reporting"}],"url":"https://w3c.github.io/reporting/#reportbody"},
"1ab127d6": {"dfnID":"1ab127d6","dfnText":"window","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-request-window"}],"title":"9.15. Should request be allowed to use feature?"}],"url":"https://fetch.spec.whatwg.org/#concept-request-window"},
"1bba3db7": {"dfnID":"1bba3db7","dfnText":"parent","external":true,"refSections":[{"refs":[{"id":"ref-for-nav-parent"},{"id":"ref-for-nav-parent\u2460"}],"title":"4.8. Default Allowlists"}],"url":"https://html.spec.whatwg.org/multipage/document-sequences.html#nav-parent"},
"27d9b7ea": {"dfnID":"27d9b7ea","dfnText":"element","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-element"}],"title":"9.5. Create a Permissions Policy for a navigable"}],"url":"https://dom.spec.whatwg.org/#concept-element"},
"296f3551": {"dfnID":"296f3551","dfnText":"Element","external":true,"refSections":[{"refs":[{"id":"ref-for-element"},{"id":"ref-for-element\u2460"}],"title":"7.2. The permissionsPolicy object"}],"url":"https://dom.spec.whatwg.org/#element"},
"3349d69f": {"dfnID":"3349d69f","dfnText":"associated Document","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-document-window"}],"title":"9.15. Should request be allowed to use feature?"}],"url":"https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window"},
"35972864": {"dfnID":"35972864","dfnText":"active document","external":true,"refSections":[{"refs":[{"id":"ref-for-nav-document"},{"id":"ref-for-nav-document\u2460"},{"id":"ref-for-nav-document\u2461"},{"id":"ref-for-nav-document\u2462"},{"id":"ref-for-nav-document\u2463"}],"title":"4.8. Default Allowlists"}],"url":"https://html.spec.whatwg.org/multipage/document-sequences.html#nav-document"},
"3c4b330a": {"dfnID":"3c4b330a","dfnText":"visible to reportingobservers","external":true,"refSections":[{"refs":[{"id":"ref-for-visible-to-reportingobservers"}],"title":"8. Reporting"}],"url":"https://w3c.github.io/reporting/#visible-to-reportingobservers"},
"3e12e042": {"dfnID":"3e12e042","dfnText":"environment settings object","external":true,"refSections":[{"refs":[{"id":"ref-for-environment-settings-object"}],"title":"9.10. Is feature enabled in document for origin?"},{"refs":[{"id":"ref-for-environment-settings-object\u2460"}],"title":"9.12. Check potential violation of permissions policy in container"},{"refs":[{"id":"ref-for-environment-settings-object\u2461"}],"title":"9.13. Generate report for violation of permissions policy on settings"},{"refs":[{"id":"ref-for-environment-settings-object\u2462"}],"title":"9.14. Generate report for potential violation of permissions policy on settings"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object"},
"3ecc7220": {"dfnID":"3ecc7220","dfnText":"content navigable","external":true,"refSections":[{"refs":[{"id":"ref-for-content-navigable"}],"title":"6.2. The allow attribute of the iframe element"},{"refs":[{"id":"ref-for-content-navigable\u2460"}],"title":"6.3. Additional attributes to support legacy features"},{"refs":[{"id":"ref-for-content-navigable\u2461"}],"title":"6.3.1. allowfullscreen"}],"url":"https://html.spec.whatwg.org/multipage/document-sequences.html#content-navigable"},
"45209803": {"dfnID":"45209803","dfnText":"for each (for map)","external":true,"refSections":[{"refs":[{"id":"ref-for-map-iterate"}],"title":"9.2. Construct policy from dictionary and origin"}],"url":"https://infra.spec.whatwg.org/#map-iterate"},
"4d5cebba": {"dfnID":"4d5cebba","dfnText":"report type","external":true,"refSections":[{"refs":[{"id":"ref-for-report-type"}],"title":"8. Reporting"}],"url":"https://w3c.github.io/reporting/#report-type"},
"5216e1a0": {"dfnID":"5216e1a0","dfnText":"node document","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-node-document"},{"id":"ref-for-concept-node-document\u2460"},{"id":"ref-for-concept-node-document\u2461"},{"id":"ref-for-concept-node-document\u2462"}],"title":"7.2. The permissionsPolicy object"},{"refs":[{"id":"ref-for-concept-node-document\u2463"}],"title":"9.4. Process permissions policy attributes"},{"refs":[{"id":"ref-for-concept-node-document\u2464"},{"id":"ref-for-concept-node-document\u2465"},{"id":"ref-for-concept-node-document\u2466"},{"id":"ref-for-concept-node-document\u2467"}],"title":"9.7. Define an inherited policy for feature in container at origin"},{"refs":[{"id":"ref-for-concept-node-document\u2468"}],"title":"9.12. Check potential violation of permissions policy in container"}],"url":"https://dom.spec.whatwg.org/#concept-node-document"},
"521818b9": {"dfnID":"521818b9","dfnText":"same origin-domain","external":true,"refSections":[{"refs":[{"id":"ref-for-same-origin-domain"},{"id":"ref-for-same-origin-domain\u2460"}],"title":"4.7. Allowlists"}],"url":"https://html.spec.whatwg.org/multipage/browsers.html#same-origin-domain"},
"53275e46": {"dfnID":"53275e46","dfnText":"append","external":true,"refSections":[{"refs":[{"id":"ref-for-list-append"}],"title":"9.2. Construct policy from dictionary and origin"},{"refs":[{"id":"ref-for-list-append\u2460"}],"title":"9.3. Parse policy directive"}],"url":"https://infra.spec.whatwg.org/#list-append"},
"5372cca8": {"dfnID":"5372cca8","dfnText":"boolean","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-boolean"}],"title":"7.2. The permissionsPolicy object"}],"url":"https://webidl.spec.whatwg.org/#idl-boolean"},
"55213b5b": {"dfnID":"55213b5b","dfnText":"request","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-request"}],"title":"9.15. Should request be allowed to use feature?"}],"url":"https://fetch.spec.whatwg.org/#concept-request"},
"57435598": {"dfnID":"57435598","dfnText":"allow","external":true,"refSections":[{"refs":[{"id":"ref-for-attr-iframe-allow"},{"id":"ref-for-attr-iframe-allow\u2460"}],"title":"2. Examples"},{"refs":[{"id":"ref-for-attr-iframe-allow\u2461"}],"title":"4.5. Container policies"},{"refs":[{"id":"ref-for-attr-iframe-allow\u2462"},{"id":"ref-for-attr-iframe-allow\u2463"}],"title":"6.2. The allow attribute of the iframe element"},{"refs":[{"id":"ref-for-attr-iframe-allow\u2464"}],"title":"6.3.1. allowfullscreen"},{"refs":[{"id":"ref-for-attr-iframe-allow\u2465"}],"title":"8. Reporting"},{"refs":[{"id":"ref-for-attr-iframe-allow\u2466"}],"title":"9.4. Process permissions policy attributes"}],"url":"https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-allow"},
"5c35dd47": {"dfnID":"5c35dd47","dfnText":"sandbox","external":true,"refSections":[{"refs":[{"id":"ref-for-attr-iframe-sandbox"}],"title":"3. Other and related mechanisms"},{"refs":[{"id":"ref-for-attr-iframe-sandbox\u2460"}],"title":"7.2. The permissionsPolicy object"},{"refs":[{"id":"ref-for-attr-iframe-sandbox\u2461"}],"title":"12. Privacy and Security"}],"url":"https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-sandbox"},
"5c66de35": {"dfnID":"5c66de35","dfnText":"get a structured field value","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-header-list-get-structured-header"}],"title":"9.1. Process response policy"}],"url":"https://fetch.spec.whatwg.org/#concept-header-list-get-structured-header"},
"5d7209e9": {"dfnID":"5d7209e9","dfnText":"Window","external":true,"refSections":[{"refs":[{"id":"ref-for-window"}],"title":"9.15. Should request be allowed to use feature?"}],"url":"https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"},
"5e950891": {"dfnID":"5e950891","dfnText":"Does url match expression in origin with redirect count?","external":true,"refSections":[{"refs":[{"id":"ref-for-match-url-to-source-expression"}],"title":"4.7. Allowlists"}],"url":"https://w3c.github.io/webappsec-csp/#match-url-to-source-expression"},
"649608b9": {"dfnID":"649608b9","dfnText":"list","external":true,"refSections":[{"refs":[{"id":"ref-for-list"}],"title":"9.2. Construct policy from dictionary and origin"}],"url":"https://infra.spec.whatwg.org/#list"},
"6c2d7879": {"dfnID":"6c2d7879","dfnText":"powerful feature","external":true,"refSections":[{"refs":[{"id":"ref-for-dfn-powerful-feature"},{"id":"ref-for-dfn-powerful-feature\u2460"}],"title":"2. Examples"}],"url":"https://w3c.github.io/permissions/#dfn-powerful-feature"},
"72ee2843": {"dfnID":"72ee2843","dfnText":"srcdoc","external":true,"refSections":[{"refs":[{"id":"ref-for-attr-iframe-srcdoc"}],"title":"7.2. The permissionsPolicy object"}],"url":"https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-srcdoc"},
"7393da89": {"dfnID":"7393da89","dfnText":"same origin","external":true,"refSections":[{"refs":[{"id":"ref-for-same-origin"}],"title":"2. Examples"},{"refs":[{"id":"ref-for-same-origin\u2460"}],"title":"4.8. Default Allowlists"},{"refs":[{"id":"ref-for-same-origin\u2461"}],"title":"9.7. Define an inherited policy for feature in container at origin"},{"refs":[{"id":"ref-for-same-origin\u2462"}],"title":"9.9. Check permissions policy"}],"url":"https://html.spec.whatwg.org/multipage/browsers.html#same-origin"},
"7ed9d314": {"dfnID":"7ed9d314","dfnText":"generate and queue a report","external":true,"refSections":[{"refs":[{"id":"ref-for-generate-and-queue-a-report"}],"title":"9.10. Is feature enabled in document for origin?"},{"refs":[{"id":"ref-for-generate-and-queue-a-report\u2460"}],"title":"9.13. Generate report for violation of permissions policy on settings"},{"refs":[{"id":"ref-for-generate-and-queue-a-report\u2461"}],"title":"9.14. Generate report for potential violation of permissions policy on settings"}],"url":"https://w3c.github.io/reporting/#generate-and-queue-a-report"},
"7f9469b5": {"dfnID":"7f9469b5","dfnText":"ASCII case-insensitive","external":true,"refSections":[{"refs":[{"id":"ref-for-ascii-case-insensitive"},{"id":"ref-for-ascii-case-insensitive\u2460"}],"title":"9.3. Parse policy directive"}],"url":"https://infra.spec.whatwg.org/#ascii-case-insensitive"},
"82529e79": {"dfnID":"82529e79","dfnText":"descendant navigables","external":true,"refSections":[{"refs":[{"id":"ref-for-descendant-navigables"}],"title":"2. Examples"}],"url":"https://html.spec.whatwg.org/multipage/document-sequences.html#descendant-navigables"},
"83c59a3a": {"dfnID":"83c59a3a","dfnText":"WorkerGlobalScope","external":true,"refSections":[{"refs":[{"id":"ref-for-workerglobalscope"}],"title":"9.15. Should request be allowed to use feature?"}],"url":"https://html.spec.whatwg.org/multipage/workers.html#workerglobalscope"},
"84b454ff": {"dfnID":"84b454ff","dfnText":"ordered map","external":true,"refSections":[{"refs":[{"id":"ref-for-ordered-map"},{"id":"ref-for-ordered-map\u2460"},{"id":"ref-for-ordered-map\u2461"},{"id":"ref-for-ordered-map\u2462"}],"title":"4.2. Policies"},{"refs":[{"id":"ref-for-ordered-map\u2463"}],"title":"4.6. Policy directives"},{"refs":[{"id":"ref-for-ordered-map\u2464"},{"id":"ref-for-ordered-map\u2465"}],"title":"7.2. The permissionsPolicy object"},{"refs":[{"id":"ref-for-ordered-map\u2466"}],"title":"9.1. Process response policy"},{"refs":[{"id":"ref-for-ordered-map\u2467"},{"id":"ref-for-ordered-map\u2468"},{"id":"ref-for-ordered-map\u2460\u24ea"}],"title":"9.2. Construct policy from dictionary and origin"},{"refs":[{"id":"ref-for-ordered-map\u2460\u2460"}],"title":"9.3. Parse policy directive"},{"refs":[{"id":"ref-for-ordered-map\u2460\u2461"}],"title":"9.5. Create a Permissions Policy for a navigable"}],"url":"https://infra.spec.whatwg.org/#ordered-map"},
"85394472": {"dfnID":"85394472","dfnText":"Document","external":true,"refSections":[{"refs":[{"id":"ref-for-document"},{"id":"ref-for-document\u2460"},{"id":"ref-for-document\u2461"},{"id":"ref-for-document\u2462"},{"id":"ref-for-document\u2463"}],"title":"4.3. Inherited policies"},{"refs":[{"id":"ref-for-document\u2464"}],"title":"4.5. Container policies"},{"refs":[{"id":"ref-for-document\u2465"},{"id":"ref-for-document\u2466"},{"id":"ref-for-document\u2467"},{"id":"ref-for-document\u2468"}],"title":"4.8. Default Allowlists"},{"refs":[{"id":"ref-for-document\u2460\u24ea"}],"title":"5.1. HTML attribute serialization"},{"refs":[{"id":"ref-for-document\u2460\u2460"},{"id":"ref-for-document\u2460\u2461"},{"id":"ref-for-document\u2460\u2462"},{"id":"ref-for-document\u2460\u2463"},{"id":"ref-for-document\u2460\u2464"},{"id":"ref-for-document\u2460\u2465"},{"id":"ref-for-document\u2460\u2466"}],"title":"7.2. The permissionsPolicy object"},{"refs":[{"id":"ref-for-document\u2460\u2467"}],"title":"9.7. Define an inherited policy for feature in container at origin"},{"refs":[{"id":"ref-for-document\u2460\u2468"}],"title":"9.8. Get feature value for origin"},{"refs":[{"id":"ref-for-document\u2461\u24ea"}],"title":"9.10. Is feature enabled in document for origin?"},{"refs":[{"id":"ref-for-document\u2461\u2460"},{"id":"ref-for-document\u2461\u2461"}],"title":"10.1. Changes to the HTML specification"}],"url":"https://dom.spec.whatwg.org/#document"},
"87fcd40c": {"dfnID":"87fcd40c","dfnText":"iframe","external":true,"refSections":[{"refs":[{"id":"ref-for-the-iframe-element"}],"title":"2. Examples"},{"refs":[{"id":"ref-for-the-iframe-element\u2460"}],"title":"3. Other and related mechanisms"},{"refs":[{"id":"ref-for-the-iframe-element\u2461"}],"title":"4.5. Container policies"},{"refs":[{"id":"ref-for-the-iframe-element\u2462"},{"id":"ref-for-the-iframe-element\u2463"}],"title":"6.2. The allow attribute of the iframe element"},{"refs":[{"id":"ref-for-the-iframe-element\u2464"}],"title":"6.3. Additional attributes to support legacy features"},{"refs":[{"id":"ref-for-the-iframe-element\u2465"},{"id":"ref-for-the-iframe-element\u2466"},{"id":"ref-for-the-iframe-element\u2467"}],"title":"6.3.1. allowfullscreen"},{"refs":[{"id":"ref-for-the-iframe-element\u2468"},{"id":"ref-for-the-iframe-element\u2460\u24ea"},{"id":"ref-for-the-iframe-element\u2460\u2460"}],"title":"7.2. The permissionsPolicy object"},{"refs":[{"id":"ref-for-the-iframe-element\u2460\u2461"}],"title":"8. Reporting"},{"refs":[{"id":"ref-for-the-iframe-element\u2460\u2462"}],"title":"9.4. Process permissions policy attributes"}],"url":"https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element"},
"8855a9aa": {"dfnID":"8855a9aa","dfnText":"DOMString","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-DOMString"},{"id":"ref-for-idl-DOMString\u2460"},{"id":"ref-for-idl-DOMString\u2461"},{"id":"ref-for-idl-DOMString\u2462"},{"id":"ref-for-idl-DOMString\u2463"},{"id":"ref-for-idl-DOMString\u2464"}],"title":"7.2. The permissionsPolicy object"},{"refs":[{"id":"ref-for-idl-DOMString\u2465"},{"id":"ref-for-idl-DOMString\u2466"},{"id":"ref-for-idl-DOMString\u2467"},{"id":"ref-for-idl-DOMString\u2468"}],"title":"8. Reporting"}],"url":"https://webidl.spec.whatwg.org/#idl-DOMString"},
"889e932f": {"dfnID":"889e932f","dfnText":"Exposed","external":true,"refSections":[{"refs":[{"id":"ref-for-Exposed"}],"title":"7.2. The permissionsPolicy object"},{"refs":[{"id":"ref-for-Exposed\u2460"}],"title":"8. Reporting"}],"url":"https://webidl.spec.whatwg.org/#Exposed"},
"8ea172e9": {"dfnID":"8ea172e9","dfnText":"sandbox","external":true,"refSections":[{"refs":[{"id":"ref-for-sandbox"}],"title":"3. Other and related mechanisms"}],"url":"https://w3c.github.io/webappsec-csp/#sandbox"},
"92871e3b": {"dfnID":"92871e3b","dfnText":"sf-dictionary","external":true,"refSections":[{"refs":[{"id":"ref-for-dictionary"}],"title":"4.6. Policy directives"},{"refs":[{"id":"ref-for-dictionary\u2460"}],"title":"6.1. `Permissions-Policy` HTTP Header Field"}],"url":"https://datatracker.ietf.org/doc/html/rfc8941#dictionary"},
"959ad97b": {"dfnID":"959ad97b","dfnText":"origin","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-url-origin"},{"id":"ref-for-concept-url-origin\u2460"},{"id":"ref-for-concept-url-origin\u2461"}],"title":"4.7. Allowlists"},{"refs":[{"id":"ref-for-concept-url-origin\u2462"},{"id":"ref-for-concept-url-origin\u2463"}],"title":"7.2. The permissionsPolicy object"},{"refs":[{"id":"ref-for-concept-url-origin\u2464"}],"title":"9.1. Process response policy"},{"refs":[{"id":"ref-for-concept-url-origin\u2465"}],"title":"9.2. Construct policy from dictionary and origin"},{"refs":[{"id":"ref-for-concept-url-origin\u2466"},{"id":"ref-for-concept-url-origin\u2467"},{"id":"ref-for-concept-url-origin\u2468"}],"title":"9.3. Parse policy directive"},{"refs":[{"id":"ref-for-concept-url-origin\u2460\u24ea"}],"title":"9.5. Create a Permissions Policy for a navigable"},{"refs":[{"id":"ref-for-concept-url-origin\u2460\u2460"}],"title":"9.6. Create a Permissions Policy for a navigable from response"},{"refs":[{"id":"ref-for-concept-url-origin\u2460\u2461"}],"title":"9.8. Get feature value for origin"},{"refs":[{"id":"ref-for-concept-url-origin\u2460\u2462"},{"id":"ref-for-concept-url-origin\u2460\u2463"}],"title":"9.9. Check permissions policy"},{"refs":[{"id":"ref-for-concept-url-origin\u2460\u2464"}],"title":"9.10. Is feature enabled in document for origin?"}],"url":"https://url.spec.whatwg.org/#concept-url-origin"},
"96c16e60": {"dfnID":"96c16e60","dfnText":"Node","external":true,"refSections":[{"refs":[{"id":"ref-for-node"}],"title":"7.2. The permissionsPolicy object"}],"url":"https://dom.spec.whatwg.org/#node"},
"984221ca": {"dfnID":"984221ca","dfnText":"struct","external":true,"refSections":[{"refs":[{"id":"ref-for-struct"},{"id":"ref-for-struct\u2460"}],"title":"4.2. Policies"},{"refs":[{"id":"ref-for-struct\u2461"}],"title":"7.2. The permissionsPolicy object"}],"url":"https://infra.spec.whatwg.org/#struct"},
"9c19b7fc": {"dfnID":"9c19b7fc","dfnText":"navigable","external":true,"refSections":[{"refs":[{"id":"ref-for-navigable"}],"title":"4.8. Default Allowlists"}],"url":"https://html.spec.whatwg.org/multipage/document-sequences.html#navigable"},
"9cce47fd": {"dfnID":"9cce47fd","dfnText":"sequence","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-sequence"},{"id":"ref-for-idl-sequence\u2460"},{"id":"ref-for-idl-sequence\u2461"}],"title":"7.2. The permissionsPolicy object"}],"url":"https://webidl.spec.whatwg.org/#idl-sequence"},
"9fe8836b": {"dfnID":"9fe8836b","dfnText":"report","external":true,"refSections":[{"refs":[{"id":"ref-for-report"}],"title":"9.13. Generate report for violation of permissions policy on settings"},{"refs":[{"id":"ref-for-report\u2460"}],"title":"9.14. Generate report for potential violation of permissions policy on settings"}],"url":"https://w3c.github.io/reporting/#report"},
"a326add7": {"dfnID":"a326add7","dfnText":"contain","external":true,"refSections":[{"refs":[{"id":"ref-for-map-exists"}],"title":"9.4. Process permissions policy attributes"},{"refs":[{"id":"ref-for-map-exists\u2460"}],"title":"9.7. Define an inherited policy for feature in container at origin"}],"url":"https://infra.spec.whatwg.org/#map-exists"},
"a41102eb": {"dfnID":"a41102eb","dfnText":"permissions policy","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-document-permissions-policy"}],"title":"9.8. Get feature value for origin"},{"refs":[{"id":"ref-for-concept-document-permissions-policy\u2460"},{"id":"ref-for-concept-document-permissions-policy\u2461"}],"title":"9.10. Is feature enabled in document for origin?"},{"refs":[{"id":"ref-for-concept-document-permissions-policy\u2462"}],"title":"9.12. Check potential violation of permissions policy in container"}],"url":"https://html.spec.whatwg.org/multipage/dom.html#concept-document-permissions-policy"},
"a5c91173": {"dfnID":"a5c91173","dfnText":"SameObject","external":true,"refSections":[{"refs":[{"id":"ref-for-SameObject"},{"id":"ref-for-SameObject\u2460"}],"title":"7.2. The permissionsPolicy object"}],"url":"https://webidl.spec.whatwg.org/#SameObject"},
"a682cc44": {"dfnID":"a682cc44","dfnText":"split on ASCII whitespace","external":true,"refSections":[{"refs":[{"id":"ref-for-split-on-ascii-whitespace"}],"title":"9.3. Parse policy directive"}],"url":"https://infra.spec.whatwg.org/#split-on-ascii-whitespace"},
"a84c14c9": {"dfnID":"a84c14c9","dfnText":"document","external":true,"refSections":[{"refs":[{"id":"ref-for-clone-a-node-document"}],"title":"8. Reporting"}],"url":"https://dom.spec.whatwg.org/#clone-a-node-document"},
"allow-list": {"dfnID":"allow-list","dfnText":"allow-list","external":false,"refSections":[{"refs":[{"id":"ref-for-allow-list"}],"title":"5.1. HTML attribute serialization"}],"url":"#allow-list"},
"allow-list-value": {"dfnID":"allow-list-value","dfnText":"allow-list-value","external":false,"refSections":[{"refs":[{"id":"ref-for-allow-list-value"},{"id":"ref-for-allow-list-value\u2460"}],"title":"5.1. HTML attribute serialization"}],"url":"#allow-list-value"},
"allowlist": {"dfnID":"allowlist","dfnText":"allowlist","external":false,"refSections":[{"refs":[{"id":"ref-for-allowlist"},{"id":"ref-for-allowlist\u2460"}],"title":"2. Examples"},{"refs":[{"id":"ref-for-allowlist\u2461"}],"title":"4.2. Policies"},{"refs":[{"id":"ref-for-allowlist\u2462"}],"title":"4.6. Policy directives"},{"refs":[{"id":"ref-for-allowlist\u2463"},{"id":"ref-for-allowlist\u2464"},{"id":"ref-for-allowlist\u2465"},{"id":"ref-for-allowlist\u2466"},{"id":"ref-for-allowlist\u2467"},{"id":"ref-for-allowlist\u2468"}],"title":"4.7. Allowlists"},{"refs":[{"id":"ref-for-allowlist\u2460\u24ea"}],"title":"5.1. HTML attribute serialization"},{"refs":[{"id":"ref-for-allowlist\u2460\u2460"},{"id":"ref-for-allowlist\u2460\u2461"}],"title":"5.2. Structured header serialization"},{"refs":[{"id":"ref-for-allowlist\u2460\u2462"},{"id":"ref-for-allowlist\u2460\u2463"}],"title":"6.2. The allow attribute of the iframe element"},{"refs":[{"id":"ref-for-allowlist\u2460\u2464"}],"title":"6.3.1. allowfullscreen"},{"refs":[{"id":"ref-for-allowlist\u2460\u2465"},{"id":"ref-for-allowlist\u2460\u2466"}],"title":"7.2. The permissionsPolicy object"},{"refs":[{"id":"ref-for-allowlist\u2460\u2467"}],"title":"9.2. Construct policy from dictionary and origin"},{"refs":[{"id":"ref-for-allowlist\u2460\u2468"}],"title":"9.3. Parse policy directive"},{"refs":[{"id":"ref-for-allowlist\u2461\u24ea"}],"title":"9.7. Define an inherited policy for feature in container at origin"}],"url":"#allowlist"},
"associated-node": {"dfnID":"associated-node","dfnText":"associated node","external":false,"refSections":[{"refs":[{"id":"ref-for-associated-node"},{"id":"ref-for-associated-node\u2460"},{"id":"ref-for-associated-node\u2461"},{"id":"ref-for-associated-node\u2462"},{"id":"ref-for-associated-node\u2463"},{"id":"ref-for-associated-node\u2464"},{"id":"ref-for-associated-node\u2465"},{"id":"ref-for-associated-node\u2466"},{"id":"ref-for-associated-node\u2467"}],"title":"7.2. The permissionsPolicy object"}],"url":"#associated-node"},
"b01b1359": {"dfnID":"b01b1359","dfnText":"opaque origin","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-origin-opaque"}],"title":"4.7. Allowlists"},{"refs":[{"id":"ref-for-concept-origin-opaque\u2460"},{"id":"ref-for-concept-origin-opaque\u2461"}],"title":"7.2. The permissionsPolicy object"},{"refs":[{"id":"ref-for-concept-origin-opaque\u2462"}],"title":"9.3. Parse policy directive"}],"url":"https://html.spec.whatwg.org/multipage/browsers.html#concept-origin-opaque"},
"bcdb6841": {"dfnID":"bcdb6841","dfnText":"requestFullscreen()","external":true,"refSections":[{"refs":[{"id":"ref-for-dom-element-requestfullscreen"}],"title":"6.3.1. allowfullscreen"}],"url":"https://fullscreen.spec.whatwg.org/#dom-element-requestfullscreen"},
"bd736ec6": {"dfnID":"bd736ec6","dfnText":"top-level traversable","external":true,"refSections":[{"refs":[{"id":"ref-for-top-level-traversable"},{"id":"ref-for-top-level-traversable\u2460"}],"title":"4.3. Inherited policies"},{"refs":[{"id":"ref-for-top-level-traversable\u2461"},{"id":"ref-for-top-level-traversable\u2462"},{"id":"ref-for-top-level-traversable\u2463"}],"title":"4.8. Default Allowlists"}],"url":"https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-traversable"},
"bf63a402": {"dfnID":"bf63a402","dfnText":"navigable container","external":true,"refSections":[{"refs":[{"id":"ref-for-navigable-container"}],"title":"4.5. Container policies"},{"refs":[{"id":"ref-for-navigable-container\u2460"}],"title":"4.8. Default Allowlists"},{"refs":[{"id":"ref-for-navigable-container\u2461"}],"title":"9.5. Create a Permissions Policy for a navigable"},{"refs":[{"id":"ref-for-navigable-container\u2462"}],"title":"9.6. Create a Permissions Policy for a navigable from response"},{"refs":[{"id":"ref-for-navigable-container\u2463"}],"title":"9.7. Define an inherited policy for feature in container at origin"},{"refs":[{"id":"ref-for-navigable-container\u2464"}],"title":"9.12. Check potential violation of permissions policy in container"}],"url":"https://html.spec.whatwg.org/multipage/document-sequences.html#navigable-container"},
"c62cd7cf": {"dfnID":"c62cd7cf","dfnText":"origin","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-document-origin"}],"title":"5.1. HTML attribute serialization"},{"refs":[{"id":"ref-for-concept-document-origin\u2460"}],"title":"9.4. Process permissions policy attributes"},{"refs":[{"id":"ref-for-concept-document-origin\u2461"},{"id":"ref-for-concept-document-origin\u2462"}],"title":"9.7. Define an inherited policy for feature in container at origin"},{"refs":[{"id":"ref-for-concept-document-origin\u2463"},{"id":"ref-for-concept-document-origin\u2464"}],"title":"9.10. Is feature enabled in document for origin?"}],"url":"https://dom.spec.whatwg.org/#concept-document-origin"},
"c88f3887": {"dfnID":"c88f3887","dfnText":"item","external":true,"refSections":[{"refs":[{"id":"ref-for-struct-item"},{"id":"ref-for-struct-item\u2460"}],"title":"4.2. Policies"}],"url":"https://infra.spec.whatwg.org/#struct-item"},
"ca3ca4ae": {"dfnID":"ca3ca4ae","dfnText":"URL parser","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-url-parser"}],"title":"4.7. Allowlists"},{"refs":[{"id":"ref-for-concept-url-parser\u2460"}],"title":"9.3. Parse policy directive"}],"url":"https://url.spec.whatwg.org/#concept-url-parser"},
"cf363990": {"dfnID":"cf363990","dfnText":"body","external":true,"refSections":[{"refs":[{"id":"ref-for-report-body"}],"title":"8. Reporting"}],"url":"https://w3c.github.io/reporting/#report-body"},
"check-permissions-policy": {"dfnID":"check-permissions-policy","dfnText":"Check permissions policy","external":false,"refSections":[{"refs":[{"id":"ref-for-check-permissions-policy"},{"id":"ref-for-check-permissions-policy\u2460"}],"title":"9.10. Is feature enabled in document for origin?"}],"url":"#check-permissions-policy"},
"check-potential-violation-in-container": {"dfnID":"check-potential-violation-in-container","dfnText":"Check potential violation of permissions policy in container","external":false,"refSections":[{"refs":[{"id":"ref-for-check-potential-violation-in-container"}],"title":"10.1. Changes to the HTML specification"}],"url":"#check-potential-violation-in-container"},
"construct-policy": {"dfnID":"construct-policy","dfnText":"Construct policy from dictionary and origin","external":false,"refSections":[{"refs":[{"id":"ref-for-construct-policy"}],"title":"9.1. Process response policy"}],"url":"#construct-policy"},
"container-policy": {"dfnID":"container-policy","dfnText":"container policy","external":false,"refSections":[{"refs":[{"id":"ref-for-container-policy"}],"title":"4.3. Inherited policies"},{"refs":[{"id":"ref-for-container-policy\u2460"},{"id":"ref-for-container-policy\u2461"},{"id":"ref-for-container-policy\u2462"},{"id":"ref-for-container-policy\u2463"}],"title":"4.5. Container policies"},{"refs":[{"id":"ref-for-container-policy\u2464"}],"title":"4.8. Default Allowlists"},{"refs":[{"id":"ref-for-container-policy\u2465"}],"title":"6.2. The allow attribute of the iframe element"},{"refs":[{"id":"ref-for-container-policy\u2466"}],"title":"6.3. Additional attributes to support legacy features"},{"refs":[{"id":"ref-for-container-policy\u2467"}],"title":"6.3.1. allowfullscreen"},{"refs":[{"id":"ref-for-container-policy\u2468"}],"title":"9.4. Process permissions policy attributes"}],"url":"#container-policy"},
"create-for-navigable": {"dfnID":"create-for-navigable","dfnText":"Create a Permissions Policy for a navigable","external":false,"refSections":[{"refs":[{"id":"ref-for-create-for-navigable"}],"title":"9.6. Create a Permissions Policy for a navigable from response"}],"url":"#create-for-navigable"},
"create-from-response": {"dfnID":"create-from-response","dfnText":"Create a Permissions Policy for a navigable from response","external":false,"refSections":[{"refs":[{"id":"ref-for-create-from-response"}],"title":"10.1. Changes to the HTML specification"}],"url":"#create-from-response"},
"d4ec2d19": {"dfnID":"d4ec2d19","dfnText":"scheme-source","external":true,"refSections":[{"refs":[{"id":"ref-for-grammardef-scheme-source"}],"title":"5.1. HTML attribute serialization"}],"url":"https://w3c.github.io/webappsec-csp/#grammardef-scheme-source"},
"da63e480": {"dfnID":"da63e480","dfnText":"sandboxed origin browsing context flag","external":true,"refSections":[{"refs":[{"id":"ref-for-sandboxed-origin-browsing-context-flag"}],"title":"7.2. The permissionsPolicy object"}],"url":"https://html.spec.whatwg.org/multipage/browsers.html#sandboxed-origin-browsing-context-flag"},
"dae0bfde": {"dfnID":"dae0bfde","dfnText":"serialization of an origin","external":true,"refSections":[{"refs":[{"id":"ref-for-ascii-serialisation-of-an-origin"}],"title":"4.7. Allowlists"},{"refs":[{"id":"ref-for-ascii-serialisation-of-an-origin\u2460"},{"id":"ref-for-ascii-serialisation-of-an-origin\u2461"}],"title":"7.2. The permissionsPolicy object"},{"refs":[{"id":"ref-for-ascii-serialisation-of-an-origin\u2462"}],"title":"9.3. Parse policy directive"}],"url":"https://html.spec.whatwg.org/multipage/browsers.html#ascii-serialisation-of-an-origin"},
"declared-origin": {"dfnID":"declared-origin","dfnText":"declared origin","external":false,"refSections":[{"refs":[{"id":"ref-for-declared-origin"},{"id":"ref-for-declared-origin\u2460"},{"id":"ref-for-declared-origin\u2461"}],"title":"7.2. The permissionsPolicy object"},{"refs":[{"id":"ref-for-declared-origin\u2462"}],"title":"9.4. Process permissions policy attributes"},{"refs":[{"id":"ref-for-declared-origin\u2463"},{"id":"ref-for-declared-origin\u2464"}],"title":"9.12. Check potential violation of permissions policy in container"}],"url":"#declared-origin"},
"declared-policy": {"dfnID":"declared-policy","dfnText":"declared policy","external":false,"refSections":[{"refs":[{"id":"ref-for-declared-policy"}],"title":"4.2. Policies"},{"refs":[{"id":"ref-for-declared-policy\u2460"}],"title":"7.2. The permissionsPolicy object"},{"refs":[{"id":"ref-for-declared-policy\u2461"}],"title":"9.1. Process response policy"},{"refs":[{"id":"ref-for-declared-policy\u2462"}],"title":"9.2. Construct policy from dictionary and origin"}],"url":"#declared-policy"},
"declared-policy-declarations": {"dfnID":"declared-policy-declarations","dfnText":"declarations","external":false,"refSections":[{"refs":[{"id":"ref-for-declared-policy-declarations"}],"title":"4.2. Policies"},{"refs":[{"id":"ref-for-declared-policy-declarations\u2460"},{"id":"ref-for-declared-policy-declarations\u2461"}],"title":"7.2. The permissionsPolicy object"},{"refs":[{"id":"ref-for-declared-policy-declarations\u2462"},{"id":"ref-for-declared-policy-declarations\u2463"}],"title":"9.6. Create a Permissions Policy for a navigable from response"},{"refs":[{"id":"ref-for-declared-policy-declarations\u2464"}],"title":"9.8. Get feature value for origin"},{"refs":[{"id":"ref-for-declared-policy-declarations\u2465"}],"title":"9.9. Check permissions policy"}],"url":"#declared-policy-declarations"},
"declared-policy-reporting-configuration": {"dfnID":"declared-policy-reporting-configuration","dfnText":"reporting configuration","external":false,"refSections":[{"refs":[{"id":"ref-for-declared-policy-reporting-configuration"}],"title":"4.2. Policies"},{"refs":[{"id":"ref-for-declared-policy-reporting-configuration\u2460"}],"title":"7.2. The permissionsPolicy object"},{"refs":[{"id":"ref-for-declared-policy-reporting-configuration\u2461"},{"id":"ref-for-declared-policy-reporting-configuration\u2462"}],"title":"9.6. Create a Permissions Policy for a navigable from response"},{"refs":[{"id":"ref-for-declared-policy-reporting-configuration\u2463"}],"title":"9.11. Get the reporting endpoint for a feature"}],"url":"#declared-policy-reporting-configuration"},
"deddc6fc": {"dfnID":"deddc6fc","dfnText":"src","external":true,"refSections":[{"refs":[{"id":"ref-for-attr-iframe-src"}],"title":"6.2. The allow attribute of the iframe element"},{"refs":[{"id":"ref-for-attr-iframe-src\u2460"}],"title":"7.2. The permissionsPolicy object"}],"url":"https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-src"},
"default-allowlist": {"dfnID":"default-allowlist","dfnText":"*","external":false,"refSections":[],"url":"#default-allowlist"},
"default-allowlist-self": {"dfnID":"default-allowlist-self","dfnText":"'self'","external":false,"refSections":[],"url":"#default-allowlist-self"},
"default-origin": {"dfnID":"default-origin","dfnText":"default origin","external":false,"refSections":[{"refs":[{"id":"ref-for-default-origin"},{"id":"ref-for-default-origin\u2460"},{"id":"ref-for-default-origin\u2461"},{"id":"ref-for-default-origin\u2462"},{"id":"ref-for-default-origin\u2463"}],"title":"7.2. The permissionsPolicy object"}],"url":"#default-origin"},
"define-inherited-policy-in-container": {"dfnID":"define-inherited-policy-in-container","dfnText":"Define an inherited policy for feature in container at origin","external":false,"refSections":[{"refs":[{"id":"ref-for-define-inherited-policy-in-container"}],"title":"7.2. The permissionsPolicy object"},{"refs":[{"id":"ref-for-define-inherited-policy-in-container\u2460"}],"title":"9.5. Create a Permissions Policy for a navigable"},{"refs":[{"id":"ref-for-define-inherited-policy-in-container\u2461"},{"id":"ref-for-define-inherited-policy-in-container\u2462"}],"title":"9.12. Check potential violation of permissions policy in container"}],"url":"#define-inherited-policy-in-container"},
"document-policy-object": {"dfnID":"document-policy-object","dfnText":"policy object","external":false,"refSections":[{"refs":[{"id":"ref-for-document-policy-object"}],"title":"7.2. The permissionsPolicy object"}],"url":"#document-policy-object"},
"document-report-only-permissions-policy": {"dfnID":"document-report-only-permissions-policy","dfnText":"report-only permissions\n    policy","external":false,"refSections":[{"refs":[{"id":"ref-for-document-report-only-permissions-policy"}],"title":"9.8. Get feature value for origin"},{"refs":[{"id":"ref-for-document-report-only-permissions-policy\u2460"},{"id":"ref-for-document-report-only-permissions-policy\u2461"}],"title":"9.10. Is feature enabled in document for origin?"},{"refs":[{"id":"ref-for-document-report-only-permissions-policy\u2462"}],"title":"9.12. Check potential violation of permissions policy in container"},{"refs":[{"id":"ref-for-document-report-only-permissions-policy\u2463"}],"title":"10.1. Changes to the HTML specification"}],"url":"#document-report-only-permissions-policy"},
"dom-document-permissionspolicy": {"dfnID":"dom-document-permissionspolicy","dfnText":"permissionsPolicy","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-document-permissionspolicy"}],"title":"7.2. The permissionsPolicy object"}],"url":"#dom-document-permissionspolicy"},
"dom-htmliframeelement-permissionspolicy": {"dfnID":"dom-htmliframeelement-permissionspolicy","dfnText":"permissionsPolicy","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-htmliframeelement-permissionspolicy"}],"title":"7.2. The permissionsPolicy object"}],"url":"#dom-htmliframeelement-permissionspolicy"},
"dom-permissionspolicy-allowedfeatures": {"dfnID":"dom-permissionspolicy-allowedfeatures","dfnText":"allowedFeatures","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-permissionspolicy-allowedfeatures"}],"title":"7.2. The permissionsPolicy object"}],"url":"#dom-permissionspolicy-allowedfeatures"},
"dom-permissionspolicy-allowsfeature": {"dfnID":"dom-permissionspolicy-allowsfeature","dfnText":"allowsFeature","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-permissionspolicy-allowsfeature"}],"title":"7.2. The permissionsPolicy object"}],"url":"#dom-permissionspolicy-allowsfeature"},
"dom-permissionspolicy-allowsfeature-feature-origin-feature": {"dfnID":"dom-permissionspolicy-allowsfeature-feature-origin-feature","dfnText":"feature","external":false,"refSections":[],"url":"#dom-permissionspolicy-allowsfeature-feature-origin-feature"},
"dom-permissionspolicy-allowsfeature-feature-origin-origin": {"dfnID":"dom-permissionspolicy-allowsfeature-feature-origin-origin","dfnText":"origin","external":false,"refSections":[],"url":"#dom-permissionspolicy-allowsfeature-feature-origin-origin"},
"dom-permissionspolicy-features": {"dfnID":"dom-permissionspolicy-features","dfnText":"features","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-permissionspolicy-features"}],"title":"7.2. The permissionsPolicy object"}],"url":"#dom-permissionspolicy-features"},
"dom-permissionspolicy-getallowlistforfeature": {"dfnID":"dom-permissionspolicy-getallowlistforfeature","dfnText":"getAllowlistForFeature","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-permissionspolicy-getallowlistforfeature"}],"title":"7.2. The permissionsPolicy object"}],"url":"#dom-permissionspolicy-getallowlistforfeature"},
"dom-permissionspolicy-getallowlistforfeature-feature-feature": {"dfnID":"dom-permissionspolicy-getallowlistforfeature-feature-feature","dfnText":"feature","external":false,"refSections":[],"url":"#dom-permissionspolicy-getallowlistforfeature-feature-feature"},
"dom-permissionspolicyviolationreportbody-allowattribute": {"dfnID":"dom-permissionspolicyviolationreportbody-allowattribute","dfnText":"allowAttribute","external":false,"refSections":[],"url":"#dom-permissionspolicyviolationreportbody-allowattribute"},
"dom-permissionspolicyviolationreportbody-columnnumber": {"dfnID":"dom-permissionspolicyviolationreportbody-columnnumber","dfnText":"columnNumber","external":false,"refSections":[],"url":"#dom-permissionspolicyviolationreportbody-columnnumber"},
"dom-permissionspolicyviolationreportbody-disposition": {"dfnID":"dom-permissionspolicyviolationreportbody-disposition","dfnText":"disposition","external":false,"refSections":[],"url":"#dom-permissionspolicyviolationreportbody-disposition"},
"dom-permissionspolicyviolationreportbody-featureid": {"dfnID":"dom-permissionspolicyviolationreportbody-featureid","dfnText":"featureId","external":false,"refSections":[],"url":"#dom-permissionspolicyviolationreportbody-featureid"},
"dom-permissionspolicyviolationreportbody-linenumber": {"dfnID":"dom-permissionspolicyviolationreportbody-linenumber","dfnText":"lineNumber","external":false,"refSections":[],"url":"#dom-permissionspolicyviolationreportbody-linenumber"},
"dom-permissionspolicyviolationreportbody-sourcefile": {"dfnID":"dom-permissionspolicyviolationreportbody-sourcefile","dfnText":"sourceFile","external":false,"refSections":[],"url":"#dom-permissionspolicyviolationreportbody-sourcefile"},
"dom-permissionspolicyviolationreportbody-tojson": {"dfnID":"dom-permissionspolicyviolationreportbody-tojson","dfnText":"toJSON","external":false,"refSections":[],"url":"#dom-permissionspolicyviolationreportbody-tojson"},
"e3201629": {"dfnID":"e3201629","dfnText":"response","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-response-response"}],"title":"6.1. `Permissions-Policy` HTTP Header Field"},{"refs":[{"id":"ref-for-concept-response-response\u2460"}],"title":"8.1. `Permissions-Policy-Report-Only` HTTP Header Field"},{"refs":[{"id":"ref-for-concept-response-response\u2461"}],"title":"9.1. Process response policy"},{"refs":[{"id":"ref-for-concept-response-response\u2462"}],"title":"9.6. Create a Permissions Policy for a navigable from response"}],"url":"https://fetch.spec.whatwg.org/#concept-response-response"},
"e5fc5b88": {"dfnID":"e5fc5b88","dfnText":"strictly split","external":true,"refSections":[{"refs":[{"id":"ref-for-strictly-split"}],"title":"9.3. Parse policy directive"}],"url":"https://infra.spec.whatwg.org/#strictly-split"},
"eca80770": {"dfnID":"eca80770","dfnText":"getUserMedia()","external":true,"refSections":[{"refs":[{"id":"ref-for-dom-mediadevices-getusermedia"}],"title":"2. Examples"}],"url":"https://w3c.github.io/mediacapture-main/#dom-mediadevices-getusermedia"},
"efd1ec5d": {"dfnID":"efd1ec5d","dfnText":"object","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-object"}],"title":"8. Reporting"}],"url":"https://webidl.spec.whatwg.org/#idl-object"},
"empty-permissions-policy": {"dfnID":"empty-permissions-policy","dfnText":"empty permissions policy","external":false,"refSections":[],"url":"#empty-permissions-policy"},
"expressions": {"dfnID":"expressions","dfnText":"expressions","external":false,"refSections":[{"refs":[{"id":"ref-for-expressions"}],"title":"4.7. Allowlists"},{"refs":[{"id":"ref-for-expressions\u2460"}],"title":"7.2. The permissionsPolicy object"},{"refs":[{"id":"ref-for-expressions\u2461"}],"title":"9.2. Construct policy from dictionary and origin"},{"refs":[{"id":"ref-for-expressions\u2462"}],"title":"9.3. Parse policy directive"}],"url":"#expressions"},
"f23dc013": {"dfnID":"f23dc013","dfnText":"child navigable","external":true,"refSections":[{"refs":[{"id":"ref-for-child-navigable"},{"id":"ref-for-child-navigable\u2460"}],"title":"4.3. Inherited policies"},{"refs":[{"id":"ref-for-child-navigable\u2461"},{"id":"ref-for-child-navigable\u2462"}],"title":"4.5. Container policies"},{"refs":[{"id":"ref-for-child-navigable\u2463"},{"id":"ref-for-child-navigable\u2464"},{"id":"ref-for-child-navigable\u2465"},{"id":"ref-for-child-navigable\u2466"},{"id":"ref-for-child-navigable\u2467"}],"title":"4.8. Default Allowlists"}],"url":"https://html.spec.whatwg.org/multipage/document-sequences.html#child-navigable"},
"f4531911": {"dfnID":"f4531911","dfnText":"Default","external":true,"refSections":[{"refs":[{"id":"ref-for-Default"}],"title":"8. Reporting"}],"url":"https://webidl.spec.whatwg.org/#Default"},
"f78d5b5c": {"dfnID":"f78d5b5c","dfnText":"origin","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-request-origin"}],"title":"9.15. Should request be allowed to use feature?"}],"url":"https://fetch.spec.whatwg.org/#concept-request-origin"},
"f7b00a8b": {"dfnID":"f7b00a8b","dfnText":"header list","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-response-header-list"}],"title":"9.1. Process response policy"}],"url":"https://fetch.spec.whatwg.org/#concept-response-header-list"},
"f8de33a3": {"dfnID":"f8de33a3","dfnText":"long","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-long"},{"id":"ref-for-idl-long\u2460"}],"title":"8. Reporting"}],"url":"https://webidl.spec.whatwg.org/#idl-long"},
"f937b7b6": {"dfnID":"f937b7b6","dfnText":"continue","external":true,"refSections":[{"refs":[{"id":"ref-for-iteration-continue"}],"title":"9.2. Construct policy from dictionary and origin"},{"refs":[{"id":"ref-for-iteration-continue\u2460"},{"id":"ref-for-iteration-continue\u2461"}],"title":"9.3. Parse policy directive"}],"url":"https://infra.spec.whatwg.org/#iteration-continue"},
"feature-identifier": {"dfnID":"feature-identifier","dfnText":"feature-identifier","external":false,"refSections":[{"refs":[{"id":"ref-for-feature-identifier"}],"title":"5.1. HTML attribute serialization"}],"url":"#feature-identifier"},
"get-feature-value-for-origin": {"dfnID":"get-feature-value-for-origin","dfnText":"Get feature value for origin","external":false,"refSections":[{"refs":[{"id":"ref-for-get-feature-value-for-origin"},{"id":"ref-for-get-feature-value-for-origin\u2460"}],"title":"9.7. Define an inherited policy for feature in container at origin"}],"url":"#get-feature-value-for-origin"},
"get-reporting-endpoint": {"dfnID":"get-reporting-endpoint","dfnText":"Get the reporting endpoint for a feature","external":false,"refSections":[{"refs":[{"id":"ref-for-get-reporting-endpoint"},{"id":"ref-for-get-reporting-endpoint\u2460"}],"title":"9.10. Is feature enabled in document for origin?"},{"refs":[{"id":"ref-for-get-reporting-endpoint\u2461"},{"id":"ref-for-get-reporting-endpoint\u2462"}],"title":"9.12. Check potential violation of permissions policy in container"}],"url":"#get-reporting-endpoint"},
"header-policy": {"dfnID":"header-policy","dfnText":"header policy","external":false,"refSections":[{"refs":[{"id":"ref-for-header-policy"}],"title":"4.5. Container policies"}],"url":"#header-policy"},
"iframe-policy-object": {"dfnID":"iframe-policy-object","dfnText":"policy object","external":false,"refSections":[{"refs":[{"id":"ref-for-iframe-policy-object"}],"title":"7.2. The permissionsPolicy object"}],"url":"#iframe-policy-object"},
"inherited-policy-for-a-feature": {"dfnID":"inherited-policy-for-a-feature","dfnText":"inherited policy for a feature","external":false,"refSections":[{"refs":[{"id":"ref-for-inherited-policy-for-a-feature"}],"title":"9.7. Define an inherited policy for feature in container at origin"}],"url":"#inherited-policy-for-a-feature"},
"is-feature-enabled": {"dfnID":"is-feature-enabled","dfnText":"Is feature enabled in document for origin?","external":false,"refSections":[{"refs":[{"id":"ref-for-is-feature-enabled"}],"title":"9.15. Should request be allowed to use feature?"}],"url":"#is-feature-enabled"},
"matches": {"dfnID":"matches","dfnText":"matches","external":false,"refSections":[{"refs":[{"id":"ref-for-matches"}],"title":"9.7. Define an inherited policy for feature in container at origin"},{"refs":[{"id":"ref-for-matches\u2460"}],"title":"9.8. Get feature value for origin"},{"refs":[{"id":"ref-for-matches\u2461"}],"title":"9.9. Check permissions policy"}],"url":"#matches"},
"observable-policy": {"dfnID":"observable-policy","dfnText":"observable policy","external":false,"refSections":[{"refs":[{"id":"ref-for-observable-policy"},{"id":"ref-for-observable-policy\u2460"}],"title":"7.1.2. Frame policies"},{"refs":[{"id":"ref-for-observable-policy\u2461"},{"id":"ref-for-observable-policy\u2462"},{"id":"ref-for-observable-policy\u2463"},{"id":"ref-for-observable-policy\u2464"},{"id":"ref-for-observable-policy\u2465"}],"title":"7.2. The permissionsPolicy object"},{"refs":[{"id":"ref-for-observable-policy\u2466"},{"id":"ref-for-observable-policy\u2467"}],"title":"12.1. Exposure of cross-origin behavior"}],"url":"#observable-policy"},
"parse-policy-directive": {"dfnID":"parse-policy-directive","dfnText":"Parse policy directive","external":false,"refSections":[{"refs":[{"id":"ref-for-parse-policy-directive"}],"title":"9.4. Process permissions policy attributes"}],"url":"#parse-policy-directive"},
"permissions-policy": {"dfnID":"permissions-policy","dfnText":"permissions policy","external":false,"refSections":[{"refs":[{"id":"ref-for-permissions-policy"}],"title":"4.1. Policy-controlled Features"},{"refs":[{"id":"ref-for-permissions-policy\u2460"}],"title":"4.2. Policies"},{"refs":[{"id":"ref-for-permissions-policy\u2461"}],"title":"4.3. Inherited policies"},{"refs":[{"id":"ref-for-permissions-policy\u2462"}],"title":"4.4. Header policies"},{"refs":[{"id":"ref-for-permissions-policy\u2463"}],"title":"5.1. HTML attribute serialization"},{"refs":[{"id":"ref-for-permissions-policy\u2464"}],"title":"6.1. `Permissions-Policy` HTTP Header Field"},{"refs":[{"id":"ref-for-permissions-policy\u2465"},{"id":"ref-for-permissions-policy\u2466"}],"title":"7.2. The permissionsPolicy object"},{"refs":[{"id":"ref-for-permissions-policy\u2467"}],"title":"8.1. `Permissions-Policy-Report-Only` HTTP Header Field"},{"refs":[{"id":"ref-for-permissions-policy\u2468"},{"id":"ref-for-permissions-policy\u2460\u24ea"}],"title":"9.5. Create a Permissions Policy for a navigable"},{"refs":[{"id":"ref-for-permissions-policy\u2460\u2460"}],"title":"9.6. Create a Permissions Policy for a navigable from response"},{"refs":[{"id":"ref-for-permissions-policy\u2460\u2461"}],"title":"9.9. Check permissions policy"},{"refs":[{"id":"ref-for-permissions-policy\u2460\u2462"}],"title":"9.11. Get the reporting endpoint for a feature"},{"refs":[{"id":"ref-for-permissions-policy\u2460\u2463"}],"title":"10.1. Changes to the HTML specification"}],"url":"#permissions-policy"},
"permissions-policy-declared-policy": {"dfnID":"permissions-policy-declared-policy","dfnText":"declared policy","external":false,"refSections":[{"refs":[{"id":"ref-for-permissions-policy-declared-policy"}],"title":"4.2. Policies"},{"refs":[{"id":"ref-for-permissions-policy-declared-policy\u2460"}],"title":"4.3. Inherited policies"},{"refs":[{"id":"ref-for-permissions-policy-declared-policy\u2461"}],"title":"4.4. Header policies"},{"refs":[{"id":"ref-for-permissions-policy-declared-policy\u2462"}],"title":"4.8. Default Allowlists"},{"refs":[{"id":"ref-for-permissions-policy-declared-policy\u2463"}],"title":"7.2. The permissionsPolicy object"},{"refs":[{"id":"ref-for-permissions-policy-declared-policy\u2464"}],"title":"9.5. Create a Permissions Policy for a navigable"},{"refs":[{"id":"ref-for-permissions-policy-declared-policy\u2465"},{"id":"ref-for-permissions-policy-declared-policy\u2466"}],"title":"9.6. Create a Permissions Policy for a navigable from response"},{"refs":[{"id":"ref-for-permissions-policy-declared-policy\u2467"},{"id":"ref-for-permissions-policy-declared-policy\u2468"}],"title":"9.8. Get feature value for origin"},{"refs":[{"id":"ref-for-permissions-policy-declared-policy\u2460\u24ea"},{"id":"ref-for-permissions-policy-declared-policy\u2460\u2460"}],"title":"9.9. Check permissions policy"},{"refs":[{"id":"ref-for-permissions-policy-declared-policy\u2460\u2461"}],"title":"9.11. Get the reporting endpoint for a feature"}],"url":"#permissions-policy-declared-policy"},
"permissions-policy-header": {"dfnID":"permissions-policy-header","dfnText":"Permissions-Policy","external":false,"refSections":[{"refs":[{"id":"ref-for-permissions-policy-header"},{"id":"ref-for-permissions-policy-header\u2460"},{"id":"ref-for-permissions-policy-header\u2461"},{"id":"ref-for-permissions-policy-header\u2462"},{"id":"ref-for-permissions-policy-header\u2463"},{"id":"ref-for-permissions-policy-header\u2464"}],"title":"2. Examples"},{"refs":[{"id":"ref-for-permissions-policy-header\u2465"}],"title":"4.8. Default Allowlists"},{"refs":[{"id":"ref-for-permissions-policy-header\u2466"}],"title":"6.1. `Permissions-Policy` HTTP Header Field"}],"url":"#permissions-policy-header"},
"permissions-policy-inherited-policy": {"dfnID":"permissions-policy-inherited-policy","dfnText":"inherited policy","external":false,"refSections":[{"refs":[{"id":"ref-for-permissions-policy-inherited-policy"}],"title":"4.2. Policies"},{"refs":[{"id":"ref-for-permissions-policy-inherited-policy\u2460"},{"id":"ref-for-permissions-policy-inherited-policy\u2461"}],"title":"4.3. Inherited policies"},{"refs":[{"id":"ref-for-permissions-policy-inherited-policy\u2462"}],"title":"4.5. Container policies"},{"refs":[{"id":"ref-for-permissions-policy-inherited-policy\u2463"}],"title":"7.2. The permissionsPolicy object"},{"refs":[{"id":"ref-for-permissions-policy-inherited-policy\u2464"}],"title":"9.5. Create a Permissions Policy for a navigable"},{"refs":[{"id":"ref-for-permissions-policy-inherited-policy\u2465"}],"title":"9.6. Create a Permissions Policy for a navigable from response"},{"refs":[{"id":"ref-for-permissions-policy-inherited-policy\u2466"}],"title":"9.8. Get feature value for origin"},{"refs":[{"id":"ref-for-permissions-policy-inherited-policy\u2467"}],"title":"9.9. Check permissions policy"}],"url":"#permissions-policy-inherited-policy"},
"permissions-policy-report-only-header": {"dfnID":"permissions-policy-report-only-header","dfnText":"Permissions-Policy-Report-Only","external":false,"refSections":[{"refs":[{"id":"ref-for-permissions-policy-report-only-header"}],"title":"8.1. `Permissions-Policy-Report-Only` HTTP Header Field"}],"url":"#permissions-policy-report-only-header"},
"permissions-policy-violation-reports": {"dfnID":"permissions-policy-violation-reports","dfnText":"Permissions policy violation reports","external":false,"refSections":[{"refs":[{"id":"ref-for-permissions-policy-violation-reports"},{"id":"ref-for-permissions-policy-violation-reports\u2460"},{"id":"ref-for-permissions-policy-violation-reports\u2461"}],"title":"8. Reporting"}],"url":"#permissions-policy-violation-reports"},
"permissions-source-expression": {"dfnID":"permissions-source-expression","dfnText":"permissions-source-expression","external":false,"refSections":[{"refs":[{"id":"ref-for-permissions-source-expression"},{"id":"ref-for-permissions-source-expression\u2460"}],"title":"4.7. Allowlists"},{"refs":[{"id":"ref-for-permissions-source-expression\u2461"}],"title":"5.1. HTML attribute serialization"},{"refs":[{"id":"ref-for-permissions-source-expression\u2462"}],"title":"5.2. Structured header serialization"},{"refs":[{"id":"ref-for-permissions-source-expression\u2463"}],"title":"7.2. The permissionsPolicy object"},{"refs":[{"id":"ref-for-permissions-source-expression\u2464"}],"title":"9.2. Construct policy from dictionary and origin"}],"url":"#permissions-source-expression"},
"permissionspolicy": {"dfnID":"permissionspolicy","dfnText":"PermissionsPolicy","external":false,"refSections":[{"refs":[{"id":"ref-for-permissionspolicy"}],"title":"7.1. Overview"},{"refs":[{"id":"ref-for-permissionspolicy\u2460"}],"title":"7.1.1. Document policies"},{"refs":[{"id":"ref-for-permissionspolicy\u2461"},{"id":"ref-for-permissionspolicy\u2462"},{"id":"ref-for-permissionspolicy\u2463"},{"id":"ref-for-permissionspolicy\u2464"},{"id":"ref-for-permissionspolicy\u2465"},{"id":"ref-for-permissionspolicy\u2466"},{"id":"ref-for-permissionspolicy\u2467"},{"id":"ref-for-permissionspolicy\u2468"},{"id":"ref-for-permissionspolicy\u2460\u24ea"},{"id":"ref-for-permissionspolicy\u2460\u2460"},{"id":"ref-for-permissionspolicy\u2460\u2461"},{"id":"ref-for-permissionspolicy\u2460\u2462"},{"id":"ref-for-permissionspolicy\u2460\u2463"},{"id":"ref-for-permissionspolicy\u2460\u2464"},{"id":"ref-for-permissionspolicy\u2460\u2465"},{"id":"ref-for-permissionspolicy\u2460\u2466"}],"title":"7.2. The permissionsPolicy object"}],"url":"#permissionspolicy"},
"permissionspolicyviolationreportbody": {"dfnID":"permissionspolicyviolationreportbody","dfnText":"PermissionsPolicyViolationReportBody","external":false,"refSections":[{"refs":[{"id":"ref-for-permissionspolicyviolationreportbody"}],"title":"8. Reporting"},{"refs":[{"id":"ref-for-permissionspolicyviolationreportbody\u2460"}],"title":"9.13. Generate report for violation of permissions policy on settings"},{"refs":[{"id":"ref-for-permissionspolicyviolationreportbody\u2461"}],"title":"9.14. Generate report for potential violation of permissions policy on settings"}],"url":"#permissionspolicyviolationreportbody"},
"permissionspolicyviolationreportbody-allowattribute": {"dfnID":"permissionspolicyviolationreportbody-allowattribute","dfnText":"allowAttribute","external":false,"refSections":[{"refs":[{"id":"ref-for-permissionspolicyviolationreportbody-allowattribute"}],"title":"9.14. Generate report for potential violation of permissions policy on settings"}],"url":"#permissionspolicyviolationreportbody-allowattribute"},
"permissionspolicyviolationreportbody-columnnumber": {"dfnID":"permissionspolicyviolationreportbody-columnnumber","dfnText":"columnNumber","external":false,"refSections":[{"refs":[{"id":"ref-for-permissionspolicyviolationreportbody-columnnumber"},{"id":"ref-for-permissionspolicyviolationreportbody-columnnumber\u2460"}],"title":"9.13. Generate report for violation of permissions policy on settings"},{"refs":[{"id":"ref-for-permissionspolicyviolationreportbody-columnnumber\u2461"},{"id":"ref-for-permissionspolicyviolationreportbody-columnnumber\u2462"}],"title":"9.14. Generate report for potential violation of permissions policy on settings"}],"url":"#permissionspolicyviolationreportbody-columnnumber"},
"permissionspolicyviolationreportbody-disposition": {"dfnID":"permissionspolicyviolationreportbody-disposition","dfnText":"disposition","external":false,"refSections":[{"refs":[{"id":"ref-for-permissionspolicyviolationreportbody-disposition"}],"title":"8. Reporting"},{"refs":[{"id":"ref-for-permissionspolicyviolationreportbody-disposition\u2460"}],"title":"9.13. Generate report for violation of permissions policy on settings"},{"refs":[{"id":"ref-for-permissionspolicyviolationreportbody-disposition\u2461"}],"title":"9.14. Generate report for potential violation of permissions policy on settings"}],"url":"#permissionspolicyviolationreportbody-disposition"},
"permissionspolicyviolationreportbody-featureid": {"dfnID":"permissionspolicyviolationreportbody-featureid","dfnText":"featureId","external":false,"refSections":[{"refs":[{"id":"ref-for-permissionspolicyviolationreportbody-featureid"}],"title":"9.13. Generate report for violation of permissions policy on settings"},{"refs":[{"id":"ref-for-permissionspolicyviolationreportbody-featureid\u2460"}],"title":"9.14. Generate report for potential violation of permissions policy on settings"}],"url":"#permissionspolicyviolationreportbody-featureid"},
"permissionspolicyviolationreportbody-linenumber": {"dfnID":"permissionspolicyviolationreportbody-linenumber","dfnText":"lineNumber","external":false,"refSections":[{"refs":[{"id":"ref-for-permissionspolicyviolationreportbody-linenumber"},{"id":"ref-for-permissionspolicyviolationreportbody-linenumber\u2460"}],"title":"9.13. Generate report for violation of permissions policy on settings"},{"refs":[{"id":"ref-for-permissionspolicyviolationreportbody-linenumber\u2461"},{"id":"ref-for-permissionspolicyviolationreportbody-linenumber\u2462"}],"title":"9.14. Generate report for potential violation of permissions policy on settings"}],"url":"#permissionspolicyviolationreportbody-linenumber"},
"permissionspolicyviolationreportbody-sourcefile": {"dfnID":"permissionspolicyviolationreportbody-sourcefile","dfnText":"sourceFile","external":false,"refSections":[{"refs":[{"id":"ref-for-permissionspolicyviolationreportbody-sourcefile"},{"id":"ref-for-permissionspolicyviolationreportbody-sourcefile\u2460"}],"title":"8. Reporting"},{"refs":[{"id":"ref-for-permissionspolicyviolationreportbody-sourcefile\u2461"},{"id":"ref-for-permissionspolicyviolationreportbody-sourcefile\u2462"}],"title":"9.13. Generate report for violation of permissions policy on settings"},{"refs":[{"id":"ref-for-permissionspolicyviolationreportbody-sourcefile\u2463"},{"id":"ref-for-permissionspolicyviolationreportbody-sourcefile\u2464"}],"title":"9.14. Generate report for potential violation of permissions policy on settings"}],"url":"#permissionspolicyviolationreportbody-sourcefile"},
"policy-controlled-feature": {"dfnID":"policy-controlled-feature","dfnText":"policy-controlled feature","external":false,"refSections":[{"refs":[{"id":"ref-for-policy-controlled-feature"},{"id":"ref-for-policy-controlled-feature\u2460"},{"id":"ref-for-policy-controlled-feature\u2461"},{"id":"ref-for-policy-controlled-feature\u2462"},{"id":"ref-for-policy-controlled-feature\u2463"},{"id":"ref-for-policy-controlled-feature\u2464"}],"title":"4.1. Policy-controlled Features"},{"refs":[{"id":"ref-for-policy-controlled-feature\u2465"},{"id":"ref-for-policy-controlled-feature\u2466"},{"id":"ref-for-policy-controlled-feature\u2467"}],"title":"4.2. Policies"},{"refs":[{"id":"ref-for-policy-controlled-feature\u2468"}],"title":"4.3. Inherited policies"},{"refs":[{"id":"ref-for-policy-controlled-feature\u2460\u24ea"}],"title":"4.6. Policy directives"},{"refs":[{"id":"ref-for-policy-controlled-feature\u2460\u2460"},{"id":"ref-for-policy-controlled-feature\u2460\u2461"}],"title":"4.8. Default Allowlists"},{"refs":[{"id":"ref-for-policy-controlled-feature\u2460\u2462"}],"title":"5.2. Structured header serialization"},{"refs":[{"id":"ref-for-policy-controlled-feature\u2460\u2463"}],"title":"6.2. The allow attribute of the iframe element"},{"refs":[{"id":"ref-for-policy-controlled-feature\u2460\u2464"}],"title":"6.3. Additional attributes to support legacy features"},{"refs":[{"id":"ref-for-policy-controlled-feature\u2460\u2465"}],"title":"8. Reporting"},{"refs":[{"id":"ref-for-policy-controlled-feature\u2460\u2466"},{"id":"ref-for-policy-controlled-feature\u2460\u2467"}],"title":"9.2. Construct policy from dictionary and origin"},{"refs":[{"id":"ref-for-policy-controlled-feature\u2460\u2468"},{"id":"ref-for-policy-controlled-feature\u2461\u24ea"}],"title":"9.3. Parse policy directive"},{"refs":[{"id":"ref-for-policy-controlled-feature\u2461\u2460"}],"title":"9.4. Process permissions policy attributes"},{"refs":[{"id":"ref-for-policy-controlled-feature\u2461\u2461"}],"title":"9.7. Define an inherited policy for feature in container at origin"},{"refs":[{"id":"ref-for-policy-controlled-feature\u2461\u2462"}],"title":"9.8. Get feature value for origin"},{"refs":[{"id":"ref-for-policy-controlled-feature\u2461\u2463"}],"title":"9.9. Check permissions policy"},{"refs":[{"id":"ref-for-policy-controlled-feature\u2461\u2464"}],"title":"9.10. Is feature enabled in document for origin?"},{"refs":[{"id":"ref-for-policy-controlled-feature\u2461\u2465"}],"title":"9.11. Get the reporting endpoint for a feature"},{"refs":[{"id":"ref-for-policy-controlled-feature\u2461\u2466"}],"title":"9.13. Generate report for violation of permissions policy on settings"},{"refs":[{"id":"ref-for-policy-controlled-feature\u2461\u2467"}],"title":"9.14. Generate report for potential violation of permissions policy on settings"},{"refs":[{"id":"ref-for-policy-controlled-feature\u2461\u2468"}],"title":"9.15. Should request be allowed to use feature?"}],"url":"#policy-controlled-feature"},
"policy-controlled-feature-default-allowlist": {"dfnID":"policy-controlled-feature-default-allowlist","dfnText":"default allowlist","external":false,"refSections":[{"refs":[{"id":"ref-for-policy-controlled-feature-default-allowlist"}],"title":"4.1. Policy-controlled Features"},{"refs":[{"id":"ref-for-policy-controlled-feature-default-allowlist\u2460"},{"id":"ref-for-policy-controlled-feature-default-allowlist\u2461"}],"title":"4.8. Default Allowlists"},{"refs":[{"id":"ref-for-policy-controlled-feature-default-allowlist\u2462"},{"id":"ref-for-policy-controlled-feature-default-allowlist\u2463"}],"title":"9.7. Define an inherited policy for feature in container at origin"},{"refs":[{"id":"ref-for-policy-controlled-feature-default-allowlist\u2464"},{"id":"ref-for-policy-controlled-feature-default-allowlist\u2465"}],"title":"9.9. Check permissions policy"}],"url":"#policy-controlled-feature-default-allowlist"},
"policy-controlled-feature-tokens": {"dfnID":"policy-controlled-feature-tokens","dfnText":"tokens","external":false,"refSections":[],"url":"#policy-controlled-feature-tokens"},
"policy-directive": {"dfnID":"policy-directive","dfnText":"policy\n    directive","external":false,"refSections":[{"refs":[{"id":"ref-for-policy-directive"}],"title":"4.1. Policy-controlled Features"},{"refs":[{"id":"ref-for-policy-directive\u2460"}],"title":"4.4. Header policies"},{"refs":[{"id":"ref-for-policy-directive\u2461"}],"title":"4.5. Container policies"},{"refs":[{"id":"ref-for-policy-directive\u2462"}],"title":"4.6. Policy directives"},{"refs":[{"id":"ref-for-policy-directive\u2463"}],"title":"5.1. HTML attribute serialization"},{"refs":[{"id":"ref-for-policy-directive\u2464"},{"id":"ref-for-policy-directive\u2465"}],"title":"5.2. Structured header serialization"},{"refs":[{"id":"ref-for-policy-directive\u2466"}],"title":"9.3. Parse policy directive"},{"refs":[{"id":"ref-for-policy-directive\u2467"}],"title":"9.4. Process permissions policy attributes"}],"url":"#policy-directive"},
"process-policy-attributes": {"dfnID":"process-policy-attributes","dfnText":"Process permissions policy attributes","external":false,"refSections":[{"refs":[{"id":"ref-for-process-policy-attributes"}],"title":"9.7. Define an inherited policy for feature in container at origin"}],"url":"#process-policy-attributes"},
"process-response-policy": {"dfnID":"process-response-policy","dfnText":"Process response policy","external":false,"refSections":[{"refs":[{"id":"ref-for-process-response-policy"}],"title":"9.6. Create a Permissions Policy for a navigable from response"}],"url":"#process-response-policy"},
"report-permissions-policy-violation": {"dfnID":"report-permissions-policy-violation","dfnText":"Generate report for violation of permissions policy on settings","external":false,"refSections":[{"refs":[{"id":"ref-for-report-permissions-policy-violation"},{"id":"ref-for-report-permissions-policy-violation\u2460"}],"title":"9.10. Is feature enabled in document for origin?"}],"url":"#report-permissions-policy-violation"},
"report-potential-permissions-policy-violation": {"dfnID":"report-potential-permissions-policy-violation","dfnText":"Generate report for potential violation of permissions policy on settings","external":false,"refSections":[{"refs":[{"id":"ref-for-report-potential-permissions-policy-violation"},{"id":"ref-for-report-potential-permissions-policy-violation\u2460"}],"title":"9.12. Check potential violation of permissions policy in container"}],"url":"#report-potential-permissions-policy-violation"},
"self-origin": {"dfnID":"self-origin","dfnText":"self-origin","external":false,"refSections":[{"refs":[{"id":"ref-for-self-origin"}],"title":"4.7. Allowlists"},{"refs":[{"id":"ref-for-self-origin\u2460"}],"title":"7.2. The permissionsPolicy object"},{"refs":[{"id":"ref-for-self-origin\u2461"},{"id":"ref-for-self-origin\u2462"}],"title":"9.2. Construct policy from dictionary and origin"},{"refs":[{"id":"ref-for-self-origin\u2463"}],"title":"9.3. Parse policy directive"}],"url":"#self-origin"},
"serialized-permissions-policy": {"dfnID":"serialized-permissions-policy","dfnText":"serialized-permissions-policy","external":false,"refSections":[],"url":"#serialized-permissions-policy"},
"serialized-policy-directive": {"dfnID":"serialized-policy-directive","dfnText":"serialized-policy-directive","external":false,"refSections":[{"refs":[{"id":"ref-for-serialized-policy-directive"},{"id":"ref-for-serialized-policy-directive\u2460"}],"title":"5.1. HTML attribute serialization"},{"refs":[{"id":"ref-for-serialized-policy-directive"}],"title":"6.2. The allow attribute of the iframe element"}],"url":"#serialized-policy-directive"},
"should-request-be-allowed-to-use-feature": {"dfnID":"should-request-be-allowed-to-use-feature","dfnText":"Should request be allowed to use feature?","external":false,"refSections":[],"url":"#should-request-be-allowed-to-use-feature"},
"src-origin": {"dfnID":"src-origin","dfnText":"src-origin","external":false,"refSections":[{"refs":[{"id":"ref-for-src-origin"}],"title":"4.7. Allowlists"},{"refs":[{"id":"ref-for-src-origin\u2460"}],"title":"7.2. The permissionsPolicy object"},{"refs":[{"id":"ref-for-src-origin\u2461"},{"id":"ref-for-src-origin\u2462"}],"title":"9.3. Parse policy directive"}],"url":"#src-origin"},
"supported-features": {"dfnID":"supported-features","dfnText":"supported features","external":false,"refSections":[{"refs":[{"id":"ref-for-supported-features"}],"title":"4.2. Policies"},{"refs":[{"id":"ref-for-supported-features\u2460"}],"title":"4.3. Inherited policies"},{"refs":[{"id":"ref-for-supported-features\u2461"}],"title":"5.2. Structured header serialization"},{"refs":[{"id":"ref-for-supported-features\u2462"},{"id":"ref-for-supported-features\u2463"},{"id":"ref-for-supported-features\u2464"}],"title":"7.2. The permissionsPolicy object"},{"refs":[{"id":"ref-for-supported-features\u2465"}],"title":"9.5. Create a Permissions Policy for a navigable"},{"refs":[{"id":"ref-for-supported-features\u2466"}],"title":"9.12. Check potential violation of permissions policy in container"}],"url":"#supported-features"},
"the-special-value": {"dfnID":"the-special-value","dfnText":"The special value *","external":false,"refSections":[{"refs":[{"id":"ref-for-the-special-value"}],"title":"4.7. Allowlists"},{"refs":[{"id":"ref-for-the-special-value\u2460"}],"title":"9.2. Construct policy from dictionary and origin"},{"refs":[{"id":"ref-for-the-special-value\u2461"}],"title":"9.3. Parse policy directive"},{"refs":[{"id":"ref-for-the-special-value\u2462"}],"title":"9.4. Process permissions policy attributes"}],"url":"#the-special-value"},
"violate": {"dfnID":"violate","dfnText":"violate","external":false,"refSections":[{"refs":[{"id":"ref-for-violate"},{"id":"ref-for-violate\u2460"},{"id":"ref-for-violate\u2461"},{"id":"ref-for-violate\u2462"},{"id":"ref-for-violate\u2463"},{"id":"ref-for-violate\u2464"},{"id":"ref-for-violate\u2465"}],"title":"8. Reporting"},{"refs":[{"id":"ref-for-violate\u2466"}],"title":"9.13. Generate report for violation of permissions policy on settings"},{"refs":[{"id":"ref-for-violate\u2467"}],"title":"9.14. Generate report for potential violation of permissions policy on settings"},{"refs":[{"id":"ref-for-violate\u2468"}],"title":"12.1. Exposure of cross-origin behavior"}],"url":"#violate"},
};

document.addEventListener("DOMContentLoaded", ()=>{
    genAllDfnPanels();

    document.body.addEventListener("click", (e) => {
        // If not handled already, just hide all dfn panels.
        hideAllDfnPanels();
    });
});

window.addEventListener("resize", () => {
    // Pin any visible dfn panel
    queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(el=>positionDfnPanel(el));
});

function genAllDfnPanels() {
    for(const panelData of Object.values(dfnPanelData)) {
        const dfnID = panelData.dfnID;
        const dfn = document.getElementById(dfnID);
        if(!dfn) {
            console.log(`Can't find dfn#${dfnID}.`, panelData);
            continue;
        }
        dfn.panelData = panelData;
        insertDfnPopupAction(dfn);
    }
}

function genDfnPanel(dfn, { dfnID, url, dfnText, refSections, external }) {
    const dfnPanel = mk.aside({
        class: "dfn-panel on",
        id: `infopanel-for-${dfnID}`,
        "data-for": dfnID,
        "aria-labelled-by":`infopaneltitle-for-${dfnID}`,
        },
        mk.span({id:`infopaneltitle-for-${dfnID}`, style:"display:none"},
            `Info about the '${dfnText}' ${external?"external":""} reference.`),
        mk.a({href:url, class:"dfn-link"}, url),
        refSections.length == 0 ? [] :
            mk.b({}, "Referenced in:"),
            mk.ul({},
                ...refSections.map(section=>
                    mk.li({},
                        ...section.refs.map((ref, refI)=>
                            [
                                mk.a({ href: `#${ref.id}` },
                                    (refI == 0) ? section.title : `(${refI + 1})`
                                ),
                                " ",
                            ]
                        ),
                    ),
                ),
            ),
        genLinkingSyntaxes(dfn),
    );

    dfnPanel.addEventListener('click', (event) => {
        if (event.target.nodeName == 'A') {
            scrollToTargetAndHighlight(event);
            pinDfnPanel(dfnPanel);
        }
        event.stopPropagation();
        refocusOnTarget(event);
    });
    dfnPanel.addEventListener('keydown', (event) => {
        if(event.keyCode == 27) { // Escape key
            hideDfnPanel({dfnPanel});
            event.stopPropagation();
            event.preventDefault();
        }
    });

    dfnPanel.dfn = dfn;
    dfn.dfnPanel = dfnPanel;
    return dfnPanel;
}



function hideAllDfnPanels() {
    // Delete the currently-active dfn panel.
    queryAll(".dfn-panel").forEach(dfnPanel=>hideDfnPanel({dfnPanel}));
}

function showDfnPanel(dfn) {
    hideAllDfnPanels(); // Only display one at a time.

    dfn.setAttribute("aria-expanded", "true");

    const dfnPanel = genDfnPanel(dfn, dfn.panelData);

    // Give the dfn a unique tabindex, and then
    // give all the tabbable panel bits successive indexes.
    let tabIndex = 100;
    dfn.tabIndex = tabIndex++;
    const tabbable = dfnPanel.querySelectorAll(":is(a, button)");
    for (const el of tabbable) {
        el.tabIndex = tabIndex++;
    }

    append(document.body, dfnPanel);
    positionDfnPanel(dfnPanel);
}

function positionDfnPanel(dfnPanel) {
    const dfn = dfnPanel.dfn;
    const dfnPos = getBounds(dfn);
    dfnPanel.style.top = dfnPos.bottom + "px";
    dfnPanel.style.left = dfnPos.left + "px";

    const panelPos = dfnPanel.getBoundingClientRect();
    const panelMargin = 8;
    const maxRight = document.body.parentNode.clientWidth - panelMargin;
    if (panelPos.right > maxRight) {
        const overflowAmount = panelPos.right - maxRight;
        const newLeft = Math.max(panelMargin, dfnPos.left - overflowAmount);
        dfnPanel.style.left = newLeft + "px";
    }
}

function pinDfnPanel(dfnPanel) {
    // Switch it to "activated" state, which pins it.
    dfnPanel.classList.add("activated");
    dfnPanel.style.position = "fixed";
    dfnPanel.style.left = null;
    dfnPanel.style.top = null;
}

function hideDfnPanel({dfn, dfnPanel}) {
    if(!dfnPanel) dfnPanel = dfn.dfnPanel;
    if(!dfn) dfn = dfnPanel.dfn;
    dfn.dfnPanel = undefined;
    dfnPanel.dfn = undefined;
    dfn.setAttribute("aria-expanded", "false");
    dfn.tabIndex = undefined;
    dfnPanel.remove()
}

function toggleDfnPanel(dfn) {
    if(dfn.dfnPanel) {
        hideDfnPanel(dfn);
    } else {
        showDfnPanel(dfn);
    }
}

function insertDfnPopupAction(dfn) {
    dfn.setAttribute('role', 'button');
    dfn.setAttribute('aria-expanded', 'false')
    dfn.tabIndex = 0;
    dfn.classList.add('has-dfn-panel');
    dfn.addEventListener('click', (event) => {
        toggleDfnPanel(dfn);
        event.stopPropagation();
    });
    dfn.addEventListener('keypress', (event) => {
        const kc = event.keyCode;
        // 32->Space, 13->Enter
        if(kc == 32 || kc == 13) {
            toggleDfnPanel(dfn);
            event.stopPropagation();
            event.preventDefault();
        }
    });
}

function refocusOnTarget(event) {
    const target = event.target;
    setTimeout(() => {
        // Refocus on the event.target element.
        // This is needed after browser scrolls to the destination.
        target.focus();
    });
}

// TODO: shared util
// Returns the root-level absolute position {left and top} of element.
function getBounds(el, relativeTo=document.body) {
    const relativeRect = relativeTo.getBoundingClientRect();
    const elRect = el.getBoundingClientRect();
    const top = elRect.top - relativeRect.top;
    const left = elRect.left - relativeRect.left;
    return {
        top,
        left,
        bottom: top + elRect.height,
        right: left + elRect.width,
    }
}

function scrollToTargetAndHighlight(event) {
    let hash = event.target.hash;
    if (hash) {
        hash = decodeURIComponent(hash.substring(1));
        const dest = document.getElementById(hash);
        if (dest) {
            dest.classList.add('highlighted');
            setTimeout(() => dest.classList.remove('highlighted'), 1000);
        }
    }
}

// Functions, divided by link type, that wrap an autolink's
// contents with the appropriate outer syntax.
// Alternately, a string naming another type they format
// the same as.
function needsFor(type) {
    switch(type) {
        case "descriptor":
        case "value":
        case "element-attr":
        case "attr-value":
        case "element-state":
        case "method":
        case "constructor":
        case "argument":
        case "attribute":
        case "const":
        case "dict-member":
        case "event":
        case "enum-value":
        case "stringifier":
        case "serializer":
        case "iterator":
        case "maplike":
        case "setlike":
        case "state":
        case "mode":
        case "context":
        case "facet": return true;

        default: return false;
    }
}
function refusesFor(type) {
    switch(type) {
        case "property":
        case "element":
        case "interface":
        case "namespace":
        case "callback":
        case "dictionary":
        case "enum":
        case "exception":
        case "typedef":
        case "http-header":
        case "permission": return true;

        default: return false;
    }
}
function linkFormatterFromType(type) {
    switch(type) {
        case 'scheme':
        case 'permission':
        case 'dfn': return (text) => `[=${text}=]`;

        case 'abstract-op': return (text) => `[\$${text}\$]`;

        case 'function':
        case 'at-rule':
        case 'selector':
        case 'value': return (text) => `''${text}''`;

        case 'http-header': return (text) => `[:${text}:]`;

        case 'interface':
        case 'constructor':
        case 'method':
        case 'argument':
        case 'attribute':
        case 'callback':
        case 'dictionary':
        case 'dict-member':
        case 'enum':
        case 'enum-value':
        case 'exception':
        case 'const':
        case 'typedef':
        case 'stringifier':
        case 'serializer':
        case 'iterator':
        case 'maplike':
        case 'setlike':
        case 'extended-attribute':
        case 'event':
        case 'idl': return (text) => `{{${text}}}`;

        case 'element-state':
        case 'element-attr':
        case 'attr-value':
        case 'element': return (element) => `<{${element}}>`;

        case 'grammar': return (text) => `${text} (within a <pre class=prod>)`;

        case 'type': return (text)=> `<<${text}>>`;

        case 'descriptor':
        case 'property': return (text) => `'${text}'`;

        default: return;
    };
};

function genLinkingSyntaxes(dfn) {
    if(dfn.tagName != "DFN") return;

    const type = dfn.getAttribute('data-dfn-type');
    if(!type) {
        console.log(`<dfn> doesn't have a data-dfn-type:`, dfn);
        return [];
    }

    // Return a function that wraps link text based on the type
    const linkFormatter = linkFormatterFromType(type);
    if(!linkFormatter) {
        console.log(`<dfn> has an unknown data-dfn-type:`, dfn);
        return [];
    }

    let ltAlts;
    if(dfn.hasAttribute('data-lt')) {
        ltAlts = dfn.getAttribute('data-lt')
            .split("|")
            .map(x=>x.trim());
    } else {
        ltAlts = [dfn.textContent.trim()];
    }
    if(type == "type") {
        // lt of "<foo>", but "foo" is the interior;
        // <<foo/bar>> is how you write it with a for,
        // not <foo/<bar>> or whatever.
        for(var i = 0; i < ltAlts.length; i++) {
            const lt = ltAlts[i];
            const match = /<(.*)>/.exec(lt);
            if(match) { ltAlts[i] = match[1]; }
        }
    }

    let forAlts;
    if(dfn.hasAttribute('data-dfn-for')) {
        forAlts = dfn.getAttribute('data-dfn-for')
            .split(",")
            .map(x=>x.trim());
    } else {
        forAlts = [''];
    }

    let linkingSyntaxes = [];
    if(!needsFor(type)) {
        for(const lt of ltAlts) {
            linkingSyntaxes.push(linkFormatter(lt));
        }
    }
    if(!refusesFor(type)) {
        for(const f of forAlts) {
            linkingSyntaxes.push(linkFormatter(`${f}/${ltAlts[0]}`))
        }
    }
    return [
        mk.b({}, 'Possible linking syntaxes:'),
        mk.ul({},
            ...linkingSyntaxes.map(link => {
                const copyLink = async () =>
                    await navigator.clipboard.writeText(link);
                return mk.li({},
                    mk.div({ class: 'link-item' },
                        mk.button({
                            class: 'copy-icon', title: 'Copy',
                            type: 'button',
                            _onclick: copyLink,
                            tabindex: 0,
                        }, mk.span({ class: 'icon' }) ),
                        mk.span({}, link)
                    )
                );
            })
        )
    ];
}
}
</script>
<script>/* Boilerplate: script-position-annos */
"use strict";
{
function repositionAnnoPanels(){
    const panels = [...document.querySelectorAll("[data-anno-for]")];
    hydratePanels(panels);
    let vSoFar = 0;
    for(const panel of panels.sort(cmpTops)) {
        if(panel.top < vSoFar) {
            panel.top = vSoFar;
            panel.style.top = vSoFar + "px";
        }
        vSoFar = panel.top + panel.height + 15;
    }
}
function hydratePanels(panels) {
    const main = document.querySelector("main");
    let mainRect;
    if(main) mainRect = main.getBoundingClientRect();
    // First display them all, if they're not already visible.
    for(const panel of panels) {
        panel.classList.remove("unpositioned");
    }
    // Measure them all
    for(const panel of panels) {
        const dfn = document.getElementById(panel.getAttribute("data-anno-for"));
        if(!dfn) {
            console.log("Can't find the annotation panel target:", panel);
            continue;
        }
        panel.dfn = dfn;
        panel.top = window.scrollY + dfn.getBoundingClientRect().top;
        let panelRect = panel.getBoundingClientRect();
        panel.height = panelRect.height;
        if(main) {
            panel.overlappingMain = panelRect.left < mainRect.right;
        } else {
            panel.overlappingMain = false;
        }
    }
    // And finally position them
    for(const panel of panels) {
        const dfn = panel.dfn;
        if(!dfn) continue;
        panel.style.top = panel.top + "px";
        panel.classList.toggle("overlapping-main", panel.overlappingMain);
    }
}

function cmpTops(a,b) {
    return a.top - b.top;
}

window.addEventListener("load", repositionAnnoPanels);
window.addEventListener("resize", repositionAnnoPanels);
}
</script>
<script>/* Boilerplate: script-ref-hints */
"use strict";
{
let refsData = {
"#allow-list": {"displayText":"allow-list","export":true,"for_":[],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"local","text":"allow-list","type":"dfn","url":"#allow-list"},
"#allow-list-value": {"displayText":"allow-list-value","export":true,"for_":[],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"local","text":"allow-list-value","type":"dfn","url":"#allow-list-value"},
"#allowlist": {"displayText":"allowlist","export":true,"for_":[],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"local","text":"allowlist","type":"dfn","url":"#allowlist"},
"#associated-node": {"displayText":"associated node","export":true,"for_":[],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"local","text":"associated node","type":"dfn","url":"#associated-node"},
"#check-permissions-policy": {"displayText":"Check permissions policy","export":true,"for_":[],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"local","text":"Check permissions policy","type":"abstract-op","url":"#check-permissions-policy"},
"#check-potential-violation-in-container": {"displayText":"Check potential violation of permissions policy in container","export":true,"for_":[],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"local","text":"Check potential violation of permissions policy in container","type":"abstract-op","url":"#check-potential-violation-in-container"},
"#construct-policy": {"displayText":"Construct policy from dictionary and origin","export":true,"for_":[],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"local","text":"Construct policy from dictionary and origin","type":"abstract-op","url":"#construct-policy"},
"#container-policy": {"displayText":"container policy","export":true,"for_":[],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"local","text":"container policy","type":"dfn","url":"#container-policy"},
"#create-for-navigable": {"displayText":"Create a Permissions Policy for a navigable","export":true,"for_":[],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"local","text":"Create a Permissions Policy for a navigable","type":"abstract-op","url":"#create-for-navigable"},
"#create-from-response": {"displayText":"Create a Permissions Policy for a navigable from response","export":true,"for_":[],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"local","text":"Create a Permissions Policy for a navigable from response","type":"abstract-op","url":"#create-from-response"},
"#declared-origin": {"displayText":"declared origin","export":true,"for_":[],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"local","text":"declared origin","type":"dfn","url":"#declared-origin"},
"#declared-policy": {"displayText":"declared policy","export":true,"for_":[],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"local","text":"declared policy","type":"dfn","url":"#declared-policy"},
"#declared-policy-declarations": {"displayText":"declarations","export":true,"for_":["declared policy"],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"local","text":"declarations","type":"dfn","url":"#declared-policy-declarations"},
"#declared-policy-reporting-configuration": {"displayText":"reporting configuration","export":true,"for_":["declared policy"],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"local","text":"reporting configuration","type":"dfn","url":"#declared-policy-reporting-configuration"},
"#default-origin": {"displayText":"default origin","export":true,"for_":[],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"local","text":"default origin","type":"dfn","url":"#default-origin"},
"#define-inherited-policy-in-container": {"displayText":"Define an inherited policy for feature in container at origin","export":true,"for_":[],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"local","text":"Define an inherited policy for feature in container at origin","type":"abstract-op","url":"#define-inherited-policy-in-container"},
"#document-policy-object": {"displayText":"policy object","export":true,"for_":["Document"],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"local","text":"policy object","type":"dfn","url":"#document-policy-object"},
"#document-report-only-permissions-policy": {"displayText":"report-only permissions policy","export":true,"for_":["Document"],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"local","text":"report-only permissions policy","type":"dfn","url":"#document-report-only-permissions-policy"},
"#dom-document-permissionspolicy": {"displayText":"permissionsPolicy","export":true,"for_":["Document"],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"local","text":"permissionsPolicy","type":"attribute","url":"#dom-document-permissionspolicy"},
"#dom-htmliframeelement-permissionspolicy": {"displayText":"permissionsPolicy","export":true,"for_":["HTMLIFrameElement"],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"local","text":"permissionsPolicy","type":"attribute","url":"#dom-htmliframeelement-permissionspolicy"},
"#dom-permissionspolicy-allowedfeatures": {"displayText":"allowedFeatures()","export":true,"for_":["PermissionsPolicy"],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"local","text":"allowedFeatures()","type":"method","url":"#dom-permissionspolicy-allowedfeatures"},
"#dom-permissionspolicy-allowsfeature": {"displayText":"allowsFeature(feature, origin)","export":true,"for_":["PermissionsPolicy"],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"local","text":"allowsFeature(feature, origin)","type":"method","url":"#dom-permissionspolicy-allowsfeature"},
"#dom-permissionspolicy-features": {"displayText":"features()","export":true,"for_":["PermissionsPolicy"],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"local","text":"features()","type":"method","url":"#dom-permissionspolicy-features"},
"#dom-permissionspolicy-getallowlistforfeature": {"displayText":"getAllowlistForFeature(feature)","export":true,"for_":["PermissionsPolicy"],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"local","text":"getAllowlistForFeature(feature)","type":"method","url":"#dom-permissionspolicy-getallowlistforfeature"},
"#expressions": {"displayText":"expressions","export":true,"for_":[],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"local","text":"expressions","type":"dfn","url":"#expressions"},
"#feature-identifier": {"displayText":"feature-identifier","export":true,"for_":[],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"local","text":"feature-identifier","type":"dfn","url":"#feature-identifier"},
"#get-feature-value-for-origin": {"displayText":"Get feature value for origin","export":true,"for_":[],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"local","text":"Get feature value for origin","type":"abstract-op","url":"#get-feature-value-for-origin"},
"#get-reporting-endpoint": {"displayText":"Get the reporting endpoint for a feature","export":true,"for_":[],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"local","text":"Get the reporting endpoint for a feature","type":"abstract-op","url":"#get-reporting-endpoint"},
"#header-policy": {"displayText":"header policy","export":true,"for_":[],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"local","text":"header policy","type":"dfn","url":"#header-policy"},
"#iframe-policy-object": {"displayText":"policy object","export":true,"for_":["iframe"],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"local","text":"policy object","type":"dfn","url":"#iframe-policy-object"},
"#inherited-policy-for-a-feature": {"displayText":"inherited policy for a feature","export":true,"for_":[],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"local","text":"inherited policy for a feature","type":"dfn","url":"#inherited-policy-for-a-feature"},
"#is-feature-enabled": {"displayText":"Is feature enabled in document for origin?","export":true,"for_":[],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"local","text":"Is feature enabled in document for origin?","type":"abstract-op","url":"#is-feature-enabled"},
"#matches": {"displayText":"matches","export":true,"for_":[],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"local","text":"matches","type":"dfn","url":"#matches"},
"#observable-policy": {"displayText":"observable policy","export":true,"for_":[],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"local","text":"observable policy","type":"dfn","url":"#observable-policy"},
"#parse-policy-directive": {"displayText":"Parse policy directive","export":true,"for_":[],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"local","text":"Parse policy directive","type":"abstract-op","url":"#parse-policy-directive"},
"#permissions-policy": {"displayText":"permissions policy","export":true,"for_":[],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"local","text":"permissions policy","type":"dfn","url":"#permissions-policy"},
"#permissions-policy-declared-policy": {"displayText":"declared policy","export":true,"for_":["permissions policy"],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"local","text":"declared policy","type":"dfn","url":"#permissions-policy-declared-policy"},
"#permissions-policy-header": {"displayText":"permissions-policy","export":true,"for_":[],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"local","text":"permissions-policy","type":"http-header","url":"#permissions-policy-header"},
"#permissions-policy-inherited-policy": {"displayText":"inherited policy","export":true,"for_":["permissions policy"],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"local","text":"inherited policy","type":"dfn","url":"#permissions-policy-inherited-policy"},
"#permissions-policy-report-only-header": {"displayText":"permissions-policy-report-only","export":true,"for_":[],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"local","text":"permissions-policy-report-only","type":"http-header","url":"#permissions-policy-report-only-header"},
"#permissions-policy-violation-reports": {"displayText":"permissions policy violation reports","export":true,"for_":[],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"local","text":"permissions policy violation reports","type":"dfn","url":"#permissions-policy-violation-reports"},
"#permissions-source-expression": {"displayText":"permissions-source-expression","export":true,"for_":[],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"local","text":"permissions-source-expression","type":"dfn","url":"#permissions-source-expression"},
"#permissionspolicy": {"displayText":"PermissionsPolicy","export":true,"for_":[],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"local","text":"PermissionsPolicy","type":"interface","url":"#permissionspolicy"},
"#permissionspolicyviolationreportbody": {"displayText":"PermissionsPolicyViolationReportBody","export":true,"for_":[],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"local","text":"PermissionsPolicyViolationReportBody","type":"interface","url":"#permissionspolicyviolationreportbody"},
"#permissionspolicyviolationreportbody-allowattribute": {"displayText":"allowattribute","export":true,"for_":["PermissionsPolicyViolationReportBody"],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"local","text":"allowattribute","type":"dfn","url":"#permissionspolicyviolationreportbody-allowattribute"},
"#permissionspolicyviolationreportbody-columnnumber": {"displayText":"columnnumber","export":true,"for_":["PermissionsPolicyViolationReportBody"],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"local","text":"columnnumber","type":"dfn","url":"#permissionspolicyviolationreportbody-columnnumber"},
"#permissionspolicyviolationreportbody-disposition": {"displayText":"disposition","export":true,"for_":["PermissionsPolicyViolationReportBody"],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"local","text":"disposition","type":"dfn","url":"#permissionspolicyviolationreportbody-disposition"},
"#permissionspolicyviolationreportbody-featureid": {"displayText":"featureid","export":true,"for_":["PermissionsPolicyViolationReportBody"],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"local","text":"featureid","type":"dfn","url":"#permissionspolicyviolationreportbody-featureid"},
"#permissionspolicyviolationreportbody-linenumber": {"displayText":"linenumber","export":true,"for_":["PermissionsPolicyViolationReportBody"],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"local","text":"linenumber","type":"dfn","url":"#permissionspolicyviolationreportbody-linenumber"},
"#permissionspolicyviolationreportbody-sourcefile": {"displayText":"sourcefile","export":true,"for_":["PermissionsPolicyViolationReportBody"],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"local","text":"sourcefile","type":"dfn","url":"#permissionspolicyviolationreportbody-sourcefile"},
"#policy-controlled-feature": {"displayText":"policy-controlled feature","export":true,"for_":[],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"local","text":"policy-controlled feature","type":"dfn","url":"#policy-controlled-feature"},
"#policy-controlled-feature-default-allowlist": {"displayText":"default allowlist","export":true,"for_":["policy-controlled feature"],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"local","text":"default allowlist","type":"dfn","url":"#policy-controlled-feature-default-allowlist"},
"#policy-directive": {"displayText":"policy directives","export":true,"for_":[],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"local","text":"policy directives","type":"dfn","url":"#policy-directive"},
"#process-policy-attributes": {"displayText":"Process permissions policy attributes","export":true,"for_":[],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"local","text":"Process permissions policy attributes","type":"abstract-op","url":"#process-policy-attributes"},
"#process-response-policy": {"displayText":"Process response policy","export":true,"for_":[],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"local","text":"Process response policy","type":"abstract-op","url":"#process-response-policy"},
"#report-permissions-policy-violation": {"displayText":"Generate report for violation of permissions policy on settings","export":true,"for_":[],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"local","text":"Generate report for violation of permissions policy on settings","type":"abstract-op","url":"#report-permissions-policy-violation"},
"#report-potential-permissions-policy-violation": {"displayText":"Generate report for potential violation of permissions policy on settings","export":true,"for_":[],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"local","text":"Generate report for potential violation of permissions policy on settings","type":"abstract-op","url":"#report-potential-permissions-policy-violation"},
"#self-origin": {"displayText":"self-origin","export":true,"for_":[],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"local","text":"self-origin","type":"dfn","url":"#self-origin"},
"#serialized-policy-directive": {"displayText":"serialized-policy-directive","export":true,"for_":[],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"local","text":"serialized-policy-directive","type":"dfn","url":"#serialized-policy-directive"},
"#src-origin": {"displayText":"src-origin","export":true,"for_":[],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"local","text":"src-origin","type":"dfn","url":"#src-origin"},
"#supported-features": {"displayText":"supported features","export":true,"for_":[],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"local","text":"supported features","type":"dfn","url":"#supported-features"},
"#the-special-value": {"displayText":"the special value *","export":true,"for_":[],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"local","text":"the special value *","type":"dfn","url":"#the-special-value"},
"#violate": {"displayText":"violated","export":true,"for_":[],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"local","text":"violated","type":"dfn","url":"#violate"},
"https://datatracker.ietf.org/doc/html/rfc8941#dictionary": {"displayText":"sf-dictionary","export":true,"for_":[],"level":"","normative":true,"shortname":"rfc8941","spec":"rfc8941","status":"anchor-block","text":"sf-dictionary","type":"dfn","url":"https://datatracker.ietf.org/doc/html/rfc8941#dictionary"},
"https://dom.spec.whatwg.org/#clone-a-node-document": {"displayText":"document","export":true,"for_":["clone a node"],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"document","type":"dfn","url":"https://dom.spec.whatwg.org/#clone-a-node-document"},
"https://dom.spec.whatwg.org/#concept-document-origin": {"displayText":"origin","export":true,"for_":["Document"],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"origin","type":"dfn","url":"https://dom.spec.whatwg.org/#concept-document-origin"},
"https://dom.spec.whatwg.org/#concept-element": {"displayText":"element","export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"element","type":"dfn","url":"https://dom.spec.whatwg.org/#concept-element"},
"https://dom.spec.whatwg.org/#concept-node-document": {"displayText":"node document","export":true,"for_":["Node"],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"node document","type":"dfn","url":"https://dom.spec.whatwg.org/#concept-node-document"},
"https://dom.spec.whatwg.org/#document": {"displayText":"Document","export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"Document","type":"interface","url":"https://dom.spec.whatwg.org/#document"},
"https://dom.spec.whatwg.org/#element": {"displayText":"Element","export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"Element","type":"interface","url":"https://dom.spec.whatwg.org/#element"},
"https://dom.spec.whatwg.org/#node": {"displayText":"Node","export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"Node","type":"interface","url":"https://dom.spec.whatwg.org/#node"},
"https://fetch.spec.whatwg.org/#concept-header-list-get-structured-header": {"displayText":"get a structured field value","export":true,"for_":["header list"],"level":"1","normative":true,"shortname":"fetch","spec":"fetch","status":"current","text":"get a structured field value","type":"dfn","url":"https://fetch.spec.whatwg.org/#concept-header-list-get-structured-header"},
"https://fetch.spec.whatwg.org/#concept-request": {"displayText":"request","export":true,"for_":[],"level":"1","normative":true,"shortname":"fetch","spec":"fetch","status":"current","text":"request","type":"dfn","url":"https://fetch.spec.whatwg.org/#concept-request"},
"https://fetch.spec.whatwg.org/#concept-request-origin": {"displayText":"origin","export":true,"for_":["request"],"level":"1","normative":true,"shortname":"fetch","spec":"fetch","status":"current","text":"origin","type":"dfn","url":"https://fetch.spec.whatwg.org/#concept-request-origin"},
"https://fetch.spec.whatwg.org/#concept-request-window": {"displayText":"window","export":true,"for_":["request"],"level":"1","normative":true,"shortname":"fetch","spec":"fetch","status":"current","text":"window","type":"dfn","url":"https://fetch.spec.whatwg.org/#concept-request-window"},
"https://fetch.spec.whatwg.org/#concept-response-header-list": {"displayText":"header list","export":true,"for_":["response"],"level":"1","normative":true,"shortname":"fetch","spec":"fetch","status":"current","text":"header list","type":"dfn","url":"https://fetch.spec.whatwg.org/#concept-response-header-list"},
"https://fetch.spec.whatwg.org/#concept-response-response": {"displayText":"response","export":true,"for_":["Response"],"level":"1","normative":true,"shortname":"fetch","spec":"fetch","status":"current","text":"response","type":"dfn","url":"https://fetch.spec.whatwg.org/#concept-response-response"},
"https://fullscreen.spec.whatwg.org/#dom-element-requestfullscreen": {"displayText":"requestFullscreen()","export":true,"for_":["Element"],"level":"1","normative":true,"shortname":"fullscreen","spec":"fullscreen","status":"current","text":"requestFullscreen()","type":"method","url":"https://fullscreen.spec.whatwg.org/#dom-element-requestfullscreen"},
"https://html.spec.whatwg.org/multipage/browsers.html#ascii-serialisation-of-an-origin": {"displayText":"serialization of an origin","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"serialization of an origin","type":"dfn","url":"https://html.spec.whatwg.org/multipage/browsers.html#ascii-serialisation-of-an-origin"},
"https://html.spec.whatwg.org/multipage/browsers.html#concept-origin-opaque": {"displayText":"opaque origin","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"opaque origin","type":"dfn","url":"https://html.spec.whatwg.org/multipage/browsers.html#concept-origin-opaque"},
"https://html.spec.whatwg.org/multipage/browsers.html#same-origin": {"displayText":"same origin","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"same origin","type":"dfn","url":"https://html.spec.whatwg.org/multipage/browsers.html#same-origin"},
"https://html.spec.whatwg.org/multipage/browsers.html#same-origin-domain": {"displayText":"same origin-domain","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"same origin-domain","type":"dfn","url":"https://html.spec.whatwg.org/multipage/browsers.html#same-origin-domain"},
"https://html.spec.whatwg.org/multipage/browsers.html#sandboxed-origin-browsing-context-flag": {"displayText":"sandboxed origin browsing context flag","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"sandboxed origin browsing context flag","type":"dfn","url":"https://html.spec.whatwg.org/multipage/browsers.html#sandboxed-origin-browsing-context-flag"},
"https://html.spec.whatwg.org/multipage/document-sequences.html#child-navigable": {"displayText":"child navigable","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"child navigable","type":"dfn","url":"https://html.spec.whatwg.org/multipage/document-sequences.html#child-navigable"},
"https://html.spec.whatwg.org/multipage/document-sequences.html#content-navigable": {"displayText":"content navigable","export":true,"for_":["navigable container"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"content navigable","type":"dfn","url":"https://html.spec.whatwg.org/multipage/document-sequences.html#content-navigable"},
"https://html.spec.whatwg.org/multipage/document-sequences.html#descendant-navigables": {"displayText":"descendant navigables","export":true,"for_":["Document"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"descendant navigables","type":"dfn","url":"https://html.spec.whatwg.org/multipage/document-sequences.html#descendant-navigables"},
"https://html.spec.whatwg.org/multipage/document-sequences.html#nav-document": {"displayText":"active document","export":true,"for_":["navigable"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"active document","type":"dfn","url":"https://html.spec.whatwg.org/multipage/document-sequences.html#nav-document"},
"https://html.spec.whatwg.org/multipage/document-sequences.html#nav-parent": {"displayText":"parent","export":true,"for_":["navigable"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"parent","type":"dfn","url":"https://html.spec.whatwg.org/multipage/document-sequences.html#nav-parent"},
"https://html.spec.whatwg.org/multipage/document-sequences.html#navigable": {"displayText":"navigable","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"navigable","type":"dfn","url":"https://html.spec.whatwg.org/multipage/document-sequences.html#navigable"},
"https://html.spec.whatwg.org/multipage/document-sequences.html#navigable-container": {"displayText":"navigable container","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"navigable container","type":"dfn","url":"https://html.spec.whatwg.org/multipage/document-sequences.html#navigable-container"},
"https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-traversable": {"displayText":"top-level traversable","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"top-level traversable","type":"dfn","url":"https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-traversable"},
"https://html.spec.whatwg.org/multipage/dom.html#concept-document-permissions-policy": {"displayText":"permissions policy","export":true,"for_":["Document"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"permissions policy","type":"dfn","url":"https://html.spec.whatwg.org/multipage/dom.html#concept-document-permissions-policy"},
"https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-allow": {"displayText":"allow","export":true,"for_":["iframe"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"allow","type":"element-attr","url":"https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-allow"},
"https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-allowfullscreen": {"displayText":"allowfullscreen","export":true,"for_":["iframe"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"allowfullscreen","type":"element-attr","url":"https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-allowfullscreen"},
"https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-sandbox": {"displayText":"sandbox","export":true,"for_":["iframe"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"sandbox","type":"element-attr","url":"https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-sandbox"},
"https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-src": {"displayText":"src","export":true,"for_":["iframe"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"src","type":"element-attr","url":"https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-src"},
"https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-srcdoc": {"displayText":"srcdoc","export":true,"for_":["iframe"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"srcdoc","type":"element-attr","url":"https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-srcdoc"},
"https://html.spec.whatwg.org/multipage/iframe-embed-object.html#htmliframeelement": {"displayText":"HTMLIFrameElement","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"HTMLIFrameElement","type":"interface","url":"https://html.spec.whatwg.org/multipage/iframe-embed-object.html#htmliframeelement"},
"https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element": {"displayText":"iframe","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"iframe","type":"element","url":"https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element"},
"https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window": {"displayText":"associated Document","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"associated document","type":"dfn","url":"https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window"},
"https://html.spec.whatwg.org/multipage/nav-history-apis.html#window": {"displayText":"Window","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"Window","type":"interface","url":"https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"},
"https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object": {"displayText":"environment settings object","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"environment settings object","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object"},
"https://html.spec.whatwg.org/multipage/workers.html#workerglobalscope": {"displayText":"WorkerGlobalScope","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"WorkerGlobalScope","type":"interface","url":"https://html.spec.whatwg.org/multipage/workers.html#workerglobalscope"},
"https://html.spec.whatwg.org/multipage/worklets.html#workletglobalscope": {"displayText":"WorkletGlobalScope","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"WorkletGlobalScope","type":"interface","url":"https://html.spec.whatwg.org/multipage/worklets.html#workletglobalscope"},
"https://infra.spec.whatwg.org/#ascii-case-insensitive": {"displayText":"ASCII case-insensitive","export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"ascii case-insensitive","type":"dfn","url":"https://infra.spec.whatwg.org/#ascii-case-insensitive"},
"https://infra.spec.whatwg.org/#iteration-continue": {"displayText":"continue","export":true,"for_":["iteration"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"continue","type":"dfn","url":"https://infra.spec.whatwg.org/#iteration-continue"},
"https://infra.spec.whatwg.org/#list": {"displayText":"list","export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"list","type":"dfn","url":"https://infra.spec.whatwg.org/#list"},
"https://infra.spec.whatwg.org/#list-append": {"displayText":"append","export":true,"for_":["list"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"append","type":"dfn","url":"https://infra.spec.whatwg.org/#list-append"},
"https://infra.spec.whatwg.org/#list-iterate": {"displayText":"for each","export":true,"for_":["list","set"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"for each","type":"dfn","url":"https://infra.spec.whatwg.org/#list-iterate"},
"https://infra.spec.whatwg.org/#map-exists": {"displayText":"contain","export":true,"for_":["map"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"contain","type":"dfn","url":"https://infra.spec.whatwg.org/#map-exists"},
"https://infra.spec.whatwg.org/#map-iterate": {"displayText":"for each","export":true,"for_":["map"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"for each","type":"dfn","url":"https://infra.spec.whatwg.org/#map-iterate"},
"https://infra.spec.whatwg.org/#map-set": {"displayText":"set","export":true,"for_":["map"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"set","type":"dfn","url":"https://infra.spec.whatwg.org/#map-set"},
"https://infra.spec.whatwg.org/#ordered-map": {"displayText":"ordered map","export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"ordered map","type":"dfn","url":"https://infra.spec.whatwg.org/#ordered-map"},
"https://infra.spec.whatwg.org/#split-on-ascii-whitespace": {"displayText":"split on ASCII whitespace","export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"split on ascii whitespace","type":"dfn","url":"https://infra.spec.whatwg.org/#split-on-ascii-whitespace"},
"https://infra.spec.whatwg.org/#strictly-split": {"displayText":"strictly split","export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"strictly split","type":"dfn","url":"https://infra.spec.whatwg.org/#strictly-split"},
"https://infra.spec.whatwg.org/#string": {"displayText":"string","export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"string","type":"dfn","url":"https://infra.spec.whatwg.org/#string"},
"https://infra.spec.whatwg.org/#struct": {"displayText":"struct","export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"struct","type":"dfn","url":"https://infra.spec.whatwg.org/#struct"},
"https://infra.spec.whatwg.org/#struct-item": {"displayText":"item","export":true,"for_":["struct","tuple"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"item","type":"dfn","url":"https://infra.spec.whatwg.org/#struct-item"},
"https://url.spec.whatwg.org/#concept-url-origin": {"displayText":"origin","export":true,"for_":["url"],"level":"1","normative":true,"shortname":"url","spec":"url","status":"current","text":"origin","type":"dfn","url":"https://url.spec.whatwg.org/#concept-url-origin"},
"https://url.spec.whatwg.org/#concept-url-parser": {"displayText":"URL parser","export":true,"for_":[],"level":"1","normative":true,"shortname":"url","spec":"url","status":"current","text":"url parser","type":"dfn","url":"https://url.spec.whatwg.org/#concept-url-parser"},
"https://w3c.github.io/mediacapture-main/#dom-mediadevices-getusermedia": {"displayText":"getUserMedia()","export":true,"for_":["MediaDevices"],"level":"1","normative":true,"shortname":"mediacapture-streams","spec":"mediacapture-streams","status":"current","text":"getUserMedia()","type":"method","url":"https://w3c.github.io/mediacapture-main/#dom-mediadevices-getusermedia"},
"https://w3c.github.io/permissions/#dfn-powerful-feature": {"displayText":"powerful feature","export":true,"for_":[],"level":"1","normative":true,"shortname":"permissions","spec":"permissions","status":"current","text":"powerful feature","type":"dfn","url":"https://w3c.github.io/permissions/#dfn-powerful-feature"},
"https://w3c.github.io/reporting/#generate-and-queue-a-report": {"displayText":"generate and queue a report","export":true,"for_":[],"level":"1","normative":true,"shortname":"reporting","spec":"reporting-1","status":"current","text":"generate and queue a report","type":"dfn","url":"https://w3c.github.io/reporting/#generate-and-queue-a-report"},
"https://w3c.github.io/reporting/#report": {"displayText":"report","export":true,"for_":[],"level":"1","normative":true,"shortname":"reporting","spec":"reporting-1","status":"current","text":"report","type":"dfn","url":"https://w3c.github.io/reporting/#report"},
"https://w3c.github.io/reporting/#report-body": {"displayText":"body","export":true,"for_":["report"],"level":"1","normative":true,"shortname":"reporting","spec":"reporting-1","status":"current","text":"body","type":"dfn","url":"https://w3c.github.io/reporting/#report-body"},
"https://w3c.github.io/reporting/#report-type": {"displayText":"report type","export":true,"for_":[],"level":"","normative":true,"shortname":"reporting","spec":"reporting","status":"anchor-block","text":"report type","type":"dfn","url":"https://w3c.github.io/reporting/#report-type"},
"https://w3c.github.io/reporting/#reportbody": {"displayText":"ReportBody","export":true,"for_":[],"level":"1","normative":true,"shortname":"reporting","spec":"reporting-1","status":"current","text":"ReportBody","type":"interface","url":"https://w3c.github.io/reporting/#reportbody"},
"https://w3c.github.io/reporting/#visible-to-reportingobservers": {"displayText":"visible to reportingobservers","export":true,"for_":[],"level":"","normative":true,"shortname":"reporting","spec":"reporting","status":"anchor-block","text":"visible to reportingobservers","type":"dfn","url":"https://w3c.github.io/reporting/#visible-to-reportingobservers"},
"https://w3c.github.io/webappsec-csp/#grammardef-host-source": {"displayText":"host-source","export":true,"for_":[],"level":"3","normative":true,"shortname":"csp","spec":"csp3","status":"current","text":"host-source","type":"grammar","url":"https://w3c.github.io/webappsec-csp/#grammardef-host-source"},
"https://w3c.github.io/webappsec-csp/#grammardef-scheme-source": {"displayText":"scheme-source","export":true,"for_":[],"level":"3","normative":true,"shortname":"csp","spec":"csp3","status":"current","text":"scheme-source","type":"grammar","url":"https://w3c.github.io/webappsec-csp/#grammardef-scheme-source"},
"https://w3c.github.io/webappsec-csp/#match-url-to-source-expression": {"displayText":"Does url match expression in origin with redirect count?","export":true,"for_":[],"level":"3","normative":true,"shortname":"csp","spec":"csp3","status":"current","text":"does url match expression in origin with redirect count?","type":"dfn","url":"https://w3c.github.io/webappsec-csp/#match-url-to-source-expression"},
"https://w3c.github.io/webappsec-csp/#sandbox": {"displayText":"sandbox","export":true,"for_":[],"level":"3","normative":true,"shortname":"csp","spec":"csp3","status":"current","text":"sandbox","type":"dfn","url":"https://w3c.github.io/webappsec-csp/#sandbox"},
"https://webidl.spec.whatwg.org/#Default": {"displayText":"Default","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"Default","type":"extended-attribute","url":"https://webidl.spec.whatwg.org/#Default"},
"https://webidl.spec.whatwg.org/#Exposed": {"displayText":"Exposed","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"Exposed","type":"extended-attribute","url":"https://webidl.spec.whatwg.org/#Exposed"},
"https://webidl.spec.whatwg.org/#SameObject": {"displayText":"SameObject","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"SameObject","type":"extended-attribute","url":"https://webidl.spec.whatwg.org/#SameObject"},
"https://webidl.spec.whatwg.org/#idl-DOMString": {"displayText":"DOMString","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"DOMString","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-DOMString"},
"https://webidl.spec.whatwg.org/#idl-boolean": {"displayText":"boolean","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"boolean","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-boolean"},
"https://webidl.spec.whatwg.org/#idl-long": {"displayText":"long","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"long","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-long"},
"https://webidl.spec.whatwg.org/#idl-object": {"displayText":"object","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"object","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-object"},
"https://webidl.spec.whatwg.org/#idl-sequence": {"displayText":"sequence","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"sequence","type":"dfn","url":"https://webidl.spec.whatwg.org/#idl-sequence"},
};

function mkRefHint(link, ref) {
    const linkText = link.textContent;
    let dfnTextElements = '';
    if (ref.displayText.toLowerCase() != linkText.toLowerCase()) {
        // Give the original term if it's being displayed in a different way.
        // But allow casing differences, they're insignificant.
        dfnTextElements =
            mk.li({},
                mk.b({}, "Term: "),
                mk.span({}, ref.displayText)
            );
    }
    const forList = ref.for_;
    let forListElements;
    if(forList.length == 0) {
        forListElements = [];
    } else if(forList.length == 1) {
        forListElements = mk.li({},
            mk.b({}, "For: "),
            mk.span({}, forList[0]),
        );
    } else {
        forListElements = mk.li({},
            mk.b({}, "For: "),
            mk.ul({},
                ...forList.map(forItem =>
                    mk.li({},
                        mk.span({}, forItem)
                    ),
                ),
            ),
        );
    }
    const url = ref.url;
    const safeUrl = encodeURIComponent(url);
    const hintPanel = mk.aside({
        class: "ref-hint",
        id: `ref-hint-for-${safeUrl}`,
        "data-for": url,
        "aria-labelled-by": `ref-hint-for-${safeUrl}`,
    },
        mk.ul({},
            dfnTextElements,
            mk.li({},
                mk.b({}, "URL: "),
                mk.a({ href: url, class: "ref" }, url),
            ),
            mk.li({},
                mk.b({}, "Type: "),
                mk.span({}, `${ref.type}`),
            ),
            mk.li({},
                mk.b({}, "Spec: "),
                mk.span({}, `${ref.spec ? ref.spec : ''}`),
            ),
            forListElements
        ),
    );
    hintPanel.forLink = link;
    setupRefHintEventListeners(link, hintPanel);
    return hintPanel;
}

function hideAllRefHints() {
    queryAll(".ref-hint").forEach(el=>hideRefHint(el));
}

function hideRefHint(refHint) {
    const link = refHint.forLink;
    link.setAttribute("aria-expanded", "false");
    if(refHint.teardownEventListeners) {
        refHint.teardownEventListeners();
    }
    refHint.remove();
}

function showRefHint(link) {
    if(link.classList.contains("dfn-link")) return;
    const url = link.getAttribute("href");
    const ref = refsData[url];
    if(!ref) return;

    hideAllRefHints(); // Only display one at this time.

    const refHint = mkRefHint(link, ref);
    append(document.body, refHint);
    link.setAttribute("aria-expanded", "true");
    positionRefHint(refHint);
}

function setupRefHintEventListeners(link, refHint) {
    if (refHint.teardownEventListeners) return;
    // Add event handlers to hide the refHint after the user moves away
    // from both the link and refHint, if not hovering either within one second.
    let timeout = null;
    const startHidingRefHint = (event) => {
        if (timeout) {
            clearTimeout(timeout);
        }
        timeout = setTimeout(() => {
            hideRefHint(refHint);
        }, 1000);
    }
    const resetHidingRefHint = (event) => {
        if (timeout) clearTimeout(timeout);
        timeout = null;
    };
    link.addEventListener("mouseleave", startHidingRefHint);
    link.addEventListener("mouseenter", resetHidingRefHint);
    link.addEventListener("blur", startHidingRefHint);
    link.addEventListener("focus", resetHidingRefHint);
    refHint.addEventListener("mouseleave", startHidingRefHint);
    refHint.addEventListener("mouseenter", resetHidingRefHint);
    refHint.addEventListener("blur", startHidingRefHint);
    refHint.addEventListener("focus", resetHidingRefHint);

    refHint.teardownEventListeners = () => {
        // remove event listeners
        resetHidingRefHint();
        link.removeEventListener("mouseleave", startHidingRefHint);
        link.removeEventListener("mouseenter", resetHidingRefHint);
        link.removeEventListener("blur", startHidingRefHint);
        link.removeEventListener("focus", resetHidingRefHint);
        refHint.removeEventListener("mouseleave", startHidingRefHint);
        refHint.removeEventListener("mouseenter", resetHidingRefHint);
        refHint.removeEventListener("blur", startHidingRefHint);
        refHint.removeEventListener("focus", resetHidingRefHint);
    };
}

function positionRefHint(refHint) {
    const link = refHint.forLink;
    const linkPos = getBounds(link);
    refHint.style.top = linkPos.bottom + "px";
    refHint.style.left = linkPos.left + "px";

    const panelPos = refHint.getBoundingClientRect();
    const panelMargin = 8;
    const maxRight = document.body.parentNode.clientWidth - panelMargin;
    if (panelPos.right > maxRight) {
        const overflowAmount = panelPos.right - maxRight;
        const newLeft = Math.max(panelMargin, linkPos.left - overflowAmount);
        refHint.style.left = newLeft + "px";
    }
}

// TODO: shared util
// Returns the root-level absolute position {left and top} of element.
function getBounds(el, relativeTo=document.body) {
    const relativeRect = relativeTo.getBoundingClientRect();
    const elRect = el.getBoundingClientRect();
    const top = elRect.top - relativeRect.top;
    const left = elRect.left - relativeRect.left;
    return {
        top,
        left,
        bottom: top + elRect.height,
        right: left + elRect.width,
    }
}

function showRefHintListener(e) {
    // If the target isn't in a link (or is a link),
    // just ignore it.
    let link = e.target.closest("a");
    if(!link) return;

    // If the target is in a ref-hint panel
    // (aka a link in the already-open one),
    // also just ignore it.
    if(link.closest(".ref-hint")) return;

    // Otherwise, show the panel for the link.
    showRefHint(link);
}

function hideAllHintsListener(e) {
    // If the click is inside a ref-hint panel, ignore it.
    if(e.target.closest(".ref-hint")) return;
    // Otherwise, close all the current panels.
    hideAllRefHints();
}

document.addEventListener("DOMContentLoaded", () => {
    document.body.addEventListener("mousedown", showRefHintListener);
    document.body.addEventListener("focus", showRefHintListener);

    document.body.addEventListener("click", hideAllHintsListener);
});

window.addEventListener("resize", () => {
    // Hide any open ref hint.
    hideAllRefHints();
});
}
</script>
<script>/* Boilerplate: script-var-click-highlighting */
"use strict";
{
/*
Color-choosing design:

* Colors are ordered by goodness.
* On clicking a var, give it the earliest color
    with the lowest usage in the algorithm.
* On re-clicking, re-use the var's most recent color
    if that's not currently being used elsewhere.
*/

const COLOR_COUNT = 7;

document.addEventListener("click", e=>{
    if(e.target.nodeName == "VAR") {
        highlightSameAlgoVars(e.target);
    }
});

function highlightSameAlgoVars(v) {
    // Find the algorithm container.
    let algoContainer = findAlgoContainer(v);

    // Not highlighting document-global vars,
    // too likely to be unrelated.
    if(algoContainer == null) return;

    const varName = nameFromVar(v);
    if(!v.hasAttribute("data-var-color")) {
        const newColor = chooseHighlightColor(algoContainer, v);
        for(const el of algoContainer.querySelectorAll("var")) {
            if(nameFromVar(el) == varName) {
                el.setAttribute("data-var-color", newColor);
                el.setAttribute("data-var-last-color", newColor);
            }
        }
    } else {
        for(const el of algoContainer.querySelectorAll("var")) {
            if(nameFromVar(el) == varName) {
                el.removeAttribute("data-var-color");
            }
        }
    }
}
function findAlgoContainer(el) {
    while(el != document.body) {
        if(el.hasAttribute("data-algorithm")) return el;
        el = el.parentNode;
    }
    return null;
}
function nameFromVar(el) {
    return el.textContent.replace(/(\s|\xa0)+/g, " ").trim();
}
function colorCountsFromContainer(container) {
    const namesFromColor = Array.from({length:COLOR_COUNT}, x=>new Set());
    for(let v of container.querySelectorAll("var[data-var-color]")) {
        let color = +v.getAttribute("data-var-color");
        namesFromColor[color].add(nameFromVar(v));
    }

    return namesFromColor.map(x=>x.size);
}
function leastUsedColor(colors) {
    // Find the earliest color with the lowest count.
    let minCount = Infinity;
    let minColor = null;
    for(var i = 0; i < colors.length; i++) {
        if(colors[i] < minCount) {
            minColor = i;
            minCount = colors[i];
        }
    }
    return minColor;
}
function chooseHighlightColor(container, v) {
    const colorCounts = colorCountsFromContainer(container);
    if(v.hasAttribute("data-var-last-color")) {
        let color = +v.getAttribute("data-var-last-color");
        if(colorCounts[color] == 0) return color;
    }
    return leastUsedColor(colorCounts);
}
}
</script>